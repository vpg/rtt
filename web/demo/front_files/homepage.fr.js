
function formatDate(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.weekdaysShort:null)||calendarI18n.weekdaysShort,dayNames=(settings?settings.weekdays:null)||calendarI18n.weekdays,monthNamesShort=(settings?settings.monthNamesShort:null)||calendarI18n.monthNamesShort,monthNames=(settings?settings.months:null)||calendarI18n.months,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;};
(function(){function a(a){this._value=a}function b(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function c(a,b,c){var d;return d=b.indexOf("$")>-1?e(a,b,c):b.indexOf("%")>-1?f(a,b,c):b.indexOf(":")>-1?g(a,b):i(a._value,b,c)}function d(a,b){var c,d,e,f,g,i=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=h(b);else if(b===q)a._value=0;else{for("."!==o[p].delimiters.decimal&&(b=b.replace(/\./g,"").replace(o[p].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+o[p].abbreviations.thousand+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+o[p].abbreviations.million+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+o[p].abbreviations.billion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+o[p].abbreviations.trillion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(i.match(c)?Math.pow(10,3):1)*(i.match(d)?Math.pow(10,6):1)*(i.match(e)?Math.pow(10,9):1)*(i.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function e(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),j="";return b.indexOf(" $")>-1?(j=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(j=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=i(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,o[p].currency.symbol+j),e=e.join("")):e=o[p].currency.symbol+j+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,j+o[p].currency.symbol),e=e.join("")):e=e+j+o[p].currency.symbol,e}function f(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=i(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function g(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function h(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function i(a,c,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",r=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==q)return q;if(c.indexOf("(")>-1?(k=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(l=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1&&(r=c.indexOf("aK")>=0,s=c.indexOf("aM")>=0,t=c.indexOf("aB")>=0,u=c.indexOf("aT")>=0,v=r||s||t||u,c.indexOf(" a")>-1?(n=" ",c=c.replace(" a","")):c=c.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=o[p].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=o[p].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(n+=o[p].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||r)&&(n+=o[p].abbreviations.thousand,a/=Math.pow(10,3))),c.indexOf("b")>-1)for(c.indexOf(" b")>-1?(w=" ",c=c.replace(" b","")):c=c.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return c.indexOf("o")>-1&&(c.indexOf(" o")>-1?(x=" ",c=c.replace(" o","")):c=c.replace("o",""),x+=o[p].ordinal(a)),c.indexOf("[.]")>-1&&(m=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],j=c.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=b(a,i[0].length+i[1].length,d,i[1].length)):A=b(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?o[p].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=b(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o[p].delimiters.thousands)),0===c.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function j(a,b){o[a]=b}function k(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function l(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=k(a),d=k(b);return c>d?c:d},-1/0)}var m,n="1.5.3",o={},p="en",q=null,r="0,0",s="undefined"!=typeof module&&module.exports;m=function(b){return m.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=m.fn.unformat(b)),new a(Number(b))},m.version=n,m.isNumeral=function(b){return b instanceof a},m.language=function(a,b){if(!a)return p;if(a&&!b){if(!o[a])throw new Error("Unknown language : "+a);p=a}return(b||!o[a])&&j(a,b),m},m.languageData=function(a){if(!a)return o[p];if(!o[a])throw new Error("Unknown language : "+a);return o[a]},m.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),m.zeroFormat=function(a){q="string"==typeof a?a:null},m.defaultFormat=function(a){r="string"==typeof a?a:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),m.fn=a.prototype={clone:function(){return m(this)},format:function(a,b){return c(this,a?a:r,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:d(this,a?a:r)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=l.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=l.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=l(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=l(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(m(this._value).subtract(a).value())}},s&&(module.exports=m),"undefined"==typeof ender&&(this.numeral=m),"function"==typeof define&&define.amd&&define([],function(){return m})}).call(this);;
this.Handlebars=(function(){var __module3__=(function(){"use strict";var __exports__;function SafeString(string){this.string=string;}
SafeString.prototype.toString=function(){return""+this.string;};__exports__=SafeString;return __exports__;})();var __module2__=(function(__dependency1__){"use strict";var __exports__={};var SafeString=__dependency1__;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]||"&amp;";}
function extend(obj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(Object.prototype.hasOwnProperty.call(arguments[i],key)){obj[key]=arguments[i][key];}}}
return obj;}
__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return typeof value==='function';};if(isFunction(/x/)){isFunction=function(value){return typeof value==='function'&&toString.call(value)==='[object Function]';};}
var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return(value&&typeof value==='object')?toString.call(value)==='[object Array]':false;};__exports__.isArray=isArray;function escapeExpression(string){if(string instanceof SafeString){return string.toString();}else if(!string&&string!==0){return"";}
string=""+string;if(!possible.test(string)){return string;}
return string.replace(badChars,escapeChar);}
__exports__.escapeExpression=escapeExpression;function isEmpty(value){if(!value&&value!==0){return true;}else if(isArray(value)&&value.length===0){return true;}else{return false;}}
__exports__.isEmpty=isEmpty;function appendContextPath(contextPath,id){return(contextPath?contextPath+'.':'')+id;}
__exports__.appendContextPath=appendContextPath;return __exports__;})(__module3__);var __module4__=(function(){"use strict";var __exports__;var errorProps=['description','fileName','lineNumber','message','name','number','stack'];function Exception(message,node){var line;if(node&&node.firstLine){line=node.firstLine;message+=' - '+line+':'+node.firstColumn;}
var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]];}
if(line){this.lineNumber=line;this.column=node.firstColumn;}}
Exception.prototype=new Error();__exports__=Exception;return __exports__;})();var __module1__=(function(__dependency1__,__dependency2__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var VERSION="2.0.0-alpha.4";__exports__.VERSION=VERSION;var COMPILER_REVISION=5;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:'<= 1.0.rc.2',2:'== 1.0.0-rc.3',3:'== 1.0.0-rc.4',4:'== 1.x.x',5:'>= 2.0.0'};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType='[object Object]';function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this);}
__exports__.HandlebarsEnvironment=HandlebarsEnvironment;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Exception('Arg not supported with multiple helpers');}
Utils.extend(this.helpers,name);}else{if(inverse){fn.not=inverse;}
this.helpers[name]=fn;}},unregisterHelper:function(name){delete this.helpers[name];},registerPartial:function(name,str){if(toString.call(name)===objectType){Utils.extend(this.partials,name);}else{this.partials[name]=str;}},unregisterPartial:function(name){delete this.partials[name];}};function registerDefaultHelpers(instance){instance.registerHelper('helperMissing',function(){if(arguments.length===1){return undefined;}else{throw new Exception("Missing helper: '"+arguments[arguments.length-1].name+"'");}});instance.registerHelper('blockHelperMissing',function(context,options){var inverse=options.inverse||function(){},fn=options.fn;if(isFunction(context)){context=context.call(this);}
if(context===true){return fn(this);}else if(context===false||context==null){return inverse(this);}else if(isArray(context)){if(context.length>0){if(options.ids){options.ids=[options.name];}
return instance.helpers.each(context,options);}else{return inverse(this);}}else{if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.name);options={data:data};}
return fn(context,options);}});instance.registerHelper('each',function(context,options){if(!options){options=context;context=this;}
var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var contextPath;if(options.data&&options.ids){contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0])+'.';}
if(isFunction(context)){context=context.call(this);}
if(options.data){data=createFrame(options.data);}
if(context&&typeof context==='object'){if(isArray(context)){for(var j=context.length;i<j;i++){if(data){data.index=i;data.first=(i===0);data.last=(i===(context.length-1));if(contextPath){data.contextPath=contextPath+i;}}
ret=ret+fn(context[i],{data:data});}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key;data.index=i;data.first=(i===0);if(contextPath){data.contextPath=contextPath+key;}}
ret=ret+fn(context[key],{data:data});i++;}}}}
if(i===0){ret=inverse(this);}
return ret;});instance.registerHelper('if',function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this);}
if((!options.hash.includeZero&&!conditional)||Utils.isEmpty(conditional)){return options.inverse(this);}else{return options.fn(this);}});instance.registerHelper('unless',function(conditional,options){return instance.helpers['if'].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash});});instance.registerHelper('with',function(context,options){if(isFunction(context)){context=context.call(this);}
var fn=options.fn;if(!Utils.isEmpty(context)){if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0]);options={data:data};}
return fn(context,options);}});instance.registerHelper('log',function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,context);});instance.registerHelper('lookup',function(obj,field,options){return obj&&obj[field];});}
var logger={methodMap:{0:'debug',1:'info',2:'warn',3:'error'},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];if(typeof console!=='undefined'&&console[method]){console[method].call(console,obj);}}}};__exports__.logger=logger;function log(level,obj){logger.log(level,obj);}
__exports__.log=log;var createFrame=function(object){var frame=Utils.extend({},object);frame._parent=object;return frame;};__exports__.createFrame=createFrame;return __exports__;})(__module2__,__module4__);var __module5__=(function(__dependency1__,__dependency2__,__dependency3__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var COMPILER_REVISION=__dependency3__.COMPILER_REVISION;var REVISION_CHANGES=__dependency3__.REVISION_CHANGES;var createFrame=__dependency3__.createFrame;function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").");}else{throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").");}}}
__exports__.checkRevision=checkRevision;function template(templateSpec,env){if(!env){throw new Exception("No environment passed to template");}
env.VM.checkRevision(templateSpec.compiler);var invokePartialWrapper=function(partial,name,context,hash,helpers,partials,data){if(hash){context=Utils.extend({},context,hash);}
var result=env.VM.invokePartial.call(this,partial,name,context,helpers,partials,data);if(result!=null){return result;}
if(env.compile){var options={helpers:helpers,partials:partials,data:data};partials[name]=env.compile(partial,{data:data!==undefined},env);return partials[name](context,options);}else{throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode");}};var container={escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){return templateSpec[i];},programs:[],program:function(i,data){var programWrapper=this.programs[i],fn=this.fn(i);if(data){programWrapper=program(this,i,fn,data);}else if(!programWrapper){programWrapper=this.programs[i]=program(this,i,fn);}
return programWrapper;},programWithDepth:env.VM.programWithDepth,data:function(data,depth){while(data&&depth--){data=data._parent;}
return data;},merge:function(param,common){var ret=param||common;if(param&&common&&(param!==common)){ret=Utils.extend({},common,param);}
return ret;},noop:env.VM.noop,compilerInfo:templateSpec.compiler};var ret=function(context,options){options=options||{};var helpers,partials,data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData){data=initData(context,data);}
return templateSpec.main.call(container,context,container.helpers,container.partials,data);};ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial){container.partials=container.merge(options.partials,env.partials);}}else{container.helpers=options.helpers;container.partials=options.partials;}};ret._child=function(i){return container.programWithDepth(i);};return ret;}
__exports__.template=template;function programWithDepth(i,data){var args=Array.prototype.slice.call(arguments,2),container=this,fn=container.fn(i);var prog=function(context,options){options=options||{};return fn.apply(container,[context,container.helpers,container.partials,options.data||data].concat(args));};prog.program=i;prog.depth=args.length;return prog;}
__exports__.programWithDepth=programWithDepth;function program(container,i,fn,data){var prog=function(context,options){options=options||{};return fn.call(container,context,container.helpers,container.partials,options.data||data);};prog.program=i;prog.depth=0;return prog;}
__exports__.program=program;function invokePartial(partial,name,context,helpers,partials,data){var options={partial:true,helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Exception("The partial "+name+" could not be found");}else if(partial instanceof Function){return partial(context,options);}}
__exports__.invokePartial=invokePartial;function noop(){return"";}
__exports__.noop=noop;function initData(context,data){if(!data||!('root'in data)){data=data?createFrame(data):{};data.root=context;}
return data;}
return __exports__;})(__module2__,__module4__,__module1__);var __module0__=(function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__;var base=__dependency1__;var SafeString=__dependency2__;var Exception=__dependency3__;var Utils=__dependency4__;var runtime=__dependency5__;var create=function(){var hb=new base.HandlebarsEnvironment();Utils.extend(hb,base);hb.SafeString=SafeString;hb.Exception=Exception;hb.Utils=Utils;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb);};return hb;};var Handlebars=create();Handlebars.create=create;__exports__=Handlebars;return __exports__;})(__module1__,__module3__,__module4__,__module2__,__module5__);return __module0__;})();;
(function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates['filters_alerts']=template({"1":function(depth0,helpers,partials,data){return"";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,escapeExpression=this.escapeExpression,buffer="  <div id=\"createAlertContainer\">\n      <a href=\"";stack1=((helper=helpers.alertUrl||(depth0&&depth0.alertUrl)),(options={"name":"alertUrl","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.alertUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\" id=\"createAlertBtn\" class=\"vpTrackClick\" ea-action=\"CreateAlertFilters\" ga-tracker=\"CreateAlerte from filters\" ga-action=\""
+escapeExpression(((stack1=((stack1=(depth0&&depth0.frontvpg)),stack1==null||stack1===false?stack1:stack1.currentHash)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\">\n          <i class=\""
+escapeExpression(((helper=helpers.icon||(depth0&&depth0.icon)),(typeof helper===functionType?helper.call(depth0,{"name":"icon","hash":{},"data":data}):helper)))
+"\"></i>\n          <span class=\"return-filter-label\">"
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"</span>\n      </a>\n      <div class=\"clearfix\">&nbsp;</div>\n  </div>";},"useData":true});templates['filters_city']=template({"1":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"\n<option value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n    data-data='{\n      \"tracking\" : {\n        \"ga-label\" : \""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\",\n        \"ga-action\" : \"ac\",\n        \"ga-tracker\" : \"Filter\",\n        \"data-type\" : \"ac[]\",\n        \"ea-action\" : \"Showroom-SearchWithFilter\"\n      },\n      \"_class\" : \"display-filter vpTrackClick\"\n    }'\n    >\n    "
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"\n</option>\n";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1;stack1=helpers.each.call(depth0,(depth0&&depth0.city),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){return stack1;}
else{return'';}},"useData":true});templates['filters_country']=template({"1":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"\n    <option value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n          data-data='{\n            \"tracking\" : {\n              \"ga-label\" : \""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\",\n              \"ga-action\" : \"c_de\",\n              \"ga-tracker\" : \"Filter\",\n              \"data-type\" : \"c_de[]\"\n            },\n            \"_class\" : \"display-filter vpTrackClick\"\n          }'\n          >\n          "
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"\n    </option>\n";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1;stack1=helpers.each.call(depth0,(depth0&&depth0.countryDestinations),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){return stack1;}
else{return'';}},"useData":true});templates['filters_destination']=template({"1":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"\n    <li>\n        <input id=\"departure-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\" type=\"checkbox\" name=\"dc[]\" class=\"input_more_criterias vpTrackClick\"\n               ea-action=\"Showroom-SearchWithFilter\"\n               value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n               ga-tracker=\"Filter\"\n               ga-action=\"dc\"\n               ga-label=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n        />\n        <label for=\"departure-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\">"
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"</label>\n    </li>\n";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1;stack1=helpers.each.call(depth0,(depth0&&depth0.departures),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){return stack1;}
else{return'';}},"useData":true});templates['filters_nights']=template({"1":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"\n    <li>\n        <input id=\"nights-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\" type=\"checkbox\" name=\"nights[]\" class=\"input_more_criterias vpTrackClick\" ea-action=\"Showroom-SearchWithFilter\" value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n               ga-tracker=\"Filter\"\n               ga-action=\"nights\"\n               ga-label=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n        />\n        <label for=\"nights-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\">"
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"</label>\n    </li>\n";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1;stack1=helpers.each.call(depth0,(depth0&&depth0.nights),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){return stack1;}
else{return'';}},"useData":true});templates['filters_pensions']=template({"1":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"\n    <li>\n        <input id=\"pensions-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\" type=\"checkbox\" name=\"c_pe[]\" class=\"input_more_criterias vpTrackClick\" ea-action=\"Showroom-SearchWithFilter\" value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n               ga-tracker=\"Filter\"\n               ga-action=\"c_pe\"\n               ga-label=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n        />\n        <label for=\"pensions-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\">"
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"</label>\n    </li>\n";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1;stack1=helpers.each.call(depth0,(depth0&&depth0.pensions),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){return stack1;}
else{return'';}},"useData":true});templates['filters_prices']=template({"1":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"\n    <li>\n        <input id=\"prices-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\" type=\"checkbox\" name=\"price[]\" class=\"input_more_criterias vpTrackClick\" ea-action=\"Showroom-SearchWithFilter\" value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n               ga-tracker=\"Filter\"\n               ga-action=\"price\"\n               ga-label=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n        />\n        <label for=\"prices-"
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\">"
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"</label>\n    </li>\n";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1;stack1=helpers.each.call(depth0,(depth0&&depth0.prices),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){return stack1;}
else{return'';}},"useData":true});templates['filters_regions']=template({"1":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"\n    <option value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\"\n        data-data='{\n          \"tracking\" : {\n            \"ga-label\" : \""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\",\n            \"ga-action\" : \"__c_de\",\n            \"ga-tracker\" : \"Filter\",\n            \"data-type\" : \"_c_de[]\",\n            \"ea-action\" : \"Showroom-SearchWithFilter\"\n          },\n          \"_class\" : \"display-filter vpTrackClick\"\n        }'\n        >\n        "
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"\n    </option>\n";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1;stack1=helpers.each.call(depth0,(depth0&&depth0.regions),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){return stack1;}
else{return'';}},"useData":true});templates['filters_return']=template({"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"  <div class=\"filter_choice "
+escapeExpression(((helper=helpers['class']||(depth0&&depth0['class'])),(typeof helper===functionType?helper.call(depth0,{"name":"class","hash":{},"data":data}):helper)))
+"\" data-type=\""
+escapeExpression(((helper=helpers.key||(depth0&&depth0.key)),(typeof helper===functionType?helper.call(depth0,{"name":"key","hash":{},"data":data}):helper)))
+"\" data-value=\""
+escapeExpression(((helper=helpers.value||(depth0&&depth0.value)),(typeof helper===functionType?helper.call(depth0,{"name":"value","hash":{},"data":data}):helper)))
+"\">\n      <span class=\"return-filter-label\">"
+escapeExpression(((helper=helpers.label||(depth0&&depth0.label)),(typeof helper===functionType?helper.call(depth0,{"name":"label","hash":{},"data":data}):helper)))
+"</span>\n      <a href=\"#\" class=\"close-filter-result\">\n          <i class=\""
+escapeExpression(((helper=helpers.icon||(depth0&&depth0.icon)),(typeof helper===functionType?helper.call(depth0,{"name":"icon","hash":{},"data":data}):helper)))
+"\"></i>\n      </a>\n  </div>";},"useData":true});templates['killerDealBlocks']=template({"1":function(depth0,helpers,partials,data){var stack1,helper,helperMissing=helpers.helperMissing,buffer="\n      ";stack1=(helper=helpers.ifOperator||(depth0&&depth0.ifOperator)||helperMissing,helper.call(depth0,(depth0&&depth0.type),"==","sale",{"name":"ifOperator","hash":{},"fn":this.program(2,data),"inverse":this.program(19,data),"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n    ";},"2":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",escapeExpression=this.escapeExpression,blockHelperMissing=helpers.blockHelperMissing,helperMissing=helpers.helperMissing,buffer="\n        <a class=\"vpTrackClick\"\n           data-sale="
+escapeExpression(((stack1=(depth0&&depth0.sale_id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\n           ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(3,data),"inverse":this.program(5,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n           ea-action=\"Showroom-SlideshowKillerDeal/"
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"/sale\"\n           ";stack1=((helper=helpers.ifIsSaleSubscribe||(depth0&&depth0.ifIsSaleSubscribe)),(options={"name":"ifIsSaleSubscribe","hash":{},"fn":this.program(7,data),"inverse":this.program(10,data),"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.ifIsSaleSubscribe){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n        >\n          <div class=\"killerDealContent\">\n            <img class=\"rsImg\" src=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,"k",(depth0&&depth0.image),{"name":"dynamicPathPicture","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" data-rsTmb=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,"k",(depth0&&depth0.image),{"name":"dynamicPathPicture","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" data-rsBigImg=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,"k",(depth0&&depth0.image),{"name":"dynamicPathPicture","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" alt=\"\" />\n            <div class=\"infoBlock infoBlockLeftBlack\">\n                <div class=\"rsSale rsInfos rsSaleTitle\">\n                    <span class=\"rsTable\">\n                        <h1>"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.object_data)),stack1==null||stack1===false?stack1:stack1.browse_data)),stack1==null||stack1===false?stack1:stack1.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</h1>\n                        <span class=\"hidden-phone\">"
+escapeExpression(((stack1=(depth0&&depth0.sub_title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</span>\n                    </span>\n                </div>\n                <div class=\"rsSale rsSaleTime\">\n                    <span class=\"rsTable\">\n                        <i class=\"icon-time\"></i>\n                        <span>";stack1=((helper=helpers.killerDealSchedule||(depth0&&depth0.killerDealSchedule)),(options={"name":"killerDealSchedule","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.killerDealSchedule){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                    </span>\n                </div>\n                <div class=\"rsSale rsSalePrice\">\n                    <span class=\"rsTable\">\n                        <span class=\"price-flag\">\n                            <span class=\"hidden-desktop\"><i class=\"right-arrow white\"></i></span>\n                            <span class='pct-title'>";stack1=(helper=helpers.killerDealPriceFlag||(depth0&&depth0.killerDealPriceFlag)||helperMissing,helper.call(depth0,"titleBefore",{"name":"killerDealPriceFlag","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                            <span class='pct-discount'>";stack1=(helper=helpers.killerDealPriceFlag||(depth0&&depth0.killerDealPriceFlag)||helperMissing,helper.call(depth0,"price",{"name":"killerDealPriceFlag","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
stack1=(helper=helpers.killerDealPriceFlag||(depth0&&depth0.killerDealPriceFlag)||helperMissing,helper.call(depth0,"titleAfter",{"name":"killerDealPriceFlag","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                        </span>\n                    </span>\n                </div>\n                <div class=\"rsSale rsSaleEnter hidden-tablet hidden-phone\">\n                      <span class=\"rsTable\">\n                          <span class=\"rsSubscribe\">\n                            ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(12,data),"inverse":this.program(17,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                          </span>\n                      </span>\n                  </div>\n            </div>\n          </div>\n        </a>\n      ";},"3":function(depth0,helpers,partials,data){var stack1,functionType="function",escapeExpression=this.escapeExpression;return"\n               ga-tracker=\"Subscribe\"\n               ga-action=\"KillerDeal\"\n               ga-label=\""
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.object_data)),stack1==null||stack1===false?stack1:stack1.browse_data)),stack1==null||stack1===false?stack1:stack1.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n           ";},"5":function(depth0,helpers,partials,data){var stack1,functionType="function",escapeExpression=this.escapeExpression;return"\n               ga-tracker=\"Product Click\"\n               ga-action=\""
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"|"
+escapeExpression(((stack1=((stack1=((stack1=(depth0&&depth0.object_data)),stack1==null||stack1===false?stack1:stack1.browse_data)),stack1==null||stack1===false?stack1:stack1.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n               ga-label=\"KillerDeal\"\n           ";},"7":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,buffer="\n             ";stack1=((helper=helpers.killerDealUrl||(depth0&&depth0.killerDealUrl)),(options={"name":"killerDealUrl","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.killerDealUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n           ";},"8":function(depth0,helpers,partials,data){return"";},"10":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,buffer="\n             onclick=\"";stack1=((helper=helpers.subscribeKillerDealUrl||(depth0&&depth0.subscribeKillerDealUrl)),(options={"name":"subscribeKillerDealUrl","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.subscribeKillerDealUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\"\n           ";},"12":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,buffer="\n                              ";stack1=((helper=helpers.ifIsSaleSubscribe||(depth0&&depth0.ifIsSaleSubscribe)),(options={"name":"ifIsSaleSubscribe","hash":{},"fn":this.program(13,data),"inverse":this.program(15,data),"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.ifIsSaleSubscribe){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                            ";},"13":function(depth0,helpers,partials,data){var stack1,helper,functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,buffer="\n                                <span id=\"rsSubscribe-off-"
+escapeExpression(((stack1=(depth0&&depth0.sale_id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\">";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"is_subscribe",{"name":"getParams","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"</span>\n                              ";},"15":function(depth0,helpers,partials,data){var stack1,helper,functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,buffer="\n                                <span id=\"rsSubscribe-off-"
+escapeExpression(((stack1=(depth0&&depth0.sale_id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\">";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"header_sign",{"name":"getParams","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"</span>\n                              ";},"17":function(depth0,helpers,partials,data){var stack1,functionType="function",escapeExpression=this.escapeExpression;return"\n                              <i id=\"rsSubscribe-on-"
+escapeExpression(((stack1=(depth0&&depth0.sale_id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" class=\"icon-arrow-right-t1\"></i>\n                            ";},"19":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,buffer="\n        <a ";stack1=((helper=helpers.killerDealUrl||(depth0&&depth0.killerDealUrl)),(options={"name":"killerDealUrl","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.killerDealUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n           class=\"vpTrackClick\"\n           ga-tracker=\"Product Click\"\n           ga-action=\""
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n           ga-label=\"KillerDeal\"\n           ea-action=\"Showroom-SlideshowKillerDeal/"
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"/evt-th\"\n        >\n          <div class=\"killerDealContent\">\n            <img class=\"rsImg\" src=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,"k",(depth0&&depth0.image),{"name":"dynamicPathPicture","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" data-rsTmb=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,"k",(depth0&&depth0.image),{"name":"dynamicPathPicture","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" data-rsBigImg=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,"k",(depth0&&depth0.image),{"name":"dynamicPathPicture","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" alt=\"\" />\n            <div class=\"infoBlock infoBlockLeftBlack\">\n                <div class=\"rsSale rsInfos rsSaleTitle\">\n                    <span class=\"rsTable\">\n                        <h1>"
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</h1>\n                        <span class=\"hidden-phone\">"
+escapeExpression(((stack1=(depth0&&depth0.sub_title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</span>\n                    </span>\n                </div>\n                <div class=\"rsSale rsSaleTime\">\n                    <span class=\"rsTable\">\n                        <i class=\"icon-time\"></i>\n                        <span>";stack1=((helper=helpers.killerDealSchedule||(depth0&&depth0.killerDealSchedule)),(options={"name":"killerDealSchedule","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.killerDealSchedule){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                    </span>\n                </div>\n                <div class=\"rsSale rsSalePrice\">\n                    <span class=\"rsTable\">\n                        <span class=\"price-flag\">\n                            <span class=\"hidden-desktop\"><i class=\"right-arrow white\"></i></span>\n                            <span class='pct-title'>";stack1=(helper=helpers.killerDealPriceFlag||(depth0&&depth0.killerDealPriceFlag)||helperMissing,helper.call(depth0,"titleBefore",{"name":"killerDealPriceFlag","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                            <span class='pct-discount'>";stack1=(helper=helpers.killerDealPriceFlag||(depth0&&depth0.killerDealPriceFlag)||helperMissing,helper.call(depth0,"price",{"name":"killerDealPriceFlag","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
stack1=(helper=helpers.killerDealPriceFlag||(depth0&&depth0.killerDealPriceFlag)||helperMissing,helper.call(depth0,"titleAfter",{"name":"killerDealPriceFlag","hash":{},"fn":this.program(8,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"</span>\n                        </span>\n                    </span>\n                </div>\n                <div class=\"rsSale rsSaleEnter hidden-tablet hidden-phone\">\n                    <span class=\"rsTable\">\n                        <i class=\"icon-arrow-right-t1\"></i>\n                    </span>\n                </div>\n            </div>\n          </div>\n        </a>\n      ";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1,buffer="    ";stack1=helpers.each.call(depth0,(depth0&&depth0.killerDealBlocks),{"name":"each","hash":{},"fn":this.program(1,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n";},"useData":true});templates['saleList']=template({"1":function(depth0,helpers,partials,data,depth1){var stack1,helper,helperMissing=helpers.helperMissing,buffer="\n        ";stack1=(helper=helpers.ifOperator||(depth0&&depth0.ifOperator)||helperMissing,helper.call(depth0,(depth0&&depth0.isThematique),"||",(depth0&&depth0.isEvent),{"name":"ifOperator","hash":{},"fn":this.programWithDepth(2,data,depth1),"inverse":this.programWithDepth(30,data,depth1),"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n    ";},"2":function(depth0,helpers,partials,data,depth2){var stack1,helper,options,functionType="function",escapeExpression=this.escapeExpression,blockHelperMissing=helpers.blockHelperMissing,helperMissing=helpers.helperMissing,buffer="\n            <article id=\""
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" class=\"sale";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(3,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
stack1=helpers['if'].call(depth0,(depth2&&depth2.isLazy),{"name":"if","hash":{},"fn":this.program(5,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\">\n                <a href=\"";stack1=((helper=helpers.thevtUrl||(depth0&&depth0.thevtUrl)),(options={"name":"thevtUrl","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.thevtUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" title=\""
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n                    class=\"";stack1=(helper=helpers.modulo||(depth0&&depth0.modulo)||helperMissing,helper.call(depth0,(data==null||data===false?data:data.index),2,{"name":"modulo","hash":{},"fn":this.program(9,data),"inverse":this.program(11,data),"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+=" reload-sdv vpTrackClick";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(13,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\"\n                    ga-tracker=\"Product Click\"\n                    ga-action=\""
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"|"
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n                    ga-label=\"Block\"\n                    ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(15,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                >\n                    <figure class=\"sale-figure\">\n                        <img class=\"sale-image\" src=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,((stack1=(depth0&&depth0.frontvpg)),stack1==null||stack1===false?stack1:stack1.defaultRatioImage),(depth0&&depth0.newsletter_image),{"name":"dynamicPathPicture","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" alt=\"\" onerror=\"this.src = frontvpg.dynamicPath(frontvpg.defaultRatioImage, frontvpg.defaultImg)\" ";stack1=(helper=helpers.styleImgHeightCalc||(depth0&&depth0.styleImgHeightCalc)||helperMissing,helper.call(depth0,(depth0&&depth0.isNext),{"name":"styleImgHeightCalc","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="/>\n                        ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isEvent),{"name":"if","hash":{},"fn":this.programWithDepth(17,data,depth2),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                        <figcaption>\n                            <p>\n                                <i class=\"icon-time\"></i>\n                                <span class=\"time\">";stack1=(helper=helpers.thevtSchedule||(depth0&&depth0.thevtSchedule)||helperMissing,helper.call(depth0,(depth0&&depth0.isNext),{"name":"thevtSchedule","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                            </p>\n                        </figcaption>\n                        ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(19,data),"inverse":this.program(21,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                            <div class=\"triangle-bottomright\"></div>\n                            <strong class=\"ribbon-content\">\n                              ";stack1=((helper=helpers.handleRibbon||(depth0&&depth0.handleRibbon)),(options={"name":"handleRibbon","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.handleRibbon){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                            </strong>\n                          <div class = \"ruban-stitches-bottom\"></div>\n                        </div>\n                    </figure>\n                    <span class=\"sale-destination\">"
+escapeExpression(((stack1=(depth0&&depth0.count)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+" ";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"nb_sales",{"name":"getParams","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                    <span class=\"sale-name\">"
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"</span>\n                    ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(23,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n\n                    ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(25,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                </a>\n            </article>\n        ";},"3":function(depth0,helpers,partials,data){return" next";},"5":function(depth0,helpers,partials,data){return" lazy";},"7":function(depth0,helpers,partials,data){return"";},"9":function(depth0,helpers,partials,data){return"leftSale";},"11":function(depth0,helpers,partials,data){return"rightSale";},"13":function(depth0,helpers,partials,data){return" noguest guestOriginSubscribe";},"15":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,buffer="onclick=\"";stack1=((helper=helpers.subscribeUrl||(depth0&&depth0.subscribeUrl)),(options={"name":"subscribeUrl","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.subscribeUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\"";},"17":function(depth0,helpers,partials,data,depth3){var stack1,functionType="function",escapeExpression=this.escapeExpression;return"\n                            <span class=\"picto-event\">\n                                <img src=\"/s/images/picto/icon-event-"
+escapeExpression(((stack1=(depth3&&depth3.lang)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+".png\" width=\"100px\" height=\"100px\"></img>\n                            </span>\n                        ";},"19":function(depth0,helpers,partials,data){return"\n                            <div class=\"ribbon ribbon-black\">\n                        ";},"21":function(depth0,helpers,partials,data){return"\n                            <div class=\"ribbon\">\n                        ";},"23":function(depth0,helpers,partials,data){return"\n                        <span class=\"sale-interstice clearfix\"></span>\n                    ";},"25":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,escapeExpression=this.escapeExpression,buffer="\n                      <a ";stack1=((helper=helpers.saleUrl||(depth0&&depth0.saleUrl)),(options={"name":"saleUrl","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.saleUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+=" class=\"next-sale-btn vpTrackClick noguest guestOriginSubscribe\" ga-tracker=\"Subscribe/SaleBlock/"
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" ea-productaction=\"Showroom-Link-Registersoon\">\n                          <span class=\"btn graySmoothLighter\">\n                            ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isRegisteredNextSale),{"name":"if","hash":{},"fn":this.program(26,data),"inverse":this.program(28,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                          </span>\n                      </a>\n                    ";},"26":function(depth0,helpers,partials,data){var stack1,helper,helperMissing=helpers.helperMissing,buffer="\n                              ";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"btn_already_sub",{"name":"getParams","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                            ";},"28":function(depth0,helpers,partials,data){var stack1,helper,helperMissing=helpers.helperMissing,buffer="\n                              ";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"btn_subscribe",{"name":"getParams","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                            ";},"30":function(depth0,helpers,partials,data,depth2){var stack1,buffer="\n            ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isPushPromo),{"name":"if","hash":{},"fn":this.programWithDepth(31,data,depth2),"inverse":this.programWithDepth(38,data,depth2),"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n        </article>\n        ";},"31":function(depth0,helpers,partials,data,depth3){var stack1,helper,options,functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,blockHelperMissing=helpers.blockHelperMissing,buffer="\n                <article id=\"push-promo-"
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" class=\"push-promo";stack1=helpers['if'].call(depth0,(depth3&&depth3.isLazy),{"name":"if","hash":{},"fn":this.program(5,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
stack1=(helper=helpers.ifOperator||(depth0&&depth0.ifOperator)||helperMissing,helper.call(depth0,(depth0&&depth0.url),"==","FB",{"name":"ifOperator","hash":{},"fn":this.program(32,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" order=\""
+escapeExpression(((stack1=(depth0&&depth0.order)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\">\n                    <a\n                    ";stack1=(helper=helpers.ifOperator||(depth0&&depth0.ifOperator)||helperMissing,helper.call(depth0,(depth0&&depth0.url),"!=","FB",{"name":"ifOperator","hash":{},"fn":this.program(34,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                    class=\"";stack1=(helper=helpers.modulo||(depth0&&depth0.modulo)||helperMissing,helper.call(depth0,(data==null||data===false?data:data.index),2,{"name":"modulo","hash":{},"fn":this.program(9,data),"inverse":this.program(11,data),"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+=" vpTrackClick noguest nofullnopwd\"\n                    ga-tracker=\"PushPromo\"\n                    ga-action=\"ClicPushPromo\"\n                    ga-label=\"";stack1=((helper=helpers.pushPromoIndex||(depth0&&depth0.pushPromoIndex)),(options={"name":"pushPromoIndex","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.pushPromoIndex){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="\"\n                    ea-action=\"Showroom-Push-PromoInterne";stack1=((helper=helpers.pushPromoIndex||(depth0&&depth0.pushPromoIndex)),(options={"name":"pushPromoIndex","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.pushPromoIndex){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="\"\n                    >\n                        <figure>\n                            <img src=\""
+escapeExpression(((stack1=(depth0&&depth0.img)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" alt=\"\" ";stack1=(helper=helpers.styleImgHeightCalc||(depth0&&depth0.styleImgHeightCalc)||helperMissing,helper.call(depth0,(depth0&&depth0.isNext),{"name":"styleImgHeightCalc","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="/>\n                        </figure>\n                    </a>\n                    ";stack1=(helper=helpers.ifOperator||(depth0&&depth0.ifOperator)||helperMissing,helper.call(depth0,(depth0&&depth0.url),"==","FB",{"name":"ifOperator","hash":{},"fn":this.program(36,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                </article>\n            ";},"32":function(depth0,helpers,partials,data){return" facebook";},"34":function(depth0,helpers,partials,data){var stack1,functionType="function",escapeExpression=this.escapeExpression;return" href=\""
+escapeExpression(((stack1=(depth0&&depth0.url)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" ";},"36":function(depth0,helpers,partials,data){var stack1,helper,helperMissing=helpers.helperMissing,buffer="\n                        <div class=\"fb_vp_widget\">\n                            <div class=\"fb-like\" style=\"position: absolute;\" data-href=\"";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"main_facebook_page_url",{"name":"getParams","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\" data-action=\"like\" data-layout=\"button_count\"></div>\n                       </div>\n                    ";},"38":function(depth0,helpers,partials,data,depth3){var stack1,helper,options,functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,blockHelperMissing=helpers.blockHelperMissing,buffer="\n                <article id=\""
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" class=\"sale";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(3,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
stack1=helpers['if'].call(depth0,(depth3&&depth3.isLazy),{"name":"if","hash":{},"fn":this.program(5,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\">\n                    <a ";stack1=helpers.unless.call(depth0,(depth0&&depth0.isNext),{"name":"unless","hash":{},"fn":this.program(39,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+=" title=\""
+escapeExpression(((stack1=((stack1=(depth0&&depth0.browse_data)),stack1==null||stack1===false?stack1:stack1.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(15,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                    class=\"";stack1=(helper=helpers.modulo||(depth0&&depth0.modulo)||helperMissing,helper.call(depth0,(data==null||data===false?data:data.index),2,{"name":"modulo","hash":{},"fn":this.program(9,data),"inverse":this.program(11,data),"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+=" vpTrackClick";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(13,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\"\n                    ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(41,data),"inverse":this.program(43,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                    >\n                        <figure class=\"sale-figure\">\n                            <img class=\"sale-image\" data-src=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,((stack1=(depth0&&depth0.frontvpg)),stack1==null||stack1===false?stack1:stack1.defaultRatioImage),((stack1=((stack1=(depth0&&depth0.images)),stack1==null||stack1===false?stack1:stack1['0'])),stack1==null||stack1===false?stack1:stack1.path),{"name":"dynamicPathPicture","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" src=\"";stack1=(helper=helpers.dynamicPathPicture||(depth0&&depth0.dynamicPathPicture)||helperMissing,helper.call(depth0,((stack1=(depth0&&depth0.frontvpg)),stack1==null||stack1===false?stack1:stack1.defaultRatioImage),((stack1=((stack1=(depth0&&depth0.images)),stack1==null||stack1===false?stack1:stack1['0'])),stack1==null||stack1===false?stack1:stack1.path),{"name":"dynamicPathPicture","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\" alt=\"\" onerror=\"this.src = frontvpg.dynamicPath(frontvpg.defaultRatioImage, frontvpg.defaultImg)\" ";stack1=(helper=helpers.styleImgHeightCalc||(depth0&&depth0.styleImgHeightCalc)||helperMissing,helper.call(depth0,(depth0&&depth0.isNext),{"name":"styleImgHeightCalc","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="/>\n                            ";stack1=(helper=helpers.ifOperator||(depth0&&depth0.ifOperator)||helperMissing,helper.call(depth0,(depth0&&depth0.isNext),"&&",(depth0&&depth0.isActiveTrailer),{"name":"ifOperator","hash":{},"fn":this.program(45,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                            <figcaption>\n                                <p>\n                                    <i class=\"icon-time\"></i>\n                                    <span class=\"time\">";stack1=(helper=helpers.saleSchedule||(depth0&&depth0.saleSchedule)||helperMissing,helper.call(depth0,(depth0&&depth0.isNext),{"name":"saleSchedule","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                                </p>\n                            </figcaption>\n                            ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(47,data),"inverse":this.program(49,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                                <div class=\"triangle-bottomright\"></div>\n                                <strong class=\"ribbon-content\">\n                                  ";stack1=((helper=helpers.handleRibbon||(depth0&&depth0.handleRibbon)),(options={"name":"handleRibbon","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.handleRibbon){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                                </strong>\n                              <div class = \"ruban-stitches-bottom\"></div>\n                            </div>\n                        </figure>\n                        <span class=\"sale-destination\">";stack1=((helper=helpers.displayTitle||(depth0&&depth0.displayTitle)),(options={"name":"displayTitle","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.displayTitle){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                        <span class=\"sale-name\">";stack1=((helper=helpers.displayTitleSale||(depth0&&depth0.displayTitleSale)),(options={"name":"displayTitleSale","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.displayTitleSale){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+="</span>\n                        ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(51,data),"inverse":this.program(53,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n\n                        ";stack1=helpers['if'].call(depth0,(depth0&&depth0.ribbon),{"name":"if","hash":{},"fn":this.program(55,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
buffer+="\n                        ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isNext),{"name":"if","hash":{},"fn":this.program(57,data),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                    </a>\n                </article>\n            ";},"39":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing;stack1=((helper=helpers.saleUrl||(depth0&&depth0.saleUrl)),(options={"name":"saleUrl","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.saleUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){return stack1;}
else{return'';}},"41":function(depth0,helpers,partials,data){var stack1,functionType="function",escapeExpression=this.escapeExpression;return"\n                        ga-tracker=\"Subscribe\"\n                        ga-action=\"SaleBlock\"\n                        ga-label=\""
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n                    ";},"43":function(depth0,helpers,partials,data){var stack1,functionType="function",escapeExpression=this.escapeExpression;return"\n                        ga-tracker=\"Product Click\"\n                        ga-action=\""
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"|"
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n                        ga-label=\"Block\"\n                    ";},"45":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",escapeExpression=this.escapeExpression,blockHelperMissing=helpers.blockHelperMissing,buffer="\n                            <a title=\""
+escapeExpression(((stack1=((stack1=(depth0&&depth0.browse_data)),stack1==null||stack1===false?stack1:stack1.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" class=\"trailer-link vpTrackClick\" onclick=\"";stack1=((helper=helpers.trailerUrl||(depth0&&depth0.trailerUrl)),(options={"name":"trailerUrl","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.trailerUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\"\n                                ga-tracker=\"Trailer\"\n                                ga-action=\"Closed\"\n                                ga-label=\""
+escapeExpression(((stack1=((stack1=(depth0&&depth0.browse_data)),stack1==null||stack1===false?stack1:stack1.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n                                item-id=\""
+escapeExpression(((stack1=(depth0&&depth0.id)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\"\n                                ea-productaction=\"Product Page - Overview Tab\"\n                            >\n                              <i class=\"icon-zoom\"></i>\n                            </a>\n                            ";},"47":function(depth0,helpers,partials,data){return"\n                                <div class=\"ribbon ribbon-black\">\n                            ";},"49":function(depth0,helpers,partials,data){return"\n                                <div class=\"ribbon\">\n                            ";},"51":function(depth0,helpers,partials,data){return"\n                            <span class=\"sale-interstice clearfix\"></span>\n                        ";},"53":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,buffer="\n                            <span class=\"hotel-name\">";stack1=((helper=helpers.displayHotelName||(depth0&&depth0.displayHotelName)),(options={"name":"displayHotelName","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.displayHotelName){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
return buffer+"</span>\n                            <span class=\"clearfix\">&nbsp;</span>\n                        ";},"55":function(depth0,helpers,partials,data){var helper,functionType="function",escapeExpression=this.escapeExpression;return"<span class=\"icon-"
+escapeExpression(((helper=helpers.ribbon||(depth0&&depth0.ribbon)),(typeof helper===functionType?helper.call(depth0,{"name":"ribbon","hash":{},"data":data}):helper)))
+"\"></span>";},"57":function(depth0,helpers,partials,data){var stack1,helper,options,functionType="function",blockHelperMissing=helpers.blockHelperMissing,escapeExpression=this.escapeExpression,buffer="\n                            <a ";stack1=((helper=helpers.saleUrl||(depth0&&depth0.saleUrl)),(options={"name":"saleUrl","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}),(typeof helper===functionType?helper.call(depth0,options):helper));if(!helpers.saleUrl){stack1=blockHelperMissing.call(depth0,stack1,options);}
if(stack1||stack1===0){buffer+=stack1;}
buffer+=" class=\"next-sale-btn vpTrackClick noguest guestOriginSubscribe\" ga-tracker=\"Subscribe/SaleBlock/"
+escapeExpression(((stack1=(depth0&&depth0.title)),typeof stack1===functionType?stack1.apply(depth0):stack1))
+"\" ea-productaction=\"Showroom-Link-Registersoon\">\n                                <span class=\"btn graySmoothLighter\">\n                                  ";stack1=helpers['if'].call(depth0,(depth0&&depth0.isRegisteredNextSale),{"name":"if","hash":{},"fn":this.program(58,data),"inverse":this.program(60,data),"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                                </span>\n                            </a>\n                        ";},"58":function(depth0,helpers,partials,data){var stack1,helper,helperMissing=helpers.helperMissing,buffer="\n                                    ";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"btn_already_sub",{"name":"getParams","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                                  ";},"60":function(depth0,helpers,partials,data){var stack1,helper,helperMissing=helpers.helperMissing,buffer="\n                                    ";stack1=(helper=helpers.getParams||(depth0&&depth0.getParams)||helperMissing,helper.call(depth0,"btn_subscribe",{"name":"getParams","hash":{},"fn":this.program(7,data),"inverse":this.noop,"data":data}));if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n                                  ";},"compiler":[5,">= 2.0.0"],"main":function(depth0,helpers,partials,data){var stack1,buffer="";stack1=helpers.each.call(depth0,(depth0&&depth0.currentArray),{"name":"each","hash":{},"fn":this.programWithDepth(1,data,depth0),"inverse":this.noop,"data":data});if(stack1||stack1===0){buffer+=stack1;}
return buffer+"\n";},"useData":true});})();;
(function(root,factory){if(typeof define==='function'&&define.amd){define('sifter',factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.Sifter=factory();}}(this,function(){var Sifter=function(items,settings){this.items=items;this.settings=settings||{diacritics:true};};Sifter.prototype.tokenize=function(query){query=trim(String(query||'').toLowerCase());if(!query||!query.length)return[];var i,n,regex,letter;var tokens=[];var words=query.split(/ +/);for(i=0,n=words.length;i<n;i++){regex=escape_regex(words[i]);if(this.settings.diacritics){for(letter in DIACRITICS){if(DIACRITICS.hasOwnProperty(letter)){regex=regex.replace(new RegExp(letter,'g'),DIACRITICS[letter]);}}}
tokens.push({string:words[i],regex:new RegExp(regex,'i')});}
return tokens;};Sifter.prototype.iterator=function(object,callback){var iterator;if(is_array(object)){iterator=Array.prototype.forEach||function(callback){for(var i=0,n=this.length;i<n;i++){callback(this[i],i,this);}};}else{iterator=function(callback){for(var key in this){if(this.hasOwnProperty(key)){callback(this[key],key,this);}}};}
iterator.apply(object,[callback]);};Sifter.prototype.getScoreFunction=function(search,options){var self,fields,tokens,token_count;self=this;search=self.prepareSearch(search,options);tokens=search.tokens;fields=search.options.fields;token_count=tokens.length;var scoreValue=function(value,token){var score,pos;if(!value)return 0;value=String(value||'');pos=value.search(token.regex);if(pos===-1)return 0;score=token.string.length/value.length;if(pos===0)score+=0.5;return score;};var scoreObject=(function(){var field_count=fields.length;if(!field_count){return function(){return 0;};}
if(field_count===1){return function(token,data){return scoreValue(data[fields[0]],token);};}
return function(token,data){for(var i=0,sum=0;i<field_count;i++){sum+=scoreValue(data[fields[i]],token);}
return sum/field_count;};})();if(!token_count){return function(){return 0;};}
if(token_count===1){return function(data){return scoreObject(tokens[0],data);};}
if(search.options.conjunction==='and'){return function(data){var score;for(var i=0,sum=0;i<token_count;i++){score=scoreObject(tokens[i],data);if(score<=0)return 0;sum+=score;}
return sum/token_count;};}else{return function(data){for(var i=0,sum=0;i<token_count;i++){sum+=scoreObject(tokens[i],data);}
return sum/token_count;};}};Sifter.prototype.getSortFunction=function(search,options){var i,n,self,field,fields,fields_count,multiplier,multipliers,get_field,implicit_score,sort;self=this;search=self.prepareSearch(search,options);sort=(!search.query&&options.sort_empty)||options.sort;get_field=function(name,result){if(name==='$score')return result.score;return self.items[result.id][name];};fields=[];if(sort){for(i=0,n=sort.length;i<n;i++){if(search.query||sort[i].field!=='$score'){fields.push(sort[i]);}}}
if(search.query){implicit_score=true;for(i=0,n=fields.length;i<n;i++){if(fields[i].field==='$score'){implicit_score=false;break;}}
if(implicit_score){fields.unshift({field:'$score',direction:'desc'});}}else{for(i=0,n=fields.length;i<n;i++){if(fields[i].field==='$score'){fields.splice(i,1);break;}}}
multipliers=[];for(i=0,n=fields.length;i<n;i++){multipliers.push(fields[i].direction==='desc'?-1:1);}
fields_count=fields.length;if(!fields_count){return null;}else if(fields_count===1){field=fields[0].field;multiplier=multipliers[0];return function(a,b){return multiplier*cmp(get_field(field,a),get_field(field,b));};}else{return function(a,b){var i,result,a_value,b_value,field;for(i=0;i<fields_count;i++){field=fields[i].field;result=multipliers[i]*cmp(get_field(field,a),get_field(field,b));if(result)return result;}
return 0;};}};Sifter.prototype.prepareSearch=function(query,options){if(typeof query==='object')return query;options=extend({},options);var option_fields=options.fields;var option_sort=options.sort;var option_sort_empty=options.sort_empty;if(option_fields&&!is_array(option_fields))options.fields=[option_fields];if(option_sort&&!is_array(option_sort))options.sort=[option_sort];if(option_sort_empty&&!is_array(option_sort_empty))options.sort_empty=[option_sort_empty];return{options:options,query:String(query||'').toLowerCase(),tokens:this.tokenize(query),total:0,items:[]};};Sifter.prototype.search=function(query,options){var self=this,value,score,search,calculateScore;var fn_sort;var fn_score;search=this.prepareSearch(query,options);options=search.options;query=search.query;fn_score=options.score||self.getScoreFunction(search);if(query.length){self.iterator(self.items,function(item,id){score=fn_score(item);if(options.filter===false||score>0){search.items.push({'score':score,'id':id});}});}else{self.iterator(self.items,function(item,id){search.items.push({'score':1,'id':id});});}
fn_sort=self.getSortFunction(search,options);if(fn_sort)search.items.sort(fn_sort);search.total=search.items.length;if(typeof options.limit==='number'){search.items=search.items.slice(0,options.limit);}
return search;};var cmp=function(a,b){if(typeof a==='number'&&typeof b==='number'){return a>b?1:(a<b?-1:0);}
a=String(a||'').toLowerCase();b=String(b||'').toLowerCase();if(a>b)return 1;if(b>a)return-1;return 0;};var extend=function(a,b){var i,n,k,object;for(i=1,n=arguments.length;i<n;i++){object=arguments[i];if(!object)continue;for(k in object){if(object.hasOwnProperty(k)){a[k]=object[k];}}}
return a;};var trim=function(str){return(str+'').replace(/^\s+|\s+$|/g,'');};var escape_regex=function(str){return(str+'').replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1');};var is_array=Array.isArray||($&&$.isArray)||function(object){return Object.prototype.toString.call(object)==='[object Array]';};var DIACRITICS={'a':'[aÃ€ÃÃ‚ÃƒÃ„Ã…Ã Ã¡Ã¢Ã£Ã¤Ã¥]','c':'[cÃ‡Ã§Ä‡Ä†ÄÄŒĉĈ]','d':'[dÄ‘Ä]','e':'[eÃˆÃ‰ÃŠÃ‹Ã¨Ã©ÃªÃ«ÈèêÊ]','i':'[iÃŒÃÃŽÃÃ¬Ã­Ã®Ã¯]','n':'[nÃ‘Ã±]','o':'[oÃ’Ã“Ã”Ã•Ã•Ã–Ã˜Ã²Ã³Ã´ÃµÃ¶Ã¸ôÔ]','s':'[sÅ Å¡]','u':'[uÃ™ÃšÃ›ÃœÃ¹ÃºÃ»Ã¼]','y':'[yÅ¸Ã¿Ã½]','z':'[zÅ½Å¾]'};return Sifter;}));(function(root,factory){if(typeof define==='function'&&define.amd){define('microplugin',factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.MicroPlugin=factory();}}(this,function(){var MicroPlugin={};MicroPlugin.mixin=function(Interface){Interface.plugins={};Interface.prototype.initializePlugins=function(plugins){var i,n,key;var self=this;var queue=[];self.plugins={names:[],settings:{},requested:{},loaded:{}};if(utils.isArray(plugins)){for(i=0,n=plugins.length;i<n;i++){if(typeof plugins[i]==='string'){queue.push(plugins[i]);}else{self.plugins.settings[plugins[i].name]=plugins[i].options;queue.push(plugins[i].name);}}}else if(plugins){for(key in plugins){if(plugins.hasOwnProperty(key)){self.plugins.settings[key]=plugins[key];queue.push(key);}}}
while(queue.length){self.require(queue.shift());}};Interface.prototype.loadPlugin=function(name){var self=this;var plugins=self.plugins;var plugin=Interface.plugins[name];if(!Interface.plugins.hasOwnProperty(name)){throw new Error('Unable to find "'+name+'" plugin');}
plugins.requested[name]=true;plugins.loaded[name]=plugin.fn.apply(self,[self.plugins.settings[name]||{}]);plugins.names.push(name);};Interface.prototype.require=function(name){var self=this;var plugins=self.plugins;if(!self.plugins.loaded.hasOwnProperty(name)){if(plugins.requested[name]){throw new Error('Plugin has circular dependency ("'+name+'")');}
self.loadPlugin(name);}
return plugins.loaded[name];};Interface.define=function(name,fn){Interface.plugins[name]={'name':name,'fn':fn};};};var utils={isArray:Array.isArray||function(vArg){return Object.prototype.toString.call(vArg)==='[object Array]';}};return MicroPlugin;}));(function(root,factory){if(typeof define==='function'&&define.amd){define('selectize',['jquery','sifter','microplugin'],factory);}else{root.Selectize=factory(root.jQuery,root.Sifter,root.MicroPlugin);}}(this,function($,Sifter,MicroPlugin){'use strict';var highlight=function($element,pattern){if(typeof pattern==='string'&&!pattern.length)return;var regex=(typeof pattern==='string')?new RegExp(pattern,'i'):pattern;var highlight=function(node){var skip=0;if(node.nodeType===3){var pos=node.data.search(regex);if(pos>=0&&node.data.length>0){var match=node.data.match(regex);var spannode=document.createElement('span');spannode.className='highlight';var middlebit=node.splitText(pos);var endbit=middlebit.splitText(match[0].length);var middleclone=middlebit.cloneNode(true);spannode.appendChild(middleclone);middlebit.parentNode.replaceChild(spannode,middlebit);skip=1;}}else if(node.nodeType===1&&node.childNodes&&!/(script|style)/i.test(node.tagName)){for(var i=0;i<node.childNodes.length;++i){i+=highlight(node.childNodes[i]);}}
return skip;};return $element.each(function(){highlight(this);});};var MicroEvent=function(){};MicroEvent.prototype={on:function(event,fct){this._events=this._events||{};this._events[event]=this._events[event]||[];this._events[event].push(fct);},off:function(event,fct){var n=arguments.length;if(n===0)return delete this._events;if(n===1)return delete this._events[event];this._events=this._events||{};if(event in this._events===false)return;this._events[event].splice(this._events[event].indexOf(fct),1);},trigger:function(event){this._events=this._events||{};if(event in this._events===false)return;for(var i=0;i<this._events[event].length;i++){this._events[event][i].apply(this,Array.prototype.slice.call(arguments,1));}}};MicroEvent.mixin=function(destObject){var props=['on','off','trigger'];for(var i=0;i<props.length;i++){destObject.prototype[props[i]]=MicroEvent.prototype[props[i]];}};var IS_MAC=/Mac/.test(navigator.userAgent);var KEY_A=65;var KEY_COMMA=188;var KEY_RETURN=13;var KEY_ESC=27;var KEY_LEFT=37;var KEY_UP=38;var KEY_RIGHT=39;var KEY_DOWN=40;var KEY_BACKSPACE=8;var KEY_DELETE=46;var KEY_SHIFT=16;var KEY_CMD=IS_MAC?91:17;var KEY_CTRL=IS_MAC?18:17;var KEY_TAB=9;var TAG_SELECT=1;var TAG_INPUT=2;var isset=function(object){return typeof object!=='undefined';};var hash_key=function(value){if(typeof value==='undefined'||value===null)return'';if(typeof value==='boolean')return value?'1':'0';return value+'';};var escape_html=function(str){return(str+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');};var escape_replace=function(str){return(str+'').replace(/\$/g,'$$$$');};var hook={};hook.before=function(self,method,fn){var original=self[method];self[method]=function(){fn.apply(self,arguments);return original.apply(self,arguments);};};hook.after=function(self,method,fn){var original=self[method];self[method]=function(){var result=original.apply(self,arguments);fn.apply(self,arguments);return result;};};var build_hash_table=function(key,objects){if(!$.isArray(objects))return objects;var i,n,table={};for(i=0,n=objects.length;i<n;i++){if(objects[i].hasOwnProperty(key)){table[objects[i][key]]=objects[i];}}
return table;};var once=function(fn){var called=false;return function(){if(called)return;called=true;fn.apply(this,arguments);};};var debounce=function(fn,delay){var timeout;return function(){var self=this;var args=arguments;window.clearTimeout(timeout);timeout=window.setTimeout(function(){fn.apply(self,args);},delay);};};var debounce_events=function(self,types,fn){var type;var trigger=self.trigger;var event_args={};self.trigger=function(){var type=arguments[0];if(types.indexOf(type)!==-1){event_args[type]=arguments;}else{return trigger.apply(self,arguments);}};fn.apply(self,[]);self.trigger=trigger;for(type in event_args){if(event_args.hasOwnProperty(type)){trigger.apply(self,event_args[type]);}}};var watchChildEvent=function($parent,event,selector,fn){$parent.on(event,selector,function(e){var child=e.target;while(child&&child.parentNode!==$parent[0]){child=child.parentNode;}
e.currentTarget=child;return fn.apply(this,[e]);});};var getSelection=function(input){var result={};if('selectionStart'in input){result.start=input.selectionStart;result.length=input.selectionEnd-result.start;}else if(document.selection){input.focus();var sel=document.selection.createRange();var selLen=document.selection.createRange().text.length;sel.moveStart('character',-input.value.length);result.start=sel.text.length-selLen;result.length=selLen;}
return result;};var transferStyles=function($from,$to,properties){var i,n,styles={};if(properties){for(i=0,n=properties.length;i<n;i++){styles[properties[i]]=$from.css(properties[i]);}}else{styles=$from.css();}
$to.css(styles);};var measureString=function(str,$parent){var $test=$('<test>').css({position:'absolute',top:-99999,left:-99999,width:'auto',padding:0,whiteSpace:'pre'}).text(str).appendTo('body');transferStyles($parent,$test,['letterSpacing','fontSize','fontFamily','fontWeight','textTransform']);var width=$test.width();$test.remove();return width;};var autoGrow=function($input){var update=function(e){var value,keyCode,printable,placeholder,width;var shift,character,selection;e=e||window.event||{};if(e.metaKey||e.altKey)return;if($input.data('grow')===false)return;value=$input.val();if(e.type&&e.type.toLowerCase()==='keydown'){keyCode=e.keyCode;printable=((keyCode>=97&&keyCode<=122)||(keyCode>=65&&keyCode<=90)||(keyCode>=48&&keyCode<=57)||keyCode===32);if(keyCode===KEY_DELETE||keyCode===KEY_BACKSPACE){selection=getSelection($input[0]);if(selection.length){value=value.substring(0,selection.start)+value.substring(selection.start+selection.length);}else if(keyCode===KEY_BACKSPACE&&selection.start){value=value.substring(0,selection.start-1)+value.substring(selection.start+1);}else if(keyCode===KEY_DELETE&&typeof selection.start!=='undefined'){value=value.substring(0,selection.start)+value.substring(selection.start+1);}}else if(printable){shift=e.shiftKey;character=String.fromCharCode(e.keyCode);if(shift)character=character.toUpperCase();else character=character.toLowerCase();value+=character;}}
placeholder=$input.attr('placeholder')||'';if(!value.length&&placeholder.length){value=placeholder;}
width=measureString(value,$input)+4;if(width!==$input.width()){$input.width(width);$input.triggerHandler('resize');}};$input.on('keydown keyup update blur',update);update();};var Selectize=function($input,settings){var key,i,n,dir,input,self=this;input=$input[0];input.selectize=self;dir=window.getComputedStyle?window.getComputedStyle(input,null).getPropertyValue('direction'):input.currentStyle&&input.currentStyle.direction;dir=dir||$input.parents('[dir]:first').attr('dir')||'';$.extend(self,{settings:settings,$input:$input,tagType:input.tagName.toLowerCase()==='select'?TAG_SELECT:TAG_INPUT,rtl:/rtl/i.test(dir),eventNS:'.selectize'+(++Selectize.count),highlightedValue:null,isOpen:false,isDisabled:false,isRequired:$input.is('[required]'),isInvalid:false,isLocked:false,isFocused:false,isInputHidden:false,isSetup:false,isShiftDown:false,isCmdDown:false,isCtrlDown:false,ignoreFocus:false,ignoreHover:false,ignoreBlur:false,hasOptions:false,currentResults:null,lastValue:'',caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:debounce(self.onSearchChange,settings.loadThrottle)});self.sifter=new Sifter(this.options,{diacritics:settings.diacritics});$.extend(self.options,build_hash_table(settings.valueField,settings.options));delete self.settings.options;$.extend(self.optgroups,build_hash_table(settings.optgroupValueField,settings.optgroups));delete self.settings.optgroups;self.settings.mode=self.settings.mode||(self.settings.maxItems===1?'single':'multi');if(typeof self.settings.hideSelected!=='boolean'){self.settings.hideSelected=self.settings.mode==='multi';}
self.initializePlugins(self.settings.plugins);self.setupCallbacks();self.setupTemplates();self.setup();};MicroEvent.mixin(Selectize);MicroPlugin.mixin(Selectize);$.extend(Selectize.prototype,{setup:function(){var self=this;var settings=self.settings;var eventNS=self.eventNS;var $window=$(window);var $document=$(document);var $wrapper;var $control;var $control_input;var $dropdown;var $dropdown_content;var $dropdown_parent;var inputMode;var timeout_blur;var timeout_focus;var tab_index;var classes;var classes_plugins;inputMode=self.settings.mode;tab_index=self.$input.attr('tabindex')||'';classes=self.$input.attr('class')||'';$wrapper=$('<div>').addClass(settings.wrapperClass).addClass(classes).addClass(inputMode);$control=$('<div>').addClass(settings.inputClass).addClass('items').appendTo($wrapper);$control_input=$('<input type="text" autocomplete="off">').appendTo($control).attr('tabindex',tab_index);$dropdown_parent=$(settings.dropdownParent||$wrapper);$dropdown=$('<div>').addClass(settings.dropdownClass).addClass(classes).addClass(inputMode).hide().appendTo($dropdown_parent);$dropdown_content=$('<div>').addClass(settings.dropdownContentClass).appendTo($dropdown);$wrapper.css({width:self.$input[0].style.width});if(self.plugins.names.length){classes_plugins='plugin-'+self.plugins.names.join(' plugin-');$wrapper.addClass(classes_plugins);$dropdown.addClass(classes_plugins);}
if((settings.maxItems===null||settings.maxItems>1)&&self.tagType===TAG_SELECT){self.$input.attr('multiple','multiple');}
if(self.settings.placeholder){$control_input.attr('placeholder',settings.placeholder);}
self.$wrapper=$wrapper;self.$control=$control;self.$control_input=$control_input;self.$dropdown=$dropdown;self.$dropdown_content=$dropdown_content;$dropdown.on('mouseenter','[data-selectable]',function(){return self.onOptionHover.apply(self,arguments);});$dropdown.on('mousedown','[data-selectable]',function(){return self.onOptionSelect.apply(self,arguments);});watchChildEvent($control,'mousedown','*:not(input)',function(){return self.onItemSelect.apply(self,arguments);});autoGrow($control_input);$control.on({mousedown:function(){return self.onMouseDown.apply(self,arguments);},click:function(){return self.onClick.apply(self,arguments);}});$control_input.on({mousedown:function(e){e.stopPropagation();},keydown:function(){return self.onKeyDown.apply(self,arguments);},keyup:function(){return self.onKeyUp.apply(self,arguments);},keypress:function(){return self.onKeyPress.apply(self,arguments);},resize:function(){self.positionDropdown.apply(self,[]);},blur:function(){return self.onBlur.apply(self,arguments);},focus:function(){self.ignoreBlur=false;return self.onFocus.apply(self,arguments);}});$document.on('keydown'+eventNS,function(e){self.isCmdDown=e[IS_MAC?'metaKey':'ctrlKey'];self.isCtrlDown=e[IS_MAC?'altKey':'ctrlKey'];self.isShiftDown=e.shiftKey;});$document.on('keyup'+eventNS,function(e){if(e.keyCode===KEY_CTRL)self.isCtrlDown=false;if(e.keyCode===KEY_SHIFT)self.isShiftDown=false;if(e.keyCode===KEY_CMD)self.isCmdDown=false;});$document.on('mousedown'+eventNS,function(e){if(self.isFocused){if(e.target===self.$dropdown[0]||e.target.parentNode===self.$dropdown[0]){return false;}
if(!self.$control.has(e.target).length&&e.target!==self.$control[0]){self.blur();}}});$window.on(['scroll'+eventNS,'resize'+eventNS].join(' '),function(){if(self.isOpen){self.positionDropdown.apply(self,arguments);}});$window.on('mousemove'+eventNS,function(){self.ignoreHover=false;});this.revertSettings={$children:self.$input.children().detach(),tabindex:self.$input.attr('tabindex')};self.$input.attr('tabindex',-1).hide().after(self.$wrapper);if($.isArray(settings.items)){self.setValue(settings.items);delete settings.items;}
if(self.$input[0].validity){self.$input.on('invalid'+eventNS,function(e){e.preventDefault();self.isInvalid=true;self.refreshState();});}
self.updateOriginalInput();self.refreshItems();self.refreshState();self.updatePlaceholder();self.isSetup=true;if(self.$input.is(':disabled')){self.disable();}
self.on('change',this.onChange);self.trigger('initialize');if(settings.preload){self.onSearchChange('');}},setupTemplates:function(){var self=this;var field_label=self.settings.labelField;var field_optgroup=self.settings.optgroupLabelField;var templates={'optgroup':function(data){return'<div class="optgroup">'+data.html+'</div>';},'optgroup_header':function(data,escape){return'<div class="optgroup-header">'+escape(data[field_optgroup])+'</div>';},'option':function(data,escape){return'<div class="option">'+escape(data[field_label])+'</div>';},'item':function(data,escape){return'<div class="item">'+escape(data[field_label])+'</div>';},'option_create':function(data,escape){return'<div class="create">Add <strong>'+escape(data.input)+'</strong>&hellip;</div>';}};self.settings.render=$.extend({},templates,self.settings.render);},setupCallbacks:function(){var key,fn,callbacks={'initialize':'onInitialize','change':'onChange','item_add':'onItemAdd','item_remove':'onItemRemove','clear':'onClear','option_add':'onOptionAdd','option_remove':'onOptionRemove','option_clear':'onOptionClear','dropdown_open':'onDropdownOpen','dropdown_close':'onDropdownClose','type':'onType'};for(key in callbacks){if(callbacks.hasOwnProperty(key)){fn=this.settings[callbacks[key]];if(fn)this.on(key,fn);}}},onClick:function(e){var self=this;if(!self.isFocused){self.focus();e.preventDefault();}},onMouseDown:function(e){var self=this;var defaultPrevented=e.isDefaultPrevented();var $target=$(e.target);if(self.isFocused){if(e.target!==self.$control_input[0]){if(self.settings.mode==='single'){self.isOpen?self.close():self.open();}else if(!defaultPrevented){self.setActiveItem(null);}
return false;}}else{if(!defaultPrevented){window.setTimeout(function(){self.focus();},0);}}},onChange:function(){this.$input.trigger('change');},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var character=String.fromCharCode(e.keyCode||e.which);if(this.settings.create&&character===this.settings.delimiter){this.createItem();e.preventDefault();return false;}},onKeyDown:function(e){var isInput=e.target===this.$control_input[0];var self=this;if(self.isLocked){if(e.keyCode!==KEY_TAB){e.preventDefault();}
return;}
switch(e.keyCode){case KEY_A:if(self.isCmdDown){self.selectAll();return;}
break;case KEY_ESC:self.close();return;case KEY_DOWN:if(!self.isOpen&&self.hasOptions){self.open();}else if(self.$activeOption){self.ignoreHover=true;var $next=self.getAdjacentOption(self.$activeOption,1);if($next.length)self.setActiveOption($next,true,true);}
e.preventDefault();return;case KEY_UP:if(self.$activeOption){self.ignoreHover=true;var $prev=self.getAdjacentOption(self.$activeOption,-1);if($prev.length)self.setActiveOption($prev,true,true);}
e.preventDefault();return;case KEY_RETURN:if(self.isOpen&&self.$activeOption){self.onOptionSelect({currentTarget:self.$activeOption});}
e.preventDefault();return;case KEY_LEFT:self.advanceSelection(-1,e);return;case KEY_RIGHT:self.advanceSelection(1,e);return;case KEY_TAB:if(self.settings.create&&self.createItem()){e.preventDefault();}
return;case KEY_BACKSPACE:case KEY_DELETE:self.deleteSelection(e);return;}
if(self.isFull()||self.isInputHidden){e.preventDefault();return;}},onKeyUp:function(e){var self=this;if(self.isLocked)return e&&e.preventDefault();var value=self.$control_input.val()||'';if(self.lastValue!==value){self.lastValue=value;self.onSearchChange(value);self.refreshOptions();self.trigger('type',value);}},onSearchChange:function(value){var self=this;var fn=self.settings.load;if(!fn)return;if(self.loadedSearches.hasOwnProperty(value))return;self.loadedSearches[value]=true;self.load(function(callback){fn.apply(self,[value,callback]);});},onFocus:function(e){var self=this;self.isFocused=true;if(self.isDisabled){self.blur();e&&e.preventDefault();return false;}
if(self.ignoreFocus)return;if(self.settings.preload==='focus')self.onSearchChange('');if(!self.$activeItems.length){self.showInput();self.setActiveItem(null);self.refreshOptions(!!self.settings.openOnFocus);}
self.refreshState();},onBlur:function(e){var self=this;self.isFocused=false;if(self.ignoreFocus)return;if(!self.ignoreBlur&&document.activeElement===self.$dropdown_content[0]){self.ignoreBlur=true;self.onFocus(e);return;}
if(self.settings.create&&self.settings.createOnBlur){self.createItem();}
self.close();self.setTextboxValue('');self.setActiveItem(null);self.setActiveOption(null);self.setCaret(self.items.length);self.refreshState();},onOptionHover:function(e){if(this.ignoreHover)return;this.setActiveOption(e.currentTarget,false);},onOptionSelect:function(e){var value,$target,$option,self=this;if(e.preventDefault){e.preventDefault();e.stopPropagation();}
$target=$(e.currentTarget);if($target.hasClass('create')){self.createItem();}else{value=$target.attr('data-value');if(value){self.lastQuery=null;self.setTextboxValue('');self.addItem(value);if(!self.settings.hideSelected&&e.type&&/mouse/.test(e.type)){self.setActiveOption(self.getOption(value));}}}},onItemSelect:function(e){var self=this;if(self.isLocked)return;if(self.settings.mode==='multi'){e.preventDefault();self.setActiveItem(e.currentTarget,e);}},load:function(fn){var self=this;var $wrapper=self.$wrapper.addClass('loading');self.loading++;fn.apply(self,[function(results){self.loading=Math.max(self.loading-1,0);if(results&&results.length){self.addOption(results);self.refreshOptions(self.isFocused&&!self.isInputHidden);}
if(!self.loading){$wrapper.removeClass('loading');}
self.trigger('load',results);}]);},setTextboxValue:function(value){this.$control_input.val(value).triggerHandler('update');this.lastValue=value;},getValue:function(){if(this.tagType===TAG_SELECT&&this.$input.attr('multiple')){return this.items;}else{return this.items.join(this.settings.delimiter);}},setValue:function(value){debounce_events(this,['change'],function(){this.clear();var items=$.isArray(value)?value:[value];for(var i=0,n=items.length;i<n;i++){this.addItem(items[i]);}});},setActiveItem:function($item,e){var self=this;var eventName;var i,idx,begin,end,item,swap;var $last;if(self.settings.mode==='single')return;$item=$($item);if(!$item.length){$(self.$activeItems).removeClass('active');self.$activeItems=[];if(self.isFocused){self.showInput();}
return;}
eventName=e&&e.type.toLowerCase();if(eventName==='mousedown'&&self.isShiftDown&&self.$activeItems.length){$last=self.$control.children('.active:last');begin=Array.prototype.indexOf.apply(self.$control[0].childNodes,[$last[0]]);end=Array.prototype.indexOf.apply(self.$control[0].childNodes,[$item[0]]);if(begin>end){swap=begin;begin=end;end=swap;}
for(i=begin;i<=end;i++){item=self.$control[0].childNodes[i];if(self.$activeItems.indexOf(item)===-1){$(item).addClass('active');self.$activeItems.push(item);}}
e.preventDefault();}else if((eventName==='mousedown'&&self.isCtrlDown)||(eventName==='keydown'&&this.isShiftDown)){if($item.hasClass('active')){idx=self.$activeItems.indexOf($item[0]);self.$activeItems.splice(idx,1);$item.removeClass('active');}else{self.$activeItems.push($item.addClass('active')[0]);}}else{$(self.$activeItems).removeClass('active');self.$activeItems=[$item.addClass('active')[0]];}
self.hideInput();if(!this.isFocused){self.focus();}},setActiveOption:function($option,scroll,animate){var height_menu,height_item,y;var scroll_top,scroll_bottom;var self=this;if(self.$activeOption)self.$activeOption.removeClass('active');self.$activeOption=null;$option=$($option);if(!$option.length)return;self.$activeOption=$option.addClass('active');if(scroll||!isset(scroll)){height_menu=self.$dropdown_content.height();height_item=self.$activeOption.outerHeight(true);scroll=self.$dropdown_content.scrollTop()||0;y=self.$activeOption.offset().top-self.$dropdown_content.offset().top+scroll;scroll_top=y;scroll_bottom=y-height_menu+height_item;if(y+height_item>height_menu+scroll){self.$dropdown_content.stop().animate({scrollTop:scroll_bottom},animate?self.settings.scrollDuration:0);}else if(y<scroll){self.$dropdown_content.stop().animate({scrollTop:scroll_top},animate?self.settings.scrollDuration:0);}}},selectAll:function(){var self=this;if(self.settings.mode==='single')return;self.$activeItems=Array.prototype.slice.apply(self.$control.children(':not(input)').addClass('active'));if(self.$activeItems.length){self.hideInput();self.close();}
self.focus();},hideInput:function(){var self=this;self.setTextboxValue('');self.$control_input.css({opacity:0,position:'absolute',left:self.rtl?10000:-10000});self.isInputHidden=true;},showInput:function(){this.$control_input.css({opacity:1,position:'relative',left:0});this.isInputHidden=false;},focus:function(){var self=this;if(self.isDisabled)return;self.ignoreFocus=true;self.$control_input[0].focus();window.setTimeout(function(){self.ignoreFocus=false;self.onFocus();},0);},blur:function(){this.$control_input.trigger('blur');},getScoreFunction:function(query){return this.sifter.getScoreFunction(query,this.getSearchOptions());},getSearchOptions:function(){var settings=this.settings;var sort=settings.sortField;if(typeof sort==='string'){sort={field:sort};}
return{fields:settings.searchField,conjunction:settings.searchConjunction,sort:sort};},search:function(query){var i,value,score,result,calculateScore;var self=this;var settings=self.settings;var options=this.getSearchOptions();if(settings.score){calculateScore=self.settings.score.apply(this,[query]);if(typeof calculateScore!=='function'){throw new Error('Selectize "score" setting must be a function that returns a function');}}
if(query!==self.lastQuery){self.lastQuery=query;result=self.sifter.search(query,$.extend(options,{score:calculateScore}));self.currentResults=result;}else{result=$.extend(true,{},self.currentResults);}
if(settings.hideSelected){for(i=result.items.length-1;i>=0;i--){if(self.items.indexOf(hash_key(result.items[i].id))!==-1){result.items.splice(i,1);}}}
return result;},refreshOptions:function(triggerDropdown){var i,j,k,n,groups,groups_order,option,option_html,optgroup,optgroups,html,html_children,has_create_option;var $active,$active_before,$create;if(typeof triggerDropdown==='undefined'){triggerDropdown=true;}
var self=this;var query=self.$control_input.val();var results=self.search(query);var $dropdown_content=self.$dropdown_content;var active_before=self.$activeOption&&hash_key(self.$activeOption.attr('data-value'));n=results.items.length;if(typeof self.settings.maxOptions==='number'){n=Math.min(n,self.settings.maxOptions);}
groups={};if(self.settings.optgroupOrder){groups_order=self.settings.optgroupOrder;for(i=0;i<groups_order.length;i++){groups[groups_order[i]]=[];}}else{groups_order=[];}
for(i=0;i<n;i++){option=self.options[results.items[i].id];option_html=self.render('option',option);optgroup=option[self.settings.optgroupField]||'';optgroups=$.isArray(optgroup)?optgroup:[optgroup];for(j=0,k=optgroups&&optgroups.length;j<k;j++){optgroup=optgroups[j];if(!self.optgroups.hasOwnProperty(optgroup)){optgroup='';}
if(!groups.hasOwnProperty(optgroup)){groups[optgroup]=[];groups_order.push(optgroup);}
groups[optgroup].push(option_html);}}
html=[];for(i=0,n=groups_order.length;i<n;i++){optgroup=groups_order[i];if(self.optgroups.hasOwnProperty(optgroup)&&groups[optgroup].length){html_children=self.render('optgroup_header',self.optgroups[optgroup])||'';html_children+=groups[optgroup].join('');html.push(self.render('optgroup',$.extend({},self.optgroups[optgroup],{html:html_children})));}else{html.push(groups[optgroup].join(''));}}
$dropdown_content.html(html.join(''));if(self.settings.highlight&&results.query.length&&results.tokens.length){for(i=0,n=results.tokens.length;i<n;i++){highlight($dropdown_content,results.tokens[i].regex);}}
if(!self.settings.hideSelected){for(i=0,n=self.items.length;i<n;i++){self.getOption(self.items[i]).addClass('selected');}}
has_create_option=self.settings.create&&results.query.length;if(has_create_option){$dropdown_content.prepend(self.render('option_create',{input:query}));$create=$($dropdown_content[0].childNodes[0]);}
self.hasOptions=results.items.length>0||has_create_option;if(self.hasOptions){if(results.items.length>0){$active_before=active_before&&self.getOption(active_before);if($active_before&&$active_before.length){$active=$active_before;}else if(self.settings.mode==='single'&&self.items.length){$active=self.getOption(self.items[0]);}
if(!$active||!$active.length){if($create&&!self.settings.addPrecedence){$active=self.getAdjacentOption($create,1);}else{$active=$dropdown_content.find('[data-selectable]:first');}}}else{$active=$create;}
self.setActiveOption($active);if(triggerDropdown&&!self.isOpen){self.open();}}else{self.setActiveOption(null);if(triggerDropdown&&self.isOpen){self.close();}}},addOption:function(data){var i,n,optgroup,value,self=this;if($.isArray(data)){for(i=0,n=data.length;i<n;i++){self.addOption(data[i]);}
return;}
value=hash_key(data[self.settings.valueField]);if(!value||self.options.hasOwnProperty(value))return;self.userOptions[value]=true;self.options[value]=data;self.lastQuery=null;self.trigger('option_add',value,data);},addOptionGroup:function(id,data){this.optgroups[id]=data;this.trigger('optgroup_add',id,data);},updateOption:function(value,data){var self=this;var $item,$item_new;var value_new,index_item,cache_items,cache_options;value=hash_key(value);value_new=hash_key(data[self.settings.valueField]);if(!self.options.hasOwnProperty(value))return;if(!value_new)throw new Error('Value must be set in option data');if(value_new!==value){delete self.options[value];index_item=self.items.indexOf(value);if(index_item!==-1){self.items.splice(index_item,1,value_new);}}
self.options[value_new]=data;cache_items=self.renderCache['item'];cache_options=self.renderCache['option'];if(isset(cache_items)){delete cache_items[value];delete cache_items[value_new];}
if(isset(cache_options)){delete cache_options[value];delete cache_options[value_new];}
if(self.items.indexOf(value_new)!==-1){$item=self.getItem(value);$item_new=$(self.render('item',data));if($item.hasClass('active'))$item_new.addClass('active');$item.replaceWith($item_new);}
if(self.isOpen){self.refreshOptions(false);}},removeOption:function(value){var self=this;value=hash_key(value);delete self.userOptions[value];delete self.options[value];self.lastQuery=null;self.trigger('option_remove',value);self.removeItem(value);},clearOptions:function(){var self=this;self.loadedSearches={};self.userOptions={};self.options=self.sifter.items={};self.lastQuery=null;self.trigger('option_clear');self.clear();},getOption:function(value){return this.getElementWithValue(value,this.$dropdown_content.find('[data-selectable]'));},getAdjacentOption:function($option,direction){var $options=this.$dropdown.find('[data-selectable]');var index=$options.index($option)+direction;return index>=0&&index<$options.length?$options.eq(index):$();},getElementWithValue:function(value,$els){value=hash_key(value);if(value){for(var i=0,n=$els.length;i<n;i++){if($els[i].getAttribute('data-value')===value){return $($els[i]);}}}
return $();},getItem:function(value){return this.getElementWithValue(value,this.$control.children());},addItem:function(value){debounce_events(this,['change'],function(){var $item,$option;var self=this;var inputMode=self.settings.mode;var i,active,options,value_next;value=hash_key(value);if(self.items.indexOf(value)!==-1){if(inputMode==='single')self.close();return;}
if(!self.options.hasOwnProperty(value))return;if(inputMode==='single')self.clear();if(inputMode==='multi'&&self.isFull())return;$item=$(self.render('item',self.options[value]));self.items.splice(self.caretPos,0,value);self.insertAtCaret($item);self.refreshState();if(self.isSetup){options=self.$dropdown_content.find('[data-selectable]');$option=self.getOption(value);value_next=self.getAdjacentOption($option,1).attr('data-value');self.refreshOptions(self.isFocused&&inputMode!=='single');if(value_next){self.setActiveOption(self.getOption(value_next));}
if(!options.length||(self.settings.maxItems!==null&&self.items.length>=self.settings.maxItems)){self.close();}else{self.positionDropdown();}
self.updatePlaceholder();self.trigger('item_add',value,$item);self.updateOriginalInput();}});},removeItem:function(value){var self=this;var $item,i,idx;$item=(typeof value==='object')?value:self.getItem(value);value=hash_key($item.attr('data-value'));i=self.items.indexOf(value);if(i!==-1){$item.remove();if($item.hasClass('active')){idx=self.$activeItems.indexOf($item[0]);self.$activeItems.splice(idx,1);}
self.items.splice(i,1);self.lastQuery=null;if(!self.settings.persist&&self.userOptions.hasOwnProperty(value)){self.removeOption(value);}
if(i<self.caretPos){self.setCaret(self.caretPos-1);}
self.refreshState();self.updatePlaceholder();self.updateOriginalInput();self.positionDropdown();self.trigger('item_remove',value);}},createItem:function(){var self=this;var input=$.trim(self.$control_input.val()||'');var caret=self.caretPos;if(!input.length)return false;self.lock();var setup=(typeof self.settings.create==='function')?this.settings.create:function(input){var data={};data[self.settings.labelField]=input;data[self.settings.valueField]=input;return data;};var create=once(function(data){self.unlock();if(!data||typeof data!=='object')return;var value=hash_key(data[self.settings.valueField]);if(!value)return;self.setTextboxValue('');self.addOption(data);self.setCaret(caret);self.addItem(value);self.refreshOptions(self.settings.mode!=='single');});var output=setup.apply(this,[input,create]);if(typeof output!=='undefined'){create(output);}
return true;},refreshItems:function(){this.lastQuery=null;if(this.isSetup){for(var i=0;i<this.items.length;i++){this.addItem(this.items);}}
this.refreshState();this.updateOriginalInput();},refreshState:function(){var self=this;var invalid=self.isRequired&&!self.items.length;if(!invalid)self.isInvalid=false;self.$control_input.prop('required',invalid);self.refreshClasses();},refreshClasses:function(){var self=this;var isFull=self.isFull();var isLocked=self.isLocked;self.$wrapper.toggleClass('rtl',self.rtl);self.$control.toggleClass('focus',self.isFocused).toggleClass('disabled',self.isDisabled).toggleClass('required',self.isRequired).toggleClass('invalid',self.isInvalid).toggleClass('locked',isLocked).toggleClass('full',isFull).toggleClass('not-full',!isFull).toggleClass('input-active',self.isFocused&&!self.isInputHidden).toggleClass('dropdown-active',self.isOpen).toggleClass('has-options',!$.isEmptyObject(self.options)).toggleClass('has-items',self.items.length>0);self.$control_input.data('grow',!isFull&&!isLocked);},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems;},updateOriginalInput:function(){var i,n,options,self=this;if(self.$input[0].tagName.toLowerCase()==='select'){options=[];for(i=0,n=self.items.length;i<n;i++){options.push('<option value="'+escape_html(self.items[i])+'" selected="selected"></option>');}
if(!options.length&&!this.$input.attr('multiple')){options.push('<option value="" selected="selected"></option>');}
self.$input.html(options.join(''));}else{self.$input.val(self.getValue());}
if(self.isSetup){self.trigger('change',self.$input.val());}},updatePlaceholder:function(){if(!this.settings.placeholder)return;var $input=this.$control_input;if(this.items.length){$input.removeAttr('placeholder');}else{$input.attr('placeholder',this.settings.placeholder);}
$input.triggerHandler('update');},open:function(){var self=this;if(self.isLocked||self.isOpen||(self.settings.mode==='multi'&&self.isFull()))return;self.focus();self.isOpen=true;self.refreshState();self.$dropdown.css({visibility:'hidden',display:'block'});self.positionDropdown();self.$dropdown.css({visibility:'visible'});self.trigger('dropdown_open',self.$dropdown);},close:function(){var self=this;var trigger=self.isOpen;if(self.settings.mode==='single'&&self.items.length){self.hideInput();}
self.isOpen=false;self.$dropdown.hide();self.setActiveOption(null);self.refreshState();if(trigger)self.trigger('dropdown_close',self.$dropdown);},positionDropdown:function(){var $control=this.$control;var offset=this.settings.dropdownParent==='body'?$control.offset():$control.position();offset.top+=$control.outerHeight(true);this.$dropdown.css({width:$control.outerWidth(),top:offset.top,left:offset.left});},clear:function(){var self=this;if(!self.items.length)return;self.$control.children(':not(input)').remove();self.items=[];self.setCaret(0);self.updatePlaceholder();self.updateOriginalInput();self.refreshState();self.showInput();self.trigger('clear');},insertAtCaret:function($el){var caret=Math.min(this.caretPos,this.items.length);if(caret===0){this.$control.prepend($el);}else{$(this.$control[0].childNodes[caret]).before($el);}
this.setCaret(caret+1);},deleteSelection:function(e){var i,n,direction,selection,values,caret,option_select,$option_select,$tail;var self=this;direction=(e&&e.keyCode===KEY_BACKSPACE)?-1:1;selection=getSelection(self.$control_input[0]);if(self.$activeOption&&!self.settings.hideSelected){option_select=self.getAdjacentOption(self.$activeOption,-1).attr('data-value');}
values=[];if(self.$activeItems.length){$tail=self.$control.children('.active:'+(direction>0?'last':'first'));caret=self.$control.children(':not(input)').index($tail);if(direction>0){caret++;}
for(i=0,n=self.$activeItems.length;i<n;i++){values.push($(self.$activeItems[i]).attr('data-value'));}
if(e){e.preventDefault();e.stopPropagation();}}else if((self.isFocused||self.settings.mode==='single')&&self.items.length){if(direction<0&&selection.start===0&&selection.length===0){values.push(self.items[self.caretPos-1]);}else if(direction>0&&selection.start===self.$control_input.val().length){values.push(self.items[self.caretPos]);}}
if(!values.length||(typeof self.settings.onDelete==='function'&&self.settings.onDelete.apply(self,[values])===false)){return false;}
if(typeof caret!=='undefined'){self.setCaret(caret);}
while(values.length){self.removeItem(values.pop());}
self.showInput();self.positionDropdown();self.refreshOptions(true);if(option_select){$option_select=self.getOption(option_select);if($option_select.length){self.setActiveOption($option_select);}}
return true;},advanceSelection:function(direction,e){var tail,selection,idx,valueLength,cursorAtEdge,$tail;var self=this;if(direction===0)return;if(self.rtl)direction*=-1;tail=direction>0?'last':'first';selection=getSelection(self.$control_input[0]);if(self.isFocused&&!self.isInputHidden){valueLength=self.$control_input.val().length;cursorAtEdge=direction<0?selection.start===0&&selection.length===0:selection.start===valueLength;if(cursorAtEdge&&!valueLength){self.advanceCaret(direction,e);}}else{$tail=self.$control.children('.active:'+tail);if($tail.length){idx=self.$control.children(':not(input)').index($tail);self.setActiveItem(null);self.setCaret(direction>0?idx+1:idx);}}},advanceCaret:function(direction,e){var self=this,fn,$adj;if(direction===0)return;fn=direction>0?'next':'prev';if(self.isShiftDown){$adj=self.$control_input[fn]();if($adj.length){self.hideInput();self.setActiveItem($adj);e&&e.preventDefault();}}else{self.setCaret(self.caretPos+direction);}},setCaret:function(i){var self=this;if(self.settings.mode==='single'){i=self.items.length;}else{i=Math.max(0,Math.min(self.items.length,i));}
var j,n,fn,$children,$child;$children=self.$control.children(':not(input)');for(j=0,n=$children.length;j<n;j++){$child=$($children[j]).detach();if(j<i){self.$control_input.before($child);}else{self.$control.append($child);}}
self.caretPos=i;},lock:function(){this.close();this.isLocked=true;this.refreshState();},unlock:function(){this.isLocked=false;this.refreshState();},disable:function(){var self=this;self.$input.prop('disabled',true);self.isDisabled=true;self.lock();},enable:function(){var self=this;self.$input.prop('disabled',false);self.isDisabled=false;self.unlock();},destroy:function(){var self=this;var eventNS=self.eventNS;var revertSettings=self.revertSettings;self.trigger('destroy');self.off();self.$wrapper.remove();self.$dropdown.remove();self.$input.html('').append(revertSettings.$children).removeAttr('tabindex').attr({tabindex:revertSettings.tabindex}).show();$(window).off(eventNS);$(document).off(eventNS);$(document.body).off(eventNS);delete self.$input[0].selectize;},render:function(templateName,data){var value,id,label;var html='';var cache=false;var self=this;var regex_tag=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;if(templateName==='option'||templateName==='item'){value=hash_key(data[self.settings.valueField]);cache=!!value;}
if(cache){if(!isset(self.renderCache[templateName])){self.renderCache[templateName]={};}
if(self.renderCache[templateName].hasOwnProperty(value)){return self.renderCache[templateName][value];}}
html=self.settings.render[templateName].apply(this,[data,escape_html]);if(templateName==='option'||templateName==='option_create'){html=html.replace(regex_tag,'<$1 data-selectable');}
if(templateName==='optgroup'){id=data[self.settings.optgroupValueField]||'';html=html.replace(regex_tag,'<$1 data-group="'+escape_replace(escape_html(id))+'"');}
if(templateName==='option'||templateName==='item'){html=html.replace(regex_tag,'<$1 data-value="'+escape_replace(escape_html(value||''))+'"');}
if(cache){self.renderCache[templateName][value]=html;}
return html;}});Selectize.count=0;Selectize.defaults={plugins:[],delimiter:',',persist:true,diacritics:true,create:false,createOnBlur:false,highlight:true,openOnFocus:true,maxOptions:1000,maxItems:null,hideSelected:null,addPrecedence:false,preload:false,scrollDuration:60,loadThrottle:300,dataAttr:'data-data',optgroupField:'optgroup',valueField:'value',labelField:'text',optgroupLabelField:'label',optgroupValueField:'value',optgroupOrder:null,sortField:'$order',searchField:['text'],searchConjunction:'and',mode:null,wrapperClass:'selectize-control',inputClass:'selectize-input',dropdownClass:'selectize-dropdown',dropdownContentClass:'selectize-dropdown-content',dropdownParent:null,render:{}};$.fn.selectize=function(settings_user){var defaults=$.fn.selectize.defaults;var settings=$.extend({},defaults,settings_user);var attr_data=settings.dataAttr;var field_label=settings.labelField;var field_value=settings.valueField;var field_optgroup=settings.optgroupField;var field_optgroup_label=settings.optgroupLabelField;var field_optgroup_value=settings.optgroupValueField;var init_textbox=function($input,settings_element){var i,n,values,option,value=$.trim($input.val()||'');if(!value.length)return;values=value.split(settings.delimiter);for(i=0,n=values.length;i<n;i++){option={};option[field_label]=values[i];option[field_value]=values[i];settings_element.options[values[i]]=option;}
settings_element.items=values;};var init_select=function($input,settings_element){var i,n,tagName,$children,order=0;var options=settings_element.options;var readData=function($el){var data=attr_data&&$el.attr(attr_data);if(typeof data==='string'&&data.length){return JSON.parse(data);}
return null;};var addOption=function($option,group){var value,option;$option=$($option);value=$option.attr('value')||'';if(!value.length)return;if(options.hasOwnProperty(value)){if(group){if(!options[value].optgroup){options[value].optgroup=group;}else if(!$.isArray(options[value].optgroup)){options[value].optgroup=[options[value].optgroup,group];}else{options[value].optgroup.push(group);}}
return;}
option=readData($option)||{};option[field_label]=option[field_label]||$option.text();option[field_value]=option[field_value]||value;option[field_optgroup]=option[field_optgroup]||group;option.$order=++order;options[value]=option;if($option.is(':selected')){settings_element.items.push(value);}};var addGroup=function($optgroup){var i,n,id,optgroup,$options;$optgroup=$($optgroup);id=$optgroup.attr('label');if(id){optgroup=readData($optgroup)||{};optgroup[field_optgroup_label]=id;optgroup[field_optgroup_value]=id;settings_element.optgroups[id]=optgroup;}
$options=$('option',$optgroup);for(i=0,n=$options.length;i<n;i++){addOption($options[i],id);}};settings_element.maxItems=$input.attr('multiple')?null:1;$children=$input.children();for(i=0,n=$children.length;i<n;i++){tagName=$children[i].tagName.toLowerCase();if(tagName==='optgroup'){addGroup($children[i]);}else if(tagName==='option'){addOption($children[i]);}}};return this.each(function(){if(this.selectize)return;var instance;var $input=$(this);var tag_name=this.tagName.toLowerCase();var settings_element={'placeholder':$input.children('option[value=""]').text()||$input.attr('placeholder'),'options':{},'optgroups':{},'items':[]};if(tag_name==='select'){init_select($input,settings_element);}else{init_textbox($input,settings_element);}
instance=new Selectize($input,$.extend(true,{},defaults,settings_element,settings_user));$input.data('selectize',instance);$input.addClass('selectized');});};$.fn.selectize.defaults=Selectize.defaults;Selectize.define('drag_drop',function(options){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(this.settings.mode!=='multi')return;var self=this;self.lock=(function(){var original=self.lock;return function(){var sortable=self.$control.data('sortable');if(sortable)sortable.disable();return original.apply(self,arguments);};})();self.unlock=(function(){var original=self.unlock;return function(){var sortable=self.$control.data('sortable');if(sortable)sortable.enable();return original.apply(self,arguments);};})();self.setup=(function(){var original=self.setup;return function(){original.apply(this,arguments);var $control=self.$control.sortable({items:'[data-value]',forcePlaceholderSize:true,disabled:self.isLocked,start:function(e,ui){ui.placeholder.css('width',ui.helper.css('width'));$control.css({overflow:'visible'});},stop:function(){$control.css({overflow:'hidden'});var active=self.$activeItems?self.$activeItems.slice():null;var values=[];$control.children('[data-value]').each(function(){values.push($(this).attr('data-value'));});self.setValue(values);self.setActiveItem(active);}});};})();});Selectize.define('dropdown_header',function(options){var self=this;options=$.extend({title:'Untitled',headerClass:'selectize-dropdown-header',titleRowClass:'selectize-dropdown-header-title',labelClass:'selectize-dropdown-header-label',closeClass:'selectize-dropdown-header-close',html:function(data){return('<div class="'+data.headerClass+'">'+'<div class="'+data.titleRowClass+'">'+'<span class="'+data.labelClass+'">'+data.title+'</span>'+'<a href="javascript:void(0)" class="'+data.closeClass+'">&times;</a>'+'</div>'+'</div>');}},options);self.setup=(function(){var original=self.setup;return function(){original.apply(self,arguments);self.$dropdown_header=$(options.html(options));self.$dropdown.prepend(self.$dropdown_header);};})();});Selectize.define('optgroup_columns',function(options){var self=this;options=$.extend({equalizeWidth:true,equalizeHeight:true},options);this.getAdjacentOption=function($option,direction){var $options=$option.closest('[data-group]').find('[data-selectable]');var index=$options.index($option)+direction;return index>=0&&index<$options.length?$options.eq(index):$();};this.onKeyDown=(function(){var original=self.onKeyDown;return function(e){var index,$option,$options,$optgroup;if(this.isOpen&&(e.keyCode===KEY_LEFT||e.keyCode===KEY_RIGHT)){self.ignoreHover=true;$optgroup=this.$activeOption.closest('[data-group]');index=$optgroup.find('[data-selectable]').index(this.$activeOption);if(e.keyCode===KEY_LEFT){$optgroup=$optgroup.prev('[data-group]');}else{$optgroup=$optgroup.next('[data-group]');}
$options=$optgroup.find('[data-selectable]');$option=$options.eq(Math.min($options.length-1,index));if($option.length){this.setActiveOption($option);}
return;}
return original.apply(this,arguments);};})();var equalizeSizes=function(){var i,n,height_max,width,width_last,width_parent,$optgroups;$optgroups=$('[data-group]',self.$dropdown_content);n=$optgroups.length;if(!n||!self.$dropdown_content.width())return;if(options.equalizeHeight){height_max=0;for(i=0;i<n;i++){height_max=Math.max(height_max,$optgroups.eq(i).height());}
$optgroups.css({height:height_max});}
if(options.equalizeWidth){width_parent=self.$dropdown_content.innerWidth();width=Math.round(width_parent/n);$optgroups.css({width:width});if(n>1){width_last=width_parent-width*(n-1);$optgroups.eq(n-1).css({width:width_last});}}};if(options.equalizeHeight||options.equalizeWidth){hook.after(this,'positionDropdown',equalizeSizes);hook.after(this,'refreshOptions',equalizeSizes);}});Selectize.define('remove_button',function(options){if(this.settings.mode==='single')return;options=$.extend({label:'&times;',title:'Remove',className:'remove',append:true},options);var self=this;var html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+'</a>';var append=function(html_container,html_element){var pos=html_container.search(/(<\/[^>]+>\s*)$/);return html_container.substring(0,pos)+html_element+html_container.substring(pos);};this.setup=(function(){var original=self.setup;return function(){if(options.append){var render_item=self.settings.render.item;self.settings.render.item=function(data){return append(render_item.apply(this,arguments),html);};}
original.apply(this,arguments);this.$control.on('click','.'+options.className,function(e){e.preventDefault();if(self.isLocked)return;var $item=$(e.target).parent();self.setActiveItem($item);if(self.deleteSelection()){self.setCaret(self.items.length);}});};})();});Selectize.define('restore_on_backspace',function(options){var self=this;options.text=options.text||function(option){return option[this.settings.labelField];};this.onKeyDown=(function(e){var original=self.onKeyDown;return function(e){var index,option;if(e.keyCode===KEY_BACKSPACE&&this.$control_input.val()===''&&!this.$activeItems.length){index=this.caretPos-1;if(index>=0&&index<this.items.length){option=this.options[this.items[index]];if(this.deleteSelection(e)){this.setTextboxValue(options.text.apply(this,[option]));this.refreshOptions(true);}
e.preventDefault();return;}}
return original.apply(this,arguments);};})();});return Selectize;}));;
frontvpg.registerCommonHandlebarsHelpers=function(d1){Handlebars.registerHelper('dynamicPathPicture',function(format,imagePath){return frontvpg.dynamicPath(format,imagePath);});Handlebars.registerHelper('saleSchedule',function(isNext,shortVersion){if(shortVersion===undefined)shortVersion=false;if(this.browse_data!==undefined){var browse_data=this.browse_data}else{var browse_data=this.sale.browse_data}
var formatDate=browse_data.end_date;if(isNext){formatDate=browse_data.start_date;}
return frontvpg.manageSchedule(formatDate,isNext,shortVersion);});Handlebars.registerHelper('salePriceFlag',function(typeParam){if(this.browse_data){var browse_data=this.browse_data;var pctType=this.pct_alt;}
else if(this.sale&&this.sale.browse_data){var browse_data=this.sale.browse_data;var pctType=this.sale.pct_alt;}else{var browse_data=this;var pctType=this.display_type;}
priceFlagReturned=frontvpg.managePriceDisplay(browse_data,pctType);priceFlagText=null;if(typeof typeParam!=="undefined")
{priceFlagText=priceFlagReturned[typeParam];if(frontvpg.targets.mobile&&typeParam=='titleBefore'&&priceFlagText.length>0)
{title=$($.parseHTML(priceFlagReturned[typeParam]));priceFlagText=ellipsize(title.text(),9);}}
return priceFlagText;});Handlebars.registerHelper('displayTitleSale',function(){var data=this;if(this.sale!==undefined){var data=this.sale;}
var defaultTitle=data.browse_data.title;if(isAdmin&&data.active!=='published'){defaultTitle=frontvpg.adminSuffix+' '+defaultTitle;}
return defaultTitle;});Handlebars.registerHelper('displayTitle',function(){var data=this;if(this.sale!==undefined){var data=this.sale;}
var displayTitle=data.nom_pays+"&nbsp;/&nbsp;"+data.nom_ville;if(typeof data.browse_data.sb_location!=='undefined'&&data.browse_data.sb_location.enabled==true&&data.browse_data.sb_location.text!=null){displayTitle=data.browse_data.sb_location.text;}
return displayTitle;});Handlebars.registerHelper('saleUrl',function(){var url='/fiche-produit/details';var sale_id=this.id;if(this.browse_data){var browse_data=this.browse_data;}
else if(this.sale&&this.sale.browse_data){var browse_data=this.sale.browse_data;sale_id=this.sale.id;}else{var browse_data=this;}
var d2=new Date(browse_data.start_date*1000);if(d1>d2||isAdmin)
{return'href="'+url+'/'+sale_id+'"';}
return'onclick="frontvpg.clickSubscribe('+sale_id+', this)"';});Handlebars.registerHelper('recentViewSaleUrl',function(queryParameter,queryValue,hasResumeBooking){var url='/fiche-produit/details';var resumeUrl='/sale/resumeBooking';var queryString='';if(typeof hasResumeBooking!=='undefined'){return'href='+resumeUrl+'/'+this.sale_id;}
if(typeof queryParameter!=='undefined'&&typeof queryValue!=='undefined')
{queryString='?'+queryParameter+'='+encodeURIComponent(queryValue);}
return'href='+url+'/'+this.sale_id+queryString;});Handlebars.registerHelper('resumeBookingUrl',function(){var url='/sale/resumeBooking';return'href='+url+'/'+this.sale_id;});Handlebars.registerHelper('ellipse',ellipsize);function ellipsize(title,length,end_text,concat,separator){if(typeof title==='undefined'||typeof title==='object')
{title='';}
if(typeof length==='undefined'||typeof length==='object')
{length=28;}
if(typeof end_text==='undefined'||typeof end_text==='object')
{end_text='...';}
if(typeof concat==='undefined'||typeof concat==='object')
{concat='';}
if(typeof separator==='undefined'||typeof separator==='object')
{separator='/';}
if(concat.length>0)
{concatenated=title+separator+concat;}
else
{concatenated=title;}
if(concatenated.length>length)
{return concatenated.substr(0,length-3)+end_text;}
return concatenated;}
Handlebars.registerHelper('handleRibbon',function(){var response='';if(this.browse_data){var browse_data=this.browse_data;var pctType=this.pct_alt;}else if(this.sale!==undefined){var browse_data=this.sale.browse_data;var pctType=this.sale.pct_alt;}else{var browse_data=this;var pctType=this.display_type;}
var priceFlagReturned=frontvpg.managePriceDisplay(browse_data,pctType);switch(pctType)
{case'pct':var label='Jusqu\'à';response='<span id="ribbon-txt-1">'+label+'<br/></span><span id="ribbon-txt-2">'+priceFlagReturned.price+jQuery.trim(priceFlagReturned.titleAfter)+'</span>';break;case'price':priceFlagReturned.price=priceFlagReturned.price.replace('.','');var extraClass='';var priceLength=priceFlagReturned.price.length;if((priceLength>=4)&&(priceLength<6)){extraClass='medium_text';}
if(priceLength>=6){extraClass='small_text';}
var labelFirstLine='A partir de';response='<span id="ribbon-txt-1">'+labelFirstLine+'<br/></span><span  class="'+extraClass+'" id="ribbon-txt-3">'+(numeral(priceFlagReturned.price).format())+'</span>';break;case'saved up':var labelFirstLine='Réduction jusqu\'à';priceFlagReturned.price=priceFlagReturned.price.replace('.','');var price=numeral(priceFlagReturned.price).format();var priceLength=price.length;if((priceLength>=4)&&(priceLength<6)){extraClass='medium_text';}
if(priceLength>=6){extraClass='small_text';}
response='<span id="ribbon-txt-5">'+labelFirstLine+'</span><span class="'+extraClass+'" id="ribbon-txt-2">'+price+'</span>';break;default:response='<span id="ribbon-txt-4">'+priceFlagReturned.price+'</span>';break;}
return response;});};
frontvpg.registerHandlebarsHelpers=function(d1){var pushPromoIndex=[];Handlebars.registerHelper('ifOperator',function(c1,operator,c2,options){switch(operator){case'&&':return(c1&&c2)?options.fn(this):options.inverse(this);case'||':return(c1||c2)?options.fn(this):options.inverse(this);case'==':return(c1==c2)?options.fn(this):options.inverse(this);case'!=':return(c1!=c2)?options.fn(this):options.inverse(this);default:return options.inverse(this);}});Handlebars.registerHelper('saleIndex',function(index,offset){return index+offset;});Handlebars.registerHelper('modulo',function(a,b,block){return(a%b==0)?block.fn():block.inverse();});Handlebars.registerHelper('thevtSchedule',function(isNext){var formatDate=this.end_date;if(isNext){formatDate=this.start_date;}
return frontvpg.manageSchedule(formatDate,isNext);});Handlebars.registerHelper('styleImgHeightCalc',function(isNext){if(!isNext&&typeof(frontvpg.imgHeightNow)!="undefined"){return'style="height:'+frontvpg.imgHeightNow+'px"';}
if(isNext&&typeof(frontvpg.imgHeightNext)!="undefined"){return'style="height:'+frontvpg.imgHeightNext+'px"';}
return'';});Handlebars.registerHelper('killerDealSchedule',function(){var dataPath=this.object_data.browse_data;if(this.type!=="sale"){dataPath=this.object_data;}
var formatDate=dataPath.end_date;if(this.isNext){formatDate=dataPath.start_date;}
return frontvpg.manageSchedule(formatDate,this.isNext);});Handlebars.registerHelper('killerDealPriceFlag',function(typeParam){var dataPath=this.object_data.browse_data;if(this.type!=="sale"){dataPath=this.object_data;}
var browse_data=dataPath;var pctType=dataPath.display_type;var priceFlagReturned=frontvpg.managePriceDisplay(browse_data,pctType);return(typeof typeParam!=="undefined")?priceFlagReturned[typeParam]:null;});Handlebars.registerHelper('getParams',function(key){var value=(typeof key!=='undefined'&&key in frontvpg.templateParams)?frontvpg.templateParams[key]:null;if(isAdmin&&key=='btn_subscribe')
{return frontvpg.templateParams['btn_admin']}
return value;});Handlebars.registerHelper('killerDealUrl',function(){if(!this.isNext){if(this.type=='th'){type='c_th';id=this.thematique_id;if(this.object_data.type=="Event"){type='c_evt';}
return'href="/thematique/ventes'+'#filter/'+type+'='+id+'/1"';}
else{return'href="/fiche-produit/details/'+this.sale_id+'"';}}
return'';});Handlebars.registerHelper('subscribeUrl',function(){return'frontvpg.clickSubscribe('+this.id+', this)';});Handlebars.registerHelper('trailerUrl',function(){return'frontvpg.clickTrailer('+this.id+')';});Handlebars.registerHelper('pushPromoIndex',function(){if(this.isPushPromo){pushPromoIndex[this.id]=1;}
return pushPromoIndex.length;});Handlebars.registerHelper('thevtUrl',function(){var homepageUrl='/thematique/ventes';var type='c_cat';if(this.isEvent){type='c_evt';}
if(this.isThematique){type='c_th';}
return homepageUrl+'#filter/'+type+'='+this.id+'/1';});Handlebars.registerHelper('alertUrl',function(){return'/alerts';});Handlebars.registerHelper('evtEndDate',function(){return'#filter/c_evt='+this.id+'/1';});Handlebars.registerHelper('displayHotelName',function(){var hotelName='&nbsp;';if(this.active=='published'){hotelName=this.nom_hotel;}
if(hotelName.length>frontvpg.charLimitForHotelName){hotelName=hotelName.substring(0,frontvpg.charLimitForHotelName)+frontvpg.ellipseText;}
return hotelName;});Handlebars.registerHelper('renderDefaultImage',function(){return frontvpg.defaultImg;});};
frontvpg.setDedicatedTitle=function(type,value,label)
{switch(type)
{case'c_cat':$(document.getElementById('sdv-title')).html(label);var transKey='saleroom.categ.title_desc.'+value;if(categTranslations[transKey])
{$(document.getElementById('sdv-subtitle')).html(categTranslations[transKey]);}
break;case'c_th':case'c_evt':$(document.getElementById('sdv-title')).html(label);break;}}
frontvpg.initFiltersEvents=function()
{$('span[id="tooltip-theme"] ul.theme-list a').click(function()
{$(this).trigger('trackClick');if(typeof frontvpg.currentSelectize!='undefined')frontvpg.currentSelectize.clear();if($(this).hasClass('close-filter-result'))
{window.location.hash='';}else
{frontvpg.updateThemeList($(this));$(document.getElementById('theme-title')).html(frontvpg.minimizeReturnFilter($(this).html(),16,'...'));$(document.getElementById('theme-title')).closest('div.theme').addClass('active');$(document.getElementById('worldregion-title')).html('Destinations');$(document.getElementById('worldregion-title')).closest('div.region').removeClass('active');}});$('span[id="tooltip-region"] ul.worldregion-list a').click(function()
{$(this).trigger('trackClick');if(typeof frontvpg.currentSelectize!='undefined')frontvpg.currentSelectize.clear();if($(this).hasClass('close-filter-result'))
{window.location.hash='';}else
{frontvpg.updateThemeList($(this));$(document.getElementById('worldregion-title')).html(frontvpg.minimizeReturnFilter($(this).html(),16,'...'));$(document.getElementById('worldregion-title')).closest('div.region').addClass('active');$(document.getElementById('theme-title')).html('Thèmes');$(document.getElementById('theme-title')).closest('div.theme').removeClass('active');}});frontvpg.updateThemeList=function(data)
{if(data.siblings('input').length)
{var values=data.siblings('input').val().split('=');frontvpg.removeReturnFilters();frontvpg.closeTooltip();frontvpg.addFilterHash(values[0],values[1]);frontvpg.setDedicatedTitle(values[0],values[1],data.html());}};$(document.getElementById('filters')).on('click','.input_more_criterias',function()
{if($(this).is(':checked'))
{frontvpg.addFilterHash($(this).attr('name'),$(this).attr('value'));frontvpg.addReturnFilter($(this).attr('name'),$(this).siblings('label').html(),$(this).attr('value'));$(document.getElementById('sdv-title')).html('');}else
{frontvpg.removeFilterHash($(this).attr('name'),$(this).attr('value'));frontvpg.removeReturnFilter($(this).attr('name'),$(this).attr('value'));}});}
frontvpg.minimizeReturnFilter=function(value,size,endingString)
{var text=frontvpg.trimString(value);if(text&&text.length>size)
{return text.substr(0,(size-endingString.length))+endingString;}
return text;}
frontvpg.getFilterFromHash=function()
{var values=[];$(frontvpg.getHashArray()).each(function(hashKey,hashValues)
{var hashArray=frontvpg.getHashArray();$(frontvpg.hashKeys).each(function(key,value)
{var keyReg=value.replace('[','\\[').replace(']','\\]');var searchTxt=keyReg+'=';if(hashArray[hashKey].search(searchTxt)==0)
{values.push({'value':hashArray[hashKey].replace(value+'=',''),'key':value});}});});return values;}
frontvpg.removeReturnFilter=function(type,value)
{$("div[data-type='"+type+"'][data-value='"+value+"']").remove();}
frontvpg.removeReturnFilters=function()
{$(document.getElementById('filter_choices')).hide().html('');$('.input_more_criterias').attr('checked',false);}
frontvpg.resetFilterBar=function()
{$("span[data-reset]").each(function()
{$("input[id='datepicker-input']").attr('disabled',false);$("input.destination-input").attr('disabled',false);var resetValue=$(this).attr('data-reset');$(this).html(resetValue);frontvpg.resetCalendar();});$("a.reset").click(function(){if(typeof frontvpg.currentSelectize!='undefined')frontvpg.currentSelectize.clear();});$('div.link-box').removeClass('active');$(document.getElementById('datepicker-input')).val('');$('textarea[placeholder], :input[placeholder]').focus().blur();}
frontvpg.addResetFilter=function()
{if($("#filter_choices div.reset").length==0)
{var value='reset';var key=value;var label='Réinitialiser tous les critères';var renderReturnFilter=Handlebars.templates['filters_return']({'key':key,'label':label,'value':value,'class':'reset','icon':'icon-reload'});$(document.getElementById('filter_choices')).append(renderReturnFilter).show();}}
frontvpg.addCreateAlert=function()
{if($("#createAlertContainer").length==0)
{var label='Créez une alerte';var renderCreateAlert=Handlebars.templates['filters_alerts']({'label':label,'icon':'icon-ringalert'});$('#filter_choices').append(renderCreateAlert);frontvpg.updateAlertUrl();}}
frontvpg.updateAlertUrl=function()
{frontvpg.currentHash=window.location.hash;var href=$("#createAlertBtn").attr("href")+frontvpg.currentHash;$("#createAlertBtn").attr("href",href);$("#createAlertBtn").attr("ga-action",frontvpg.currentHash);}
frontvpg.addReturnFilter=function(key,label,value){if(typeof(label)!="undefined"){if($("div.filter_choice[data-type='"+key+"'][data-value='"+value+"']").length==0){var renderReturnFilter=Handlebars.templates['filters_return']({'key':key,'label':label,'value':value,'class':'','icon':'icon-close'});var filterChoice=$('.filter_choice');switch(key){case'date':filterChoice.filter("[data-type='date']").remove();break;}
$(document.getElementById('filter_choices')).append(renderReturnFilter).show();}}}
frontvpg.isFilteredRoom=function()
{var dedicatedParams=['c_th','c_evt','c_cat'];frontvpg.isFiltered=false;frontvpg.isDedicatedRoom=false;frontvpg.isDedicatedFilter=false;var hashCount=(window.location.hash.split('&').length==1);$(frontvpg.hashKeys).each(function(hashKey,hashValues)
{var searchKey=frontvpg.hashKeys[hashKey].replace('[','');searchKey=searchKey.replace(']','');if((window.location.hash.search(searchKey))!=-1)
{if(hashCount==1)
{if(dedicatedParams.indexOf(searchKey)>=0)
{frontvpg.isDedicatedRoom=true;}else
{frontvpg.isFiltered=true;}}else
{frontvpg.isFiltered=true;if(dedicatedParams.indexOf(searchKey)>=0)
{frontvpg.isDedicatedRoom=true;}}
if(frontvpg.isFiltered&&frontvpg.isDedicatedRoom)
{frontvpg.isDedicatedFilter=true;}}});};frontvpg.manageSdvTitle=function(hashUrl)
{if(hashUrl=='')
{$('#editoImage').show();$('#nbSales').hide();$('#sdv-title').html('Nos ventes privées en cours');}else
{frontvpg.isFilteredRoom();if(frontvpg.isFiltered)
{$('#nbSales').show();if(frontvpg.isDedicatedRoom)
{$('#editoImage').show();}else
{$('#editoImage').hide();}}else
{$('#nbSales').hide();if(frontvpg.isDedicatedRoom)
{$('#editoImage').show();}else
{$('#sdv-title').html('Nos ventes privées en cours');$('#editoImage').show();}}}}
frontvpg.getHashArray=function()
{var hashUrl=window.location.hash;hashUrl=hashUrl.replace('#filter/','');hashUrl=hashUrl.replace('/1','');frontvpg.manageSdvTitle(hashUrl);var hashArray=hashUrl.split('&');if(hashUrl=='')
{hashArray=[];}
return hashArray;};frontvpg.removeFilterHash=function(key,value)
{var hashArray=frontvpg.getHashArray();$(frontvpg.getHashArray()).each(function(hashKey,hashValues)
{if(hashArray[hashKey]==(key+'='+value))
{hashArray.splice(hashKey,1);}});var hashUrl=hashArray.join('&');if(hashUrl=='')
{$('#sdv-title').html('Nos ventes privées en cours');$('#sdv-titlenbSales').hide();window.location.hash='';}else
{window.location.hash='#filter/'+hashUrl+'/1';}}
frontvpg.addFilterHash=function(key,value)
{var hashArray=frontvpg.getHashArray();var dedicatedParams=['c_th','c_evt','c_cat'];var isDedicated=false;if(jQuery.inArray(key,dedicatedParams)!=-1)
{isDedicated=true;}
var existingHash=false;if(isDedicated==false)
{$(frontvpg.getHashArray()).each(function(hashKey,hashValues)
{var keySearched='';if(key=='date')
{keySearched='date';}else
{keySearched=key.replace('[','\\[');keySearched=keySearched.replace(']','\\]');keySearched=keySearched+'='+value;}
if(hashArray[hashKey].search(keySearched)==0)
{hashArray[hashKey]=key+'='+value;existingHash=true;}});}
if(existingHash==false)
{hashArray[hashArray.length]=key+'='+value;}
if(isDedicated==true)
{hashArray=[key+'='+value];}
hashUrl=hashArray.join('&');window.location.hash='#filter/'+hashUrl+'/1';}
frontvpg.outsideFilterBarClick=function()
{var filtersResults=function()
{frontvpg.closeTooltip();};$(document.getElementById('filters')).outsideEvent(filtersResults);}
frontvpg.renderFilters=function(homepageResults)
{var renderRegions=Handlebars.templates['filters_regions']({'regions':homepageResults.filters._c_de.values});$(document.getElementById('destinations-regions')).html(renderRegions);var renderCountryDestinations=Handlebars.templates['filters_country']({'countryDestinations':homepageResults.filters.c_de.values,'abroadLabel':'Etranger'});$(document.getElementById('destinations-country')).html(renderCountryDestinations);var renderCity=Handlebars.templates['filters_city']({'city':homepageResults.filters.ac.values});$(document.getElementById('destinations-city')).html(renderCity);$("input[name='dc[]']").attr('disabled','disabled');$("input[name='dc[]']").parent('li').addClass('disabled');if(homepageResults.filters.dc.values[0])
{if(homepageResults.filters.dc.values[0].label=='unknown'||homepageResults.filters.dc.values[0].label=='')
{homepageResults.filters.dc.values[0].label='Sans transport';}}
$.each(homepageResults.filters.dc.values,function()
{$("input[id='departure-"+this.value+"']").attr('disabled',false);$("input[id='departure-"+this.value+"']").parent('li').removeClass('disabled');});if($(document.getElementById('departureFilter')).html()=='')
{var renderDestinations=Handlebars.templates['filters_destination']({'departures':homepageResults.filters.dc.values});$(document.getElementById('departureFilter')).html(renderDestinations);}
var nightsTrad={'theme3.filters.duration.week':'Semaine','theme3.filters.duration.weekend':'Week-ends et courts séjours','theme3.filters.duration.long':'2 semaines et plus','theme3.filters.duration.onetwoweek':'1 à 2 semaines'};$("input[name='nights[]']").attr('disabled','disabled');$("input[name='nights[]']").parent('li').addClass('disabled');$.each(homepageResults.filters.nights.values,function()
{if(nightsTrad[this.label])
{this.label=nightsTrad[this.label];}
$("input[id='nights-"+this.value+"']").attr('disabled',false);$("input[id='nights-"+this.value+"']").parent('li').removeClass('disabled');});if($(document.getElementById('nightsFilter')).html()=='')
{var renderNights=Handlebars.templates['filters_nights']({'nights':homepageResults.filters.nights.values});$(document.getElementById('nightsFilter')).html(renderNights);}
$("input[name='c_pe[]']").attr('disabled','disabled');$("input[name='c_pe[]']").parent('li').addClass('disabled');$.each(homepageResults.filters.c_pe.values,function()
{$("input[id='pensions-"+this.value+"']").attr('disabled',false);$("input[id='pensions-"+this.value+"']").parent('li').removeClass('disabled');});if($(document.getElementById('pensionsFilter')).html()=='')
{var renderPensions=Handlebars.templates['filters_pensions']({'pensions':homepageResults.filters.c_pe.values});$(document.getElementById('pensionsFilter')).html(renderPensions);}
var pricesTrad={'theme3.filters.price.1000.1500':'1000 à 1500 €','theme3.filters.price.1000.2500':'theme3.filters.price.1000.2500','theme3.filters.price.200.500':'200 à 500 €','theme3.filters.price.300.500':'theme3.filters.price.300.500','theme3.filters.price.500.1000':'500 à 1000 €','theme3.filters.price.inf.200':'Moins de  200 €','theme3.filters.price.inf.300':'theme3.filters.price.inf.300','theme3.filters.price.sup1500':'1500 € et plus','theme3.filters.price.sup2500':'theme3.filters.price.sup2500'};$("input[name='price[]']").attr('disabled','disabled');$("input[name='price[]']").parent('li').addClass('disabled');$.each(homepageResults.filters.price.values,function()
{if(pricesTrad[this.label])
{this.label=pricesTrad[this.label];}
$("input[id='prices-"+this.value+"']").attr('disabled',false);$("input[id='prices-"+this.value+"']").parent('li').removeClass('disabled');});if($(document.getElementById('pricesFilter')).html()=='')
{var renderPrices=Handlebars.templates['filters_prices']({'prices':homepageResults.filters.price.values});$(document.getElementById('pricesFilter')).html(renderPrices);}
frontvpg.hashKeys=['date','price[]','dc[]','nights[]','c_pe[]','c_cat','c_evt','c_th','__c_de[]','_c_de[]','ac[]','c_de[]'];var hashValues=frontvpg.getFilterFromHash();if(hashValues.length){var hasThemeOrEvent=false;for(var id in hashValues){frontvpg.prefillFilters(hashValues[id]['key'],hashValues[id]['value']);if($.inArray(hashValues[id]['key'],['c_cat','c_evt','c_th'])!=-1){hasThemeOrEvent=true;}}
if((hasThemeOrEvent&&hashValues.length>1)||!hasThemeOrEvent){frontvpg.addResetFilter();frontvpg.addCreateAlert();}}
frontvpg.manageMobileFilterTitle();if(homepageResults.thematique||homepageResults.event)
{$("input[name='price[]']").attr('disabled','disabled');$("input[name='price[]']").parent('li').addClass('disabled');$("input[name='dc[]']").attr('disabled','disabled');$("input[name='dc[]']").parent('li').addClass('disabled');$("input[name='c_pe[]']").attr('disabled','disabled');$("input[name='c_pe[]']").parent('li').addClass('disabled');$("input[name='nights[]']").attr('disabled','disabled');$("input[name='nights[]']").parent('li').addClass('disabled');$("input[id='datepicker-input']").attr('disabled','disabled');$("input.destination-input").attr('disabled','disabled');if(homepageResults.thematique.front_filters)
{frontFiltersEvtTh=homepageResults.thematique.front_filters;}else
{frontFiltersEvtTh=homepageResults.event.front_filters;}
$.each(frontFiltersEvtTh,function()
{switch(this.code)
{case"date":$("input[id='datepicker-input']").attr('disabled',false);break;case"c_de":$("input.destination-input").attr('disabled',false);default:$("input[name='"+this.code+"[]']").attr('disabled',false);$("input[name='"+this.code+"[]']").parent('li').removeClass('disabled');break;}});}}
frontvpg.initBtnSearchMobile=function()
{$(document.getElementById('btn-search-mobile')).on('click',function(event)
{event.preventDefault();event.stopPropagation();var position=$(window).scrollTop();frontvpg.initPosSecondObject=frontvpg.getInitPosObject(false);var positionTarget=frontvpg.initPosSecondObject-frontvpg.headerHeight;var isOpen=$(document.getElementById('filters')).is(':visible');var needToClose=false;frontvpg.isOpenBtnSearchMobile=true;if(isOpen&&position<=positionTarget+$(document.getElementById('filters')).outerHeight())
{needToClose=true;frontvpg.isOpenBtnSearchMobile=false;}else{if(frontvpg.canUseSessionStorage&&frontvpg.isOpenBtnSearchMobile){sessionStorage.setItem('scrollPos',sessionStorage.getItem('scrollPos')-$(document.getElementById('filters')).outerHeight());}}
if(!needToClose)
{$('body, html').animate({scrollTop:(positionTarget)},1000);$(document.getElementById('filters')).fadeIn(1000);}else
{$(document.getElementById('filters')).fadeOut(1000);}});};frontvpg.initFilters=function()
{if(frontvpg.targets.tablet||frontvpg.targets.mobile)
{$('.criteria').addClass('tooltip-container').find('.criteria-title').addClass('tooltip-link');$('.criteria').find('.criteria-list').addClass('tooltip');if(frontvpg.targets.mobile)
{$(document.getElementById('filters')).find('.tooltip').removeClass('tooltip').addClass('tooltip-rel');}else
{$(document.getElementById('filters')).find('.tooltip-rel').removeClass('tooltip-rel').addClass('tooltip');}}else
{$('.criteria').removeClass('tooltip-container').find('.criteria-title').removeClass('tooltip-link');$(document.getElementById('filters')).find('.tooltip-rel').removeClass('tooltip-rel').addClass('tooltip');$('.criteria').find('.criteria-list').removeClass('tooltip');}
$(document.getElementById('tooltip-departure-slider')).on("mouseenter mouseleave",function(e)
{if(frontvpg.targets.desktop&&$(document.getElementById('tooltip-departure-slider')).hasClass('is_disabled'))
{var el=$(this).find(document.getElementById('tooltip-slider'));switch(e.type)
{case'mouseenter':$(el).show();break;case'mouseleave':$(el).hide();break;}}});}
frontvpg.initClickReturnFilters=function(){$('body').on('click','.filter_choice',function(e){e.preventDefault();e.stopPropagation();var key=$(this).attr('data-type');var value=$(this).attr('data-value');if(key=='reset'){window.location.hash='';if(typeof frontvpg.currentSelectize!='undefined'){frontvpg.currentSelectize.clear();$(frontvpg.currentSelectize.$control).find('input').removeClass('isSelected');}}else{frontvpg.removeFilterHash(key,value);frontvpg.removeReturnFilter(key,value);if($("div[data-type='"+key+"'][data-value='"+value+"']").length==0){if(typeof frontvpg.currentSelectize!='undefined'){frontvpg.currentSelectize.clear();$(frontvpg.currentSelectize.$control).find('input').removeClass('isSelected');}}
$("input[name='"+key+"'][value='"+value+"']").attr('checked',false);if(key=='date')
{$(document.getElementById('datepicker-input')).val('');}}});}
frontvpg.prefillFilters=function(type,hashes)
{var destination=[];if($.isArray(hashes))
{$(hashes).each(function(key,hash)
{frontvpg.preFillFilter(type,hash);});}else
{frontvpg.preFillFilter(type,hashes);}
var destinationCriterias=['_c_de[]','__c_de[]','c_de[]'];if($('.filter_choice').length>0)
{$('.filter_choice').each(function()
{if($.inArray($(this).attr('data-type'),destinationCriterias)>=0)
{var label=$.trim($(this).find('.return-filter-label').html());destination.push(label);}});}
if(destination.length>0)
{var text=destination.join(', ');if(text!='')
{text=frontvpg.minimizeReturnFilter(text,16,'...');$('.destination-input').val(text);}else
{$('.destination-input').val('');}}};frontvpg.preFillFilter=function(type,hash)
{if(hash!=undefined)
{switch(type)
{case'date':var datesYMD=hash.split(',');var dateDeb=frontvpg.ymd2Date(datesYMD[0]);var dateFin=frontvpg.ymd2Date(datesYMD[1]);var dateRangeValue=dateDeb.getYyyymmdd()+','+dateFin.getYyyymmdd();var timeDiff=Math.abs(dateFin.getTime()-dateDeb.getTime());var diffDays=Math.ceil(timeDiff/(1000*3600*24));var flexibility=diffDays/2;var dateChoosen=dateDeb;dateChoosen.setDate(dateChoosen.getDate()+flexibility);var daysTrad='jours';$("#calendar-button input").val(formatDate("dd/mm/yy",dateChoosen)+' +/- '+flexibility+daysTrad[0]);frontvpg.pickerDeparture.gotoDate(dateChoosen);$("#tooltip-departure td[data-day='"+dateChoosen.getDate()+"']").attr('class','is-selected');frontvpg.sliderDeparture.val(frontvpg.sliderDepartureValues.indexOf(flexibility.toString()));frontvpg.addReturnFilter('date',dateChoosen.getDdmmyyyy('/')+' +/- '+flexibility+daysTrad[0],dateRangeValue);if(frontvpg.targets.tablet){$(document.getElementById('criteria-box')).slideUp();}
break;case'price[]':var elem=$("input[id='prices-"+hash+"']");$element=$(document.getElementById("prices-"+hash));if($element.length){$element.attr("checked",true);frontvpg.addReturnFilter('price[]',elem.siblings('label').html(),elem.attr('value'));}
break;case'c_pe[]':var elem=$("input[id='pensions-"+hash+"']");$element=$(document.getElementById("pensions-"+hash));if($element.length){$element.attr("checked",true);frontvpg.addReturnFilter('c_pe[]',elem.siblings('label').html(),elem.attr('value'));}
break;case'nights[]':var elem=$("input[id='nights-"+hash+"']");$element=$(document.getElementById("nights-"+hash));if($element.length){$element.attr("checked",true);frontvpg.addReturnFilter('nights[]',elem.siblings('label').html(),elem.attr('value'));}
break;case'dc[]':$element=$(document.getElementById("departure-"+hash));if($element.length){var elem=$("input[id='departure-"+hash+"']");$element.attr("checked",true);var labelDeparture='Au départ de : '+elem.siblings('label').html();frontvpg.addReturnFilter('dc[]',labelDeparture,elem.attr('value'));}
break;case'c_cat':case'c_evt':case'c_th':var elem=$("input[value='"+type+"="+hash+"']");var textMini=frontvpg.minimizeReturnFilter(elem.prev().html(),16,'...');elem.parents('span.tooltip').prev().children('.filter-title').html(textMini);elem.parents('span.tooltip-rel').prev().children('.filter-title').html(elem.prev().html());frontvpg.setDedicatedTitle(type,hash,elem.prev().html());$('div.link-box').removeClass('active');elem.closest('div.link-box').addClass('active');break;case'__c_de[]':case'_c_de[]':case'c_de[]':case'ac[]':var label=frontvpg.criteriaLabels[hash];frontvpg.addReturnFilter(type,label,hash);break;}
if(typeof(elem)!="undefined"&&elem.length>0)
{var label=[];$("[name='"+elem.attr('name')+"']:checked").each(function()
{label.push($(this).next().html());});label=label.join(', ');label=frontvpg.minimizeReturnFilter(label,25,'...');if(elem.parents('div.criteria').find('.criteria-label').length>0)
{elem.parents('div.criteria').find('.criteria-label').html(label);}}}};frontvpg.manageFilterInputs=function()
{var val=false;if(!frontvpg.targets.desktop)
{val=true;}
$.each(frontvpg.secondTooltipTablet,function(index,value)
{$("[data-tooltip="+value+"] input").attr('disabled',val);});};frontvpg.myHashChange=function()
{if(frontvpg.currentHash!=window.location.hash)
{frontvpg.resetFilterBar();frontvpg.removeReturnFilters();frontvpg.handleTrackingHomepagePage();frontvpg.getSales();}
frontvpg.currentHash=window.location.hash;}
frontvpg.initDestinationFilter=function(){$('.tooltip-desti .selectize-dropdown div.option.active').on('click',function(event){event.trigger('trackClick');});$('.tooltip-desti .selectize-input input').keypress(function(e){if(e.which==13){var searchedText=$(this).prev().attr('data-value');var labelInputContainer=$(this.$control).find('input').prev();$('.tooltip-desti').find('.selectize-dropdown .optgroup div.option').each(function(){if(frontvpg.isStringPresent($(this).attr('data-value'),searchedText)){var textMini=frontvpg.minimizeReturnFilter(labelInputContainer.html(),16,'...');labelInputContainer.html(textMini);frontvpg.addFilterHash($(this).attr('data-type'),$(this).attr('data-value'));frontvpg.addReturnFilter($(this).attr('data-type'),$(this).text(),$(this).attr('data-value'));return false;}});}});$('.tooltip-desti .selectize-input input').on('click keyup',function(event){event.preventDefault();event.stopPropagation();switch(event.type){case'keyup':var selectizeContainer=$('#filters div.selectize-dropdown');selectizeContainer.hide();if(this.value.length>1){selectizeContainer.show();}
$('.section-no-results').hide();var resultsShown=$('.tooltip-desti').find('.selectize-dropdown .optgroup div.option').length;if(resultsShown==0){$('.section-no-results').show();var text=$('#no-results-title-template').html();text=text.replace('%s','<span class="isBold">'+$('.tooltip-desti .selectize-input input').val()+'</span>');$('.no-results-title').html(text);}
break;case'click':if(typeof frontvpg.currentSelectize!='undefined'){frontvpg.currentSelectize.clear();$(frontvpg.currentSelectize.$control).find('input').removeClass('isSelected');}
break;default:break;}});}
frontvpg.manageMobileFilterTitle=function()
{var hashValues=frontvpg.getFilterFromHash();var catEvtThLabel='';var nbSalesLabel='';var label=" ";if(hashValues.length>0)
{for(var id in hashValues)
{var key=hashValues[id].key;var value=hashValues[id].value;if(key=='c_cat'||key=='c_evt'||key=='c_th')
{var selectedInput=$("input[value='"+key+"="+value+"']");catEvtThLabel=selectedInput.prev().html();}
else
{var nbSales=$('#text_nb_sales').text();if(nbSales>1)
{nbSalesLabel=nbSales+" ventes";}else
{nbSalesLabel=nbSales+" vente";}}}
if(nbSalesLabel.length>0)
{label=nbSalesLabel;}
else if(catEvtThLabel.length>0)
{label=catEvtThLabel;}}
$('#isDynamicTitle').html(frontvpg.minimizeReturnFilter(label,18,'...'));}
$(window).bind('hashchange',frontvpg.myHashChange);;
!function($){$(function(){frontvpg.imagesServer='http://images{{ nb }}.bovpg.net';frontvpg.picturePath='/{{ format }}/back/fr/';frontvpg.defaultImg="load-img.png";frontvpg.flagTypes={"price":"<span>A partir de</span> %price&euro;","exclusive":"Exclusif",'saved up':"Réduction jusqu\'à %price&euro;",'pct':"- %percent %"};frontvpg.managePriceDisplay=function(browse_data,pctType){var flagContent=frontvpg.flagTypes[pctType];var priceFlagReturned={'price':'0','title':''};var flagContentSplit={};switch(pctType){case'price':flagContentSplit=flagContent.split('%price');priceFlagReturned={'price':''+numeral(browse_data.best_sale_price).format('0,00'),'titleBefore':(flagContentSplit[0]||''),'titleAfter':(flagContentSplit[1]||'')};break;case'saved up':flagContentSplit=flagContent.split('%price');priceFlagReturned={'price':''+numeral(browse_data.best_saved_up_price).format('0,00'),'titleBefore':(flagContentSplit[0]||''),'titleAfter':(flagContentSplit[1]||'')};break;case'pct':var percent=(typeof browse_data.percent==='undefined'||browse_data.percent=='0'||browse_data.percent==null)?browse_data.best_percent:browse_data.percent;flagContentSplit=flagContent.split('- %percent');priceFlagReturned={'price':'-'+percent,'titleBefore':(flagContentSplit[0]||''),'titleAfter':(flagContentSplit[1]||'')};break;default:priceFlagReturned={'price':flagContent,'titleBefore':'','titleAfter':''};break;}
return priceFlagReturned;}
frontvpg.isNextPart=function(obj,refDate){if(refDate===undefined){var d1=new Date();}else{var d1=new Date(refDate*1000);}
if(obj.isEvent){var d2=new Date(obj['start_date']*1000);}
if(obj.isThematique){var d2=new Date(obj['start_date']*1000);}
if(obj.isSale){var d2=new Date(obj['browse_data']['start_date']*1000);}
return(d1<d2);}});}(window.jQuery);
frontvpg.manageSalesSizing=function(){frontvpg.initSalesByLine();var nowOuterHeight=$(document.getElementById('sales-container-now')).find('article.sale').first().outerHeight(true);var nextOuterHeight=$(document.getElementById('sales-container-next')).find('article.sale').first().outerHeight(true);frontvpg.saleBlockHeightWithMarginNow=Math.ceil(nowOuterHeight);if(frontvpg.canUseSessionStorage&&frontvpg.saleBlockHeightWithMarginNow>150){sessionStorage.setItem('nowHeight',frontvpg.saleBlockHeightWithMarginNow);}
frontvpg.saleBlockHeightWithMarginNext=Math.ceil(nextOuterHeight);if(frontvpg.canUseSessionStorage&&frontvpg.saleBlockHeightWithMarginNow>150){sessionStorage.setItem('nextHeight',frontvpg.saleBlockHeightWithMarginNext);}
$(document.getElementById('sales-container-now')).height(Math.ceil(now.length/frontvpg.saleByLineNow)*frontvpg.saleBlockHeightWithMarginNow);$(document.getElementById('sales-container-next')).height(Math.ceil(next.length/frontvpg.saleByLineNext)*frontvpg.saleBlockHeightWithMarginNext);}
frontvpg.initSalesByLine=function(){if(frontvpg.currentBreakPoint=='mobile'){frontvpg.saleByLine=1;frontvpg.saleByLineNow=1;frontvpg.saleByLineNext=1;frontvpg.nbSaleAround=4;}else if(frontvpg.currentBreakPoint=='tablet'){frontvpg.saleByLine=2;frontvpg.saleByLineNow=2;frontvpg.saleByLineNext=2;frontvpg.nbSaleAround=6;}else{frontvpg.saleByLine=2;frontvpg.saleByLineNow=2;frontvpg.saleByLineNext=3;frontvpg.nbSaleAround=18;}}
frontvpg.manageSizeValues=function(isNow){if(typeof isNow=="undefined"||isNow==true){frontvpg.saleBlockHeight=frontvpg.saleBlockHeightNow;frontvpg.salesContainer=$(document.getElementById('sales-container-now'));frontvpg.salesContainerType='now';frontvpg.salesLength=now.length;frontvpg.saleByLine=frontvpg.saleByLineNow;frontvpg.saleBlockHeightWithMargin=frontvpg.saleBlockHeightWithMarginNow;frontvpg.currentDisplay=frontvpg.currentDisplayNow;}else{frontvpg.saleBlockHeight=frontvpg.saleBlockHeightNext;frontvpg.salesContainer=$(document.getElementById('sales-container-next'));frontvpg.salesContainerType='next';frontvpg.salesLength=next.length;frontvpg.saleByLine=frontvpg.saleByLineNext;frontvpg.saleBlockHeightWithMargin=frontvpg.saleBlockHeightWithMarginNext;frontvpg.currentDisplay=frontvpg.currentDisplayNext;}}
frontvpg.manageLazyScroll=function(firstTime,callback){frontvpg.saleBlockHeight=null;frontvpg.saleBlockHeightNow=null;frontvpg.saleBlockHeightNext=null;frontvpg.salesLengthNow=now.length;frontvpg.salesLengthNext=next.length;frontvpg.currentVal=0;frontvpg.currentPos=0;frontvpg.manageScrollEvent(firstTime,callback);if(callback){callback();}};frontvpg.unveilPictures=function(forceTrigger){$(".sale-figure img").unveil(frontvpg.saleBlockHeightWithMargin,function(){$(this).removeAttr('data-src');});if(forceTrigger){$(".sale-figure img").trigger('unveil');}};frontvpg.isContainerInViewport=function(container,strict){var containerTop=container.offset().top;var containerBottom=containerTop+container.height();var windowTop=$(window).scrollTop();var windowBottom=windowTop+$(window).height();var threshold=container.find('article').first().height();if(strict){threshold=0;}
return containerTop<=windowBottom+threshold&&containerBottom>=windowTop-threshold;};frontvpg.scrollDirection=function(){var direction=frontvpg.currentDirection;var scrollValue=$(window).scrollTop();if(scrollValue<frontvpg.currentScrollPos){direction='UP';}
if(scrollValue>frontvpg.currentScrollPos){direction='DOWN';}
frontvpg.currentScrollPos=scrollValue;if(frontvpg.canUseSessionStorage){if(frontvpg.currentBreakPoint=='mobile'&&frontvpg.isOpenBtnSearchMobile){var result=scrollValue-$(document.getElementById('filters')).outerHeight();var newScrolledValue=(result>=0)?result:0;sessionStorage.setItem('scrollPos',newScrolledValue);}else{sessionStorage.setItem('scrollPos',scrollValue);}}
frontvpg.currentDirection=direction;return direction;};frontvpg.getBlockFromPosition=function(){var scrolledFromContainerTop=($(window).height()-frontvpg.salesContainer.offset().top)+$(window).scrollTop();if(frontvpg.salesContainerType=='now'){return Math.min(frontvpg.salesLengthNow-1,Math.ceil(scrolledFromContainerTop/frontvpg.saleBlockHeightWithMarginNow)*frontvpg.saleByLineNow);}else{return frontvpg.salesLengthNow+Math.min(frontvpg.salesLengthNext-1,Math.ceil(scrolledFromContainerTop/frontvpg.saleBlockHeightWithMarginNext)*frontvpg.saleByLineNext);}};frontvpg.manageScrollEvent=function(firstTime,callback){var lastBlock=frontvpg.saleByLine;var currentBlock=0;if(firstTime){$(window).on('touchstart scroll',function(){if(typeof frontvpg.handle!=='undefined'){window.clearTimeout(frontvpg.handle);}
frontvpg.handle=window.setTimeout(function(){if(typeof frontvpg.isManualScroll!=="undefined"){delete frontvpg.isManualScroll;return;}
if(!frontvpg.targets.desktop){frontvpg.currentPos=$(window).scrollTop()-frontvpg.currentVal;if(frontvpg.currentPos<=frontvpg.scrollLimit&&frontvpg.currentPos>=-frontvpg.scrollLimit){return;}else{frontvpg.currentVal=$(window).scrollTop();}}
var currentSaleType=frontvpg.salesContainerType;$('.containerNowAndNext').each(function(index){if($(this).attr('id')=='sales-container-next'&&next.length<=0){return;}
if(frontvpg.isContainerInViewport($(this)))
{frontvpg.manageSizeValues($(this).attr('id')=='sales-container-now')}
var direction=frontvpg.scrollDirection();lastBlock=frontvpg.getBlockFromPosition();if((frontvpg.salesContainerType!=currentSaleType||currentBlock!=lastBlock)){frontvpg.generateSaleAround(lastBlock,currentBlock,direction);currentBlock=lastBlock;if(callback){callback();}
frontvpg.unveilPictures();}
frontvpg.redrawPushPromos();});},10);});}}
frontvpg.generateSaleAround=function(lastBlock,currentBlock,direction){var nbToReload=frontvpg.getNbSalesToReload(lastBlock,currentBlock);var firstSale=Math.max(0,lastBlock-frontvpg.nbSaleAround);if(frontvpg.salesContainerType=='next'){firstSale-=frontvpg.salesLengthNow;firstSale=Math.max(0,firstSale);}
if(!frontvpg.salesLength)
{frontvpg.salesLength=now.length;}
var lastSale=Math.min(frontvpg.salesLength,Math.max(lastBlock+frontvpg.nbSaleAround,firstSale+nbToReload));if(lastSale>=nbToReload){firstSale=Math.min(firstSale,lastSale-nbToReload);}
if(typeof(frontvpg.saleByLine)!="undefined"){firstSale=Math.ceil(firstSale/frontvpg.saleByLine)*frontvpg.saleByLine;lastSale=Math.ceil(lastSale/frontvpg.saleByLine)*frontvpg.saleByLine;}
if(frontvpg.isScrollNeeded(direction,firstSale,lastSale)){frontvpg.generateSales(lastBlock,nbToReload,firstSale,lastSale,direction);}};frontvpg.isScrollNeeded=function(direction,firstSale,lastSale){if(direction==""){return false;}
if(frontvpg.currentDisplay[0]<=firstSale&&frontvpg.currentDisplay[1]>=lastSale){return false;}
return true;};frontvpg.generateSales=function(lastBlock,nbToReload,firstSale,lastSale,direction){var $blank=frontvpg.salesContainer.find('.blank');var $articles=frontvpg.salesContainer.find('article');var renderNow;lastBlock=Math.max(0,lastBlock);if(lastBlock==0||nbToReload>frontvpg.nbSaleAround){if(frontvpg.salesContainerType=='now')
{renderNow=Handlebars.templates['saleList']({'currentArray':now.slice(firstSale,lastSale),'isNext':false,'isLazy':true,'lang':'fr','indexOffset':firstSale});}else{renderNow=Handlebars.templates['saleList']({'currentArray':next.slice(firstSale,lastSale),'isNext':true,'isLazy':true,'lang':'fr','indexOffset':firstSale});}
$articles.find('img').remove();$articles.remove();if((frontvpg.saleByLine==2&&frontvpg.salesLength<lastSale&&frontvpg.salesLength%2==1)||(frontvpg.saleByLine==3&&frontvpg.salesLength<lastSale&&frontvpg.salesLength%3==2))
{renderNow+='<article></article>';}else if(frontvpg.saleByLine==3&&frontvpg.salesLength<lastSale&&frontvpg.salesLength%3==1){renderNow+='<article></article><article></article>';}
frontvpg.salesContainer.append(renderNow);frontvpg.lazyScrollSizes();}
else{frontvpg.lazyScrollAddSales(direction,lastSale,nbToReload);}
if(typeof frontvpg.saleByLine!=='defined'){frontvpg.initSalesByLine();}
if(typeof frontvpg.saleBlockHeightWithMargin!=='defined'&&frontvpg.canUseSessionStorage){frontvpg.setBlockHeightWithMargin(frontvpg.salesContainerType=='now');}
$blank.height(frontvpg.saleBlockHeightWithMargin*firstSale/frontvpg.saleByLine);frontvpg.currentDisplay=[firstSale,lastSale];if(frontvpg.salesContainerType=='now'){frontvpg.currentDisplayNow=frontvpg.currentDisplay;if(frontvpg.canUseSessionStorage){sessionStorage.now=frontvpg.currentDisplay;}}else{frontvpg.currentDisplayNext=frontvpg.currentDisplay;if(frontvpg.canUseSessionStorage){sessionStorage.next=frontvpg.currentDisplay;}}};frontvpg.getNbSalesToReload=function(lastBlock,currentBlock){var nbToReload=Math.min(Math.max(frontvpg.saleByLine,Math.abs(Math.ceil((lastBlock-currentBlock)/frontvpg.saleByLine)*frontvpg.saleByLine)),frontvpg.nbSaleAround*2);if(typeof(nbToReload)=='undefined'||isNaN(nbToReload)||nbToReload>=frontvpg.nbSaleAround||lastBlock==currentBlock||currentBlock==0){nbToReload=2*frontvpg.nbSaleAround;}
return nbToReload;};frontvpg.setBlockHeightWithMargin=function(isNow){if(typeof isNow=="undefined"||isNow==true){if(frontvpg.canUseSessionStorage&&typeof sessionStorage.getItem('nowHeight')!=="undefined"){frontvpg.saleBlockHeightWithMarginNow=sessionStorage.getItem('nowHeight');frontvpg.saleBlockHeightWithMargin=frontvpg.saleBlockHeightWithMarginNow;}}else{if(frontvpg.canUseSessionStorage&&typeof sessionStorage.getItem('nextHeight')!=="undefined"){frontvpg.saleBlockHeightWithMarginNext=sessionStorage.getItem('nextHeight');frontvpg.saleBlockHeightWithMargin=frontvpg.saleBlockHeightWithMarginNext;}}}
frontvpg.lazyScrollAddSales=function(direction,lastSale,nbToReload){var $articles=frontvpg.salesContainer.find('article');var $blank=frontvpg.salesContainer.find('.blank');var firstSaleToLoad,lastSaleToLoad=0;if(direction=='DOWN'){firstSaleToLoad=frontvpg.currentDisplay[1];lastSaleToLoad=lastSale;}else{firstSaleToLoad=Math.max(0,frontvpg.currentDisplay[0]-nbToReload);lastSaleToLoad=frontvpg.currentDisplay[0];}
if(frontvpg.salesContainerType=='now')
{var slice=now.slice(firstSaleToLoad,lastSaleToLoad);var renderNow=Handlebars.templates['saleList']({'currentArray':slice,'isNext':false,'isLazy':true,'lang':'fr','indexOffset':firstSaleToLoad});}else{var slice=next.slice(firstSaleToLoad,lastSaleToLoad);var renderNow=Handlebars.templates['saleList']({'currentArray':slice,'isNext':true,'isLazy':true,'lang':'fr','indexOffset':firstSaleToLoad});}
if(direction=='DOWN'){if((frontvpg.saleByLine==2&&slice.length%2==1)||(frontvpg.saleByLine==3&&slice.length%3==2))
{renderNow+='<article></article>';}else if(frontvpg.saleByLine==3&&slice.length%3==1){renderNow+='<article></article><article></article>';}
frontvpg.salesContainer.append(renderNow);$articles.slice(0,nbToReload).find('img').remove();$articles.slice(0,nbToReload).remove();}else{$blank.after(renderNow);$articles.slice($articles.length-nbToReload,$articles.length).find('img').remove();$articles.slice($articles.length-nbToReload,$articles.length).remove();}};frontvpg.lazyScrollSizes=function(initAll){if(typeof(initAll)=="undefined"){initAll=false;}
if(initAll){frontvpg.saleBlockHeight=null;frontvpg.saleBlockHeightNow=null;frontvpg.saleBlockHeighNext=null;frontvpg.imgHeightNow=null;frontvpg.imgHeightNext=null;frontvpg.salesContainer.find('article.sale').removeAttr('style').find('img').removeAttr('style');}
frontvpg.salesContainer.find('article.sale').find('img').first().load(function(){frontvpg.initSizes();}).each(function(){if(this.complete)$(this).load();});if(frontvpg.salesLength==0){frontvpg.initSizes();}};frontvpg.initSizes=function(){frontvpg.salesContainer.find('article.sale').first().removeAttr('style');if(typeof(frontvpg.saleBlockHeight)=='undefined'||frontvpg.saleBlockHeight<150){frontvpg.manageSalesSizing();}
if(frontvpg.salesContainerType=='now'){var firstNowArticle=$(document.getElementById("sales-container-now")).find('article.sale').first();frontvpg.saleBlockHeight=frontvpg.saleBlockHeightNow=Math.ceil(firstNowArticle.height());frontvpg.salesContainer.find('article').height(frontvpg.saleBlockHeightNow);frontvpg.saleBlockHeightWithMargin=frontvpg.saleBlockHeightWithMarginNow;if(typeof frontvpg.imgHeightNow=="undefined"||frontvpg.imgHeightNow==0){$img=frontvpg.salesContainer.find('article img.sale-image').first();if($img.height()>50){frontvpg.imgHeightNow=$img.height();if(frontvpg.imgHeightNow>0)
frontvpg.salesContainer.find('article img.sale-image').height(frontvpg.imgHeightNow);}}}
else{var firstNextArticle=$(document.getElementById("sales-container-next")).find('article.sale').first();frontvpg.saleBlockHeight=frontvpg.saleBlockHeightNext=Math.ceil(firstNextArticle.height());frontvpg.salesContainer.find('article').height(frontvpg.saleBlockHeightNext);frontvpg.saleBlockHeightWithMargin=frontvpg.saleBlockHeightWithMarginNext;if(typeof frontvpg.imgHeightNext=="undefined"||frontvpg.imgHeightNext==0){$img=frontvpg.salesContainer.find('article img.sale-image').first();if($img.height()>50){frontvpg.imgHeightNext=$img.height();if(frontvpg.imgHeightNext>0)
frontvpg.salesContainer.find('article img.sale-image').height(frontvpg.imgHeightNext);}}}};;
function builThemeEventUrl()
{var homepageUrl='/thematique/ventes';var type='c_cat';if(this.isEvent){type='c_evt';}
if(this.isThematique){type='c_th';}
return homepageUrl+'#filter/'+type+'='+this.id+'/1';}
function sort_by_rank(a,b,time)
{var dateA=a.browse_data[time];var dateB=b.browse_data[time];var rankA=99;var rankB=99;if(a.browse_data['rank']!='undefined'&&b.browse_data['rank']!='undefined'){rankA=a.browse_data['rank'];rankB=b.browse_data['rank'];}
if(dateA==dateB){if(rankA==rankB){return a.id<a.id?-1:1;}else{return rankA<rankB?-1:1;}}
return dateA<dateB?-1:1;}
!function($){frontvpg.buildSDV=function(homepageResults){var d1=new Date(homepageResults.execute.start*1000);frontvpg.registerCommonHandlebarsHelpers(d1);frontvpg.registerHandlebarsHelpers(d1);var nbSales=homepageResults.result_count;$(document.getElementById('text_nb_sales')).html(nbSales);frontvpg.populateCriteriaLabels(homepageResults.filters);frontvpg.renderFilters(homepageResults);$('select[name="destination-input"]').selectize({maxItems:1,openOnFocus:false,optgroupOrder:['destinations-top','destinations-country','destinations-regions','destinations-city'],onInitialize:function(){$('#filters .link-destination .tooltip-desti .big-top-arrow, .section-no-results').appendTo('#filters div.selectize-dropdown');$('#filters .tooltip-desti .gray-box').css('visibility','visible');frontvpg.currentSelectize=this;frontvpg.manageDestinationInput();},onChange:function(){var resultsShown=$('.tooltip-desti').find('.selectize-dropdown .optgroup div.option').length;if(resultsShown>0&&$('.tooltip-desti .selectize-input div.item').text()!=""){$('.tooltip-desti').find('.selectize-dropdown .optgroup div.option.selected').trigger('trackClick');}},onDropdownClose:function(){$('.section-no-results').hide();var resultsShown=$('.tooltip-desti').find('.selectize-dropdown .optgroup div.option').length;if(resultsShown==0){$('.section-no-results, #filters div.selectize-dropdown').show();}},onItemAdd:function(value,item){var dataType=this.options[value].tracking['data-type'];var textMini=frontvpg.minimizeReturnFilter(item.html(),16,'...');item.html(textMini);if(!frontvpg.targets.desktop){frontvpg.closeTooltip();}
if(typeof frontvpg.currentDestValues!=='undefined'){frontvpg.removeFilterHash(frontvpg.currentDestValues.type,frontvpg.currentDestValues.value);frontvpg.removeReturnFilter(frontvpg.currentDestValues.type,frontvpg.currentDestValues.value);}
frontvpg.currentDestValues={type:dataType,value:value}
frontvpg.addFilterHash(dataType,value);frontvpg.addReturnFilter(dataType,this.options[value].text,value);},render:{option:function(data){var attrSupp='';var specificClass='option';$.each(data.tracking,function(attr,value){attrSupp+=attr+'="'+value+'"';});if(data._class){specificClass+=' '+data._class;}
return'<div class="'+specificClass+'" '+attrSupp+' data-value="'+data.name+'">'+data.text+'</div>';}}});frontvpg.initDestinationFilter();now=[];next=[];saleFromUrl=false;saleFromUrlSource='next';$.each(homepageResults.sids,function(index,i)
{homepageResults.results[i]['isSale']=true;var browse_data=homepageResults.results[i]['browse_data'];var d2=new Date(browse_data['start_date']*1000);var toPush=false;if((typeof saleIdFromUrl!=='undefined'&&homepageResults.results[i]['id']==saleIdFromUrl)){toPush=true;}
if(d1<d2)
{var dataNext=homepageResults.results[i];dataNext.isActiveTrailer=frontvpg.manageTrailer(dataNext);if(frontvpg.salesCookie!==null&&frontvpg.salesCookie[dataNext.id]){dataNext.isRegisteredNextSale=true;}
dataNext.isNext=true;if(toPush){saleFromUrl=dataNext;}else{next.push(dataNext);}}
else
{var dataNow=homepageResults.results[i];dataNow.isNext=false;if(toPush){saleFromUrl=dataNow;saleFromUrlSource='now';}else{now.push(dataNow);}}});now=now.sort(function(a,b){return sort_by_rank(a,b,'end_date');});next=next.sort(function(a,b){return sort_by_rank(a,b,'start_date');});if(saleFromUrl){if(saleFromUrlSource=='next'){next.unshift(saleFromUrl);}
else{now.unshift(saleFromUrl);}}
if(typeof blocsTh!="undefined"&&frontvpg.isHome){$.each(blocsTh,function(i,data)
{data.isThematique=true;var isNextPart=frontvpg.isNextPart(data,homepageResults.execute.start);if(isNextPart){data.isNext=true;next.unshift(data);}else{data.isNext=false;now.push(data);}});}
if(typeof blocsEv!="undefined"&&frontvpg.isHome){$.each(blocsEv,function(i,data)
{data.isEvent=true;var isNextPart=frontvpg.isNextPart(data,homepageResults.execute.start);if(isNextPart){data.isNext=true;next.unshift(data);}else{data.isNext=false;now.push(data);}});}
if(typeof pushPromos!="undefined"&&frontvpg.isHome){pushPromos.sort(function(a,b)
{if(typeof a.order!="undefined"&&typeof b.order!="undefined"){return a.order-b.order;}else{return 1;}});var nbSales=now.length;$.each(pushPromos,function(i,data)
{var order=frontvpg.getPushPromoOrder(data,nbSales);if(order!=null){now.splice(order-1,0,data);}});}
frontvpg.salesContainer=$('div#sales-container-next');frontvpg.salesContainer.find('article').remove();frontvpg.salesContainer.find('.blank').height(0);frontvpg.salesContainerType='next';frontvpg.salesLength=next.length;frontvpg.saleByLine=frontvpg.saleByLineNext;frontvpg.currentDisplay=[];if(frontvpg.canUseSessionStorage&&sessionStorage.next){frontvpg.isManualScroll=true;var nextFormatted=sessionStorage.next.split(',');frontvpg.generateSales(0,2*frontvpg.nbSaleAround,nextFormatted[0],nextFormatted[1],'DOWN');}
else{frontvpg.generateSales(0,1,0,1,'DOWN');}
frontvpg.salesContainer=$('div#sales-container-now');frontvpg.salesContainer.find('article').remove();frontvpg.salesContainer.find('.blank').height(0);frontvpg.salesContainerType='now';frontvpg.salesLength=now.length;frontvpg.saleByLine=frontvpg.saleByLineNow;frontvpg.currentDisplay=[];if(frontvpg.canUseSessionStorage&&sessionStorage.now){frontvpg.isManualScroll=true;var nowFormatted=sessionStorage.now.split(',');frontvpg.generateSales(0,2*frontvpg.nbSaleAround,nowFormatted[0],nowFormatted[1],'DOWN');}else{frontvpg.generateSaleAround(0);}
if(typeof frontvpg.saleBlockHeightWithMargin!=='undefined'){$('div#sales-container-now').height(Math.ceil(now.length/frontvpg.saleByLineNow)*frontvpg.saleBlockHeightWithMarginNow);$('div#sales-container-next').height(Math.ceil(next.length/frontvpg.saleByLineNext)*frontvpg.saleBlockHeightWithMarginNext+16);}
if(frontvpg.targets.mobile||frontvpg.targets.tablet){$('.sdv-container').show();frontvpg.removeOpacity();}else{$('.sdv-container').fadeIn('slow',function(){frontvpg.removeOpacity();});}
if(frontvpg.canUseSessionStorage)
{var scrolledPos=sessionStorage.getItem('scrollPos');if(scrolledPos){window.scrollTo(0,scrolledPos);}}
if(next.length==0){$(document.getElementById('sdv-container-next')).hide();}
if(nbSales==0){if(location.hash){var alertLink=$('#searchNoResults a.noresults-alert');var newAlertLink=alertLink.attr('href')+location.hash;alertLink.attr('href',newAlertLink);}
$('#searchNoResults').show();$('#editoImage').hide();}else{$('#searchNoResults').hide();}};frontvpg.removeOpacity=function(){$('#page-container .page-center').removeClass('opacitySDVLoaded');$('#sdv-container-now').removeClass('opacitySDVLoaded');$(document.getElementById('sales-container-now')).removeClass('opacitySDVLoaded');$(document.getElementById('sdv-container-next')).removeClass('opacitySDVLoaded');}
frontvpg.manageDestinationInput=function(){var container='destinationOther';if(frontvpg.targets.tablet){container='destinationTablet';}
$('#filters .tooltip-desti span.search-box > *').detach().appendTo("#"+container);if(frontvpg.currentSelectize){frontvpg.currentSelectize.close();}};frontvpg.getPushPromoOrder=function(data,nbSales){var order=null;if(typeof data.order!="undefined"){order=parseInt(data.order,10);if(!isNaN(order)){if(typeof data.isPushPromoGuest!="undefined"){order=Math.floor((order*100)/nbSales);}
if(order<1){order=1;}}
else{order=null;}}
return order;};frontvpg.populateCriteriaLabels=function(filters)
{for(i in filters){if(filters[i]!=undefined){for(j in filters[i].values){var object=filters[i].values[j];frontvpg.criteriaLabels[object.value]=object.label;}}}};frontvpg.initFiltersEvents();frontvpg.getSales=function(firstTime){var articles=$(document.getElementById('sales-container-next')).find('article');articles.find('img').remove();articles.remove();frontvpg.closeTooltip();if(frontvpg.targets.mobile){$(document.getElementById('filters')).hide();}
var hash=window.location.hash;var posFilter=hash.search('#filter/');frontvpg.currentVal=0;frontvpg.currentPos=0;if(!frontvpg.targets.mobile){if(firstTime){$('#page-container .page-center').addClass('opacitySDVLoaded');$(document.getElementById('page-container')).prepend('<img class="ajax-loader" src="/s/images/loader.gif">');}else{$(document.getElementById('filters')).prepend('<img class="ajax-loader" src="/s/images/loader.gif">');$(document.getElementById('sdv-container-now')).addClass('opacitySDVLoaded');$(document.getElementById('sdv-container-next')).addClass('opacitySDVLoaded');}
var loader=$('.ajax-loader');if(firstTime){loader.addClass('positionBody');}else{loader.removeClass('positionBody');}}else{$(document.getElementById('sales-container-now')).before('<span class="loaderText">'+frontvpg.loaderTextTranslation+'<img src="/s/images/loader3pt.gif"/></span>');$(document.getElementById('sales-container-now')).addClass('opacitySDVLoaded');$(document.getElementById('sdv-container-next')).addClass('opacitySDVLoaded');var loader=$('.loaderText');}
frontvpg.isFiltered=false;frontvpg.isHome=(hash.length<=2);paramsProvider='';if(posFilter>=0){paramsProvider=hash.substr(posFilter+8);var posEndFilter=paramsProvider.search('/');if(posEndFilter>0){paramsProvider=paramsProvider.substr(0,posEndFilter);}
frontvpg.isFiltered=true;if(typeof frontvpg.filteredByClick!=="undefined"&&frontvpg.filteredByClick){$('body, html').animate({scrollTop:(frontvpg.initPosSecondObject-frontvpg.headerHeight)},1000);}}
if(isAdmin){paramsProvider+='&is_admin=1';}
$.getJSON('/search/doAjaxSearch?list=1&'+paramsProvider).done(function(json){if((paramsProvider.lastIndexOf('c_cat=')!=-1)||(paramsProvider.lastIndexOf('c_th=')!=-1)){$("#reset-dedicated-showroom").show();}
else{$("#reset-dedicated-showroom").hide();}
frontvpg.buildSDV(json);if(typeof slider!='undefined'){slider.startAutoPlay();}
loader.remove();frontvpg.manageLazyScroll(firstTime,frontvpg.addClickHandlerPrivateUrls);frontvpg.unveilPictures(true);});};frontvpg.chooseClosestSaleBlock=function($elem,order,recur){var closestBlock=(order>1||order>=$('article','#sales-container-now').length)?$elem.prev():$elem.next();if($('a figure img',closestBlock).width()==0){closestBlock=frontvpg.chooseClosestSaleBlock(closestBlock,order,(recur-1));}
return closestBlock;};frontvpg.redrawPushPromos=function(){var height=$('article.sale:first').height();$('article.push-promo').each(function(){$(this).find('img').height(height);frontvpg.fb.XFBML.parse(this);});};frontvpg.sdvCallback=function(){$(document.getElementById('depart')).verticalSlider();if(frontvpg.targets.desktop||frontvpg.targets.tablet){frontvpg.stickyObjects('header','filters');}else{frontvpg.stickyObjects('header','navFilters');}};frontvpg.currentTooltipId="";frontvpg.removeMouseOver=false;frontvpg.openTooltipOnMouseOver=["tooltip-theme","tooltip-region"];frontvpg.specificTootlipCondition=["tooltip-departure","criteria-box"];frontvpg.openTooltipWithSlideEffect=["criteria-box"];frontvpg.mainTooltipTablet=["tooltip-theme","tooltip-region"];frontvpg.secondTooltipTablet=["tooltip-departure"];frontvpg.initTooltip=function(){$(document.getElementById('main')).off("click mouseenter mouseleave").on('click mouseenter mouseleave','.tooltip-link',function(event){var currentTooltipId=$(this).attr('data-tooltip');event.preventDefault();event.stopPropagation();switch(event.type){case'click':frontvpg.outsideFilterBarClick();if(frontvpg.targets.tablet){if(currentTooltipId=='criteria-box'){if($(document.getElementById('criteria-box')).is(':visible')){frontvpg.currentTooltipId=currentTooltipId;frontvpg.closeTooltip();return false;}else{frontvpg.closeTooltip();frontvpg.openTooltip(this);frontvpg.currentTooltipId=currentTooltipId;return false;}}else{if($(document.getElementById('criteria-box')).is(':visible')){if(jQuery.inArray(currentTooltipId,frontvpg.mainTooltipTablet)!=-1){return false;}
if(jQuery.inArray(currentTooltipId,frontvpg.secondTooltipTablet)!=-1){if(currentTooltipId==frontvpg.currentTooltipId){frontvpg.closeTooltip();return false;}
frontvpg.currentTooltipId="";$.each(frontvpg.secondTooltipTablet,function(index,value){$(document.getElementById(value)).removeClass('open');});frontvpg.openTooltip(this);return false;}}}}
var current_icon=$(this).find('i.filter-icon-right');if(frontvpg.targets.mobile&&currentTooltipId!="container-destination"){var open_class=current_icon.attr('data-close');var close_class=current_icon.attr('data-open');current_icon.removeClass(open_class).addClass(close_class);current_icon.attr('data-open',open_class).attr('data-close',close_class);}
if(currentTooltipId==frontvpg.currentTooltipId){if(frontvpg.targets.desktop&&frontvpg.removeMouseOver==false){if(jQuery.inArray(currentTooltipId,frontvpg.openTooltipOnMouseOver)!=-1){frontvpg.removeMouseOver=true;return false;}}
if($(event.target).parents('.tooltip-link').length>0||($(event.target).hasClass('tooltip-link')&&$(event.target).length>0)){frontvpg.closeTooltip();}
return false;}else{frontvpg.closeTooltip();if(!frontvpg.targets.desktop||jQuery.inArray(currentTooltipId,frontvpg.specificTootlipCondition)!=-1){$(this).trigger('trackClick');frontvpg.openTooltip(this);}}
return false;break;case'mouseenter':case'mouseleave':if(!frontvpg.targets.desktop||$(document.getElementById('criteria-box')).hasClass('open')){return false;}
if(jQuery.inArray(currentTooltipId,frontvpg.openTooltipOnMouseOver)!=-1){if(currentTooltipId==frontvpg.currentTooltipId){if(frontvpg.removeMouseOver==false){frontvpg.closeTooltip();}}else{frontvpg.removeMouseOver=false;frontvpg.closeTooltip();}
if(event.type=="mouseenter"){frontvpg.openTooltip(this);}}
break;}});};frontvpg.closeTooltip=function(){if(jQuery.inArray(frontvpg.currentTooltipId,frontvpg.openTooltipWithSlideEffect)!=-1){$(document.getElementById(frontvpg.currentTooltipId)).slideUp();}
frontvpg.currentTooltipId="";$('.open').removeClass('open');};frontvpg.openTooltip=function(event){var currentTooltipId=$(event).attr('data-tooltip');var currentTooltip=$(document.getElementById(currentTooltipId));if(jQuery.inArray(currentTooltipId,frontvpg.openTooltipWithSlideEffect)!=-1){currentTooltip.slideDown();}
var left=(!frontvpg.targets.mobile)?($(event).offset().left-$('.reset.link-box').offset().left)+parseInt($(event).css('margin-left')):0;var top=(!frontvpg.targets.mobile)?($(event).offset().top-$('.reset.link-box').offset().top)+parseInt($(event).height()):0;if(jQuery.inArray(currentTooltipId,frontvpg.openTooltipOnMouseOver)!=-1){left=0;}
if(frontvpg.targets.desktop){left=parseInt($(event).css('margin-left'));}
if(frontvpg.targets.tablet&&jQuery.inArray(currentTooltipId,frontvpg.secondTooltipTablet)!=-1){top-=parseInt($(event).height());}
currentTooltip.addClass('open').css({'left':left,'top':top});frontvpg.currentTooltipId=currentTooltipId;};frontvpg.toggleIconMoreCriteria=function(){var iconCriteria=$("a[data-tooltip=criteria-box]").children('i');if(iconCriteria.hasClass('icon-more')){iconCriteria.attr('class','icon-less');}else{iconCriteria.attr('class','icon-more');}};frontvpg.ymd2Date=function(str){if(!/^(\d){8}$/.test(str))return"invalid date";var y=str.substr(0,4),m=str.substr(4,2)-1,d=str.substr(6,2);return new Date(y,m,d);};frontvpg.toggleHeaderRibbon=function(){$('.header-ribbon').blindToggle('slow');};frontvpg.registerListenerForHeaderRibbon=function(){$('.header-ribbon').on('click','.close-ribbon-result',function(event){event.preventDefault();event.stopPropagation();frontvpg.toggleHeaderRibbon();if($(this).attr('id')=='close-wd-cross'){$(document.getElementById('ribbon-wd')).css('display','none');frontvpg.expireCookieWelcomeDream();}
if($(this).attr('id')=='close-ftux-cross'){$(document.getElementById('ribbon-ftux')).css('display','none');$.get('/homepage/endFtuxAjax');}});};frontvpg.expireCookieWelcomeDream=function(){if(frontvpg.getCookie(frontvpg.cookieNameWelcomeDream)!=null){var timestampExpires=parseInt(frontvpg.getCookie(frontvpg.cookieNameWelcomeDream).replace('(','').replace(')',''),10)*1000;var cookieExpires=new Date(timestampExpires);document.cookie=frontvpg.cookieNameWelcomeDream+"=false; path=/ ; domain="+frontvpg.cookieDomain+"; expires="+cookieExpires;}};frontvpg.manageTrailer=function(data){if(data['nr_of_images']>=frontvpg.nbImageMinTrailer){frontvpg.trailer[data.id]={"title":data.title,"images":data.images};return data['show_trailer'];}
return false;};frontvpg.manageSchedule=function(formatDate,isNext){var d1=new Date();var remaining=formatDate-Math.round(+d1/1000);var obj=frontvpg.convert(remaining);var out,hours,minutes=0;var remainingDay={now:{singular:frontvpg.remainingDay,plural:frontvpg.remainingDays},next:{singular:frontvpg.nextRemainingDay,plural:frontvpg.nextRemainingDays}};var remainingHour={now:{singular:frontvpg.remainingHour,plural:frontvpg.remainingHours},next:{singular:frontvpg.nextRemainingHour,plural:frontvpg.nextRemainingHours}};var typeSaleDay=remainingDay['now'];var typeSaleHour=remainingHour['now'];if(isNext===true){typeSaleDay=remainingDay['next'];typeSaleHour=remainingHour['next'];}
for(var prop in obj){if(obj.hasOwnProperty(prop)){if(prop=="days"&&obj[prop]>0){var days=(obj[prop]==1)?typeSaleDay['singular']:typeSaleDay['plural'];return days.replace('%d',obj[prop]);}else if(prop=="hours"&&obj[prop]>=0){hours=obj[prop];}else if(prop=="minutes"){if(obj[prop]==0)return out;minutes=obj[prop];var minutesText=(minutes==1)?typeSaleHour['singular']:typeSaleHour['plural'];var matchingValues={'%h':hours,'%m':minutes};out=minutesText.replace(/%h|%m/g,function(matched){return matchingValues[matched];});return out;}}}
return out;};frontvpg.initLastMinutes=function(){if(frontvpg.targets.mobile){$(document.getElementById('seeLess')).css('display','none');$(document.getElementById('seeMore')).css('display','none');}else{if($('#openLastMinutes i').hasClass('icon-arrow-down-t1')){$(document.getElementById('seeMore')).css('display','inline-block');$(document.getElementById('seeLess')).css('display','none');}else{$(document.getElementById('seeLess')).css('display','inline-block');$(document.getElementById('seeMore')).css('display','none');}
if(($(document.getElementById('seeMore')).hasClass('hidden-desktop')&&frontvpg.targets.desktop)||($(document.getElementById('seeMore')).hasClass('hidden-tablet')&&frontvpg.targets.tablet)){$(document.getElementById('seeMore')).css('display','none');}}
var arrowLastMinutes=$(document.getElementById('arrowLastMinutes'));if(arrowLastMinutes.hasClass('icon-arrow-down-t1')){frontvpg.closeLastMinutes();}else{frontvpg.openLastMinutes();}};frontvpg.buildThemeEventUrl=function(id){var homepageUrl='/thematique/ventes';var type='c_cat';if(this.isEvent){type='c_evt';}
if(this.isThematique){type='c_th';}
return homepageUrl+'#filter/'+type+'='+id+'/1';};$(function(){frontvpg.remainingHours="Reste %h h %m m";frontvpg.remainingHour="Reste %h h %m m";frontvpg.remainingDay="Reste %d jour";frontvpg.remainingDays="Reste %d jours";frontvpg.nextRemainingDays="Ouvre dans %d jours";frontvpg.nextRemainingDay="Ouvre dans %d jour";frontvpg.nextRemainingHours="Ouvre dans %h h %m m";frontvpg.nextRemainingHour="Ouvre dans %h h %m m";frontvpg.homepageUrl="/thematique/ventes";frontvpg.hashModalName="modal-text";frontvpg.hashModalUsed.push("modal-text","modal-trailer");frontvpg.hashModalContent="modal-text";frontvpg.hashModalTrailer="modal-trailer";frontvpg.nbImageMinTrailer='4';frontvpg.trailer=[];frontvpg.salesCookie=eval(frontvpg.getCookie('sale_ids'));frontvpg.themesCookie=eval(frontvpg.getCookie('theme_ids'));frontvpg.alreadySubscribeSale="Vous êtes déjà inscrit";frontvpg.validateSubscribeSale="{{ validateSubscribeNextSale }}";frontvpg.trailerImgFormat="bd";frontvpg.criteriaLabels={};frontvpg.loaderTextTranslation="Chargement des ventes";frontvpg.templateParams={btn_subscribe:"S\'inscrire à la vente",btn_admin:frontvpg.adminSuffix+" homepage.button.sale.admin",btn_already_sub:frontvpg.alreadySubscribeSale,nb_sales:"ventes",main_facebook_page_url:"https://www.facebook.com/VoyagePrive",is_subscribe:"Vous êtes déjà inscrit",header_sign:"S\'inscrire"};frontvpg.openLastMinutes=function(){var arrowLastMinutes=$(document.getElementById('arrowLastMinutes'));if(frontvpg.targets.desktop||frontvpg.targets.tablet){$(document.getElementById('seeMore')).css('display','none');$(document.getElementById('seeLess')).css('display','inline-block');}
arrowLastMinutes.removeClass('icon-arrow-down-t1').addClass('icon-arrow-up-t1');$(document.getElementById('lastMinutes')).css('max-height','none');$(document.getElementById('lastMinutes')).css('overflow','auto');frontvpg.calculateStickyValues();};frontvpg.closeLastMinutes=function(){var arrowLastMinutes=$(document.getElementById('arrowLastMinutes'));if(frontvpg.targets.desktop){$(document.getElementById('lastMinutes')).css('max-height','130px');$(document.getElementById('lastMinutes')).css('overflow','hidden');}else if(frontvpg.targets.tablet){$(document.getElementById('lastMinutes')).css('max-height','130px');$(document.getElementById('lastMinutes')).css('overflow','hidden');}else{$(document.getElementById('lastMinutes')).css('max-height','53px');$(document.getElementById('lastMinutes')).css('overflow','hidden');}
if(frontvpg.targets.desktop||frontvpg.targets.tablet){$(document.getElementById('seeLess')).css('display','none');$(document.getElementById('seeMore')).css('display','inline-block');}
arrowLastMinutes.removeClass('icon-arrow-up-t1').addClass('icon-arrow-down-t1');frontvpg.calculateStickyValues();};$(document.getElementById('openLastMinutes')).on('click',function(){var arrowLastMinutes=$(document.getElementById('arrowLastMinutes'));if(arrowLastMinutes.hasClass('icon-arrow-down-t1')){frontvpg.openLastMinutes();}else{frontvpg.closeLastMinutes();}});frontvpg.initSDV(frontvpg.sdvCallback);frontvpg.initFilters();frontvpg.initTooltip();frontvpg.initClickReturnFilters();frontvpg.updateKillerDearPictures();frontvpg.handleTrackingHomepagePage();var pickerSlider=frontvpg.initCalendar(true);frontvpg.pickerDeparture=pickerSlider[0];frontvpg.sliderDeparture=pickerSlider[1];$(document.getElementById('departure-close')).on('click',function(event){event.preventDefault();event.stopPropagation();frontvpg.closeTooltip();});frontvpg.initBtnSearchMobile();frontvpg.initPlaceholders();frontvpg.clickSubscribe=function(saleId,element,nopopup,callback){if(typeof element!=='undefined'&&$(element).hasClass('noguest')&&frontvpg.accType=='2'){initModalTrailer();$(document.getElementById('btnSignupHeaderGuest')).click();return;}
$.getJSON('/homepage/subscribeToSaleAjax',{'saleId':saleId},function(data){if(data['error']=='00'){$('#modal-text #modal-label').html(data['title']);$('#modal-text .modal-content').html(data['text']);var currentSaleCookie={};var now=new Date();var cookieExpires=now.setFullYear(now.getFullYear()+1);if(frontvpg.salesCookie!=null&&typeof frontvpg.salesCookie!=="undefined"){currentSaleCookie=frontvpg.salesCookie;frontvpg.salesCookie=currentSaleCookie;}
currentSaleCookie[saleId]=1;document.cookie="sale_ids="+JSON.stringify(currentSaleCookie)+"; path=/ ; domain="+frontvpg.cookieDomain+"; expires="+cookieExpires;$("article[id="+saleId+"]").find('.next-sale-btn > .btn').html(frontvpg.alreadySubscribeSale);$("#rsSubscribe-off-"+saleId).html(frontvpg.alreadySubscribeSale);;if(callback){callback();}}else{$('#modal-text .modal-content').html(data['error_msg']);alert(data['error_msg']);}
if(!nopopup){frontvpg.openModal=true;frontvpg.currentHash=window.location.hash;window.location.href='#'+frontvpg.hashModalContent;}});};$(window).load(function(){frontvpg.initKillerDeal();});frontvpg.initKillerDeal=function(){if($(document.getElementById('killerdeal')&&document.getElementById('killerdeal').length!=0&&frontvpg.targets.mobile)){var newkillerDealHeight=$('#killerdeal .rsOverflow').height()+90;$('#killerdeal .rsOverflow').css('height',newkillerDealHeight+'px');}}
frontvpg.clickTrailer=function(saleId){if(typeof frontvpg.isOpenTrailer=="undefined"||!frontvpg.isOpenTrailer){frontvpg.isOpenTrailer=true;var RScontainer=$(document.getElementById('modal-trailer')).find('.modal-content');$('body').prepend('<div class="vpRoyalSlider_loading"><img src="/s/images/loader.gif"/></div>');var currentSale=frontvpg.trailer[saleId].images,count=currentSale.length;var pictureContent=$(document.getElementById('picture_content'));$.each(currentSale,function(index,trailer){if(trailer.active===true){pictureContent.find('.rsImg').attr('src',frontvpg.dynamicPath(frontvpg.trailerImgFormat,trailer.path));pictureContent.find('.rsImg').attr('alt',trailer.legend);pictureContent.find('.trailer-link').attr('alt',trailer.legend);RScontainer.find(document.getElementById('trailerContainer')).append(pictureContent.html());}
if(!--count){frontvpg.openModal=true;$(window).unbind('hashchange',frontvpg.myHashChange);frontvpg.currentHash=window.location.hash;window.location.href='#'+frontvpg.hashModalTrailer;frontvpg.initTrailer(saleId);};});}};frontvpg.oldBreakPoint=frontvpg.currentBreakPoint;$(window).on('resize',function(){clearTimeout(frontvpg.timeoutResize);frontvpg.timeoutResize=setTimeout(function(){if($(document.getElementById('filters')).offset()){frontvpg.showFilters=$(document.getElementById('filters')).offset().top;}else{frontvpg.showFilters=0;}
if(frontvpg.currentBreakPoint!=frontvpg.oldBreakPoint){frontvpg.oldBreakPoint=frontvpg.currentBreakPoint;$.each(frontvpg.openTooltipWithSlideEffect,function(index,value){$(document.getElementById(value)).css('display','');});frontvpg.closeTooltip();frontvpg.initFilters();frontvpg.initTooltip();frontvpg.updateKillerDearPictures();frontvpg.manageDestinationInput();if(!frontvpg.targets.mobile){$(document.getElementById('filters')).show();}
if($(document.getElementById('lastMinutes')).length){frontvpg.initLastMinutes();}
if($(document.getElementById('ribbon-wd')).length!=0){frontvpg.calculateImageWdPosition();}}
frontvpg.initKillerDeal();if(frontvpg.targets.desktop||frontvpg.targets.tablet){frontvpg.stickyObjects('header','filters');}else{frontvpg.stickyObjects('header','navFilters');}
frontvpg.lazyScrollSizes(true);},500);});frontvpg.eventClassChange("criteria-box",function(){frontvpg.toggleIconMoreCriteria();});frontvpg.manageToggleMenu($('#menu .menu-link'));$('.reset,#btn-reset-dedicated-showroom').on('click',function(){window.location.hash='';if(typeof frontvpg.currentSelectize!='undefined')frontvpg.currentSelectize.clear();});frontvpg.registerListenerForHeaderRibbon();frontvpg.registerListenerForExpandableText();$(document).on('cssmodal:hide',function(event){var activeElement=CSSModal.activeElement;if(activeElement.id==frontvpg.hashModalTrailer){initModalTrailer();}});function initModalTrailer(){$('#'+frontvpg.hashModalTrailer).find('.royalSlider').empty();$('.vpRoyalSlider_loading').remove();$(document.getElementById('modal-trailer')).hide();if(typeof sliderTrailer!=="undefined"&&!jQuery.isEmptyObject(sliderTrailer)){frontvpg.isOpenTrailer=false;sliderTrailer.destroy();delete sliderTrailer;}}});if($(document.getElementById('ribbon-wd')).length!=0){frontvpg.calculateImageWdPosition();}}(window.jQuery);;
(function(l){function t(b,f){var c,g,a=this,e=navigator.userAgent.toLowerCase();a.uid=l.rsModules.uid++;a.ns=".rs"+a.uid;var d=document.createElement("div").style,j=["webkit","Moz","ms","O"],h="",k=0;for(c=0;c<j.length;c++)g=j[c],!h&&g+"Transform"in d&&(h=g),g=g.toLowerCase(),window.requestAnimationFrame||(window.requestAnimationFrame=window[g+"RequestAnimationFrame"],window.cancelAnimationFrame=window[g+"CancelAnimationFrame"]||window[g+"CancelRequestAnimationFrame"]);window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-k)),d=window.setTimeout(function(){a(b+c)},c);k=b+c;return d});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});a.isIPAD=e.match(/(ipad)/);j=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];c=j[1]||"";g=j[2]||"0";j={};c&&(j[c]=!0,j.version=g);j.chrome&&(j.webkit=!0);a._a=j;a.isAndroid=-1<e.indexOf("android");a.slider=l(b);a.ev=l(a);a._b=l(document);a.st=l.extend({},l.fn.royalSlider.defaults,f);a._c=a.st.transitionSpeed;a._d=0;if(a.st.allowCSS3&&(!j.webkit||a.st.allowCSS3OnWebkit))e=h+(h?"T":"t"),a._e=e+"ransform"in d&&e+"ransition"in d,a._e&&(a._f=h+(h?"P":"p")+"erspective"in d);h=h.toLowerCase();a._g="-"+h+"-";a._h="vertical"===a.st.slidesOrientation?!1:!0;a._i=a._h?"left":"top";a._j=a._h?"width":"height";a._k=-1;a._l="fade"===a.st.transitionType?!1:!0;a._l||(a.st.sliderDrag=!1,a._m=10);a._n="z-index:0; display:none; opacity:0;";a._o=0;a._p=0;a._q=0;l.each(l.rsModules,function(b,c){"uid"!==b&&c.call(a)});a.slides=[];a._r=0;(a.st.slides?l(a.st.slides):a.slider.children().detach()).each(function(){a._s(this,!0)});a.st.randomizeSlides&&a.slides.sort(function(){return 0.5-Math.random()});a.numSlides=a.slides.length;a._t();a.st.startSlideId?a.st.startSlideId>a.numSlides-1&&(a.st.startSlideId=a.numSlides-
1):a.st.startSlideId=0;a._o=a.staticSlideId=a.currSlideId=a._u=a.st.startSlideId;a.currSlide=a.slides[a.currSlideId];a._v=0;a.msTouch=!1;a.slider.addClass((a._h?"rsHor":"rsVer")+(a._l?"":" rsFade"));d='<div class="rsOverflow"><div class="rsContainer">';a.slidesSpacing=a.st.slidesSpacing;a._w=(a._h?a.slider.width():a.slider.height())+a.st.slidesSpacing;a._x=Boolean(0<a._y);1>=a.numSlides&&(a._z=!1);a._a1=a._z&&a._l?2===a.numSlides?1:2:0;a._b1=6>a.numSlides?a.numSlides:6;a._c1=0;a._d1=0;a.slidesJQ=[];for(c=0;c<a.numSlides;c++)a.slidesJQ.push(l('<div style="'+(a._l?"":c!==a.currSlideId?a._n:"z-index:0;")+'" class="rsSlide "></div>'));a._e1=d=l(d+"</div></div>");h=a.ns;a.msEnabled=window.navigator.msPointerEnabled;a.msEnabled?(a.msTouch=Boolean(1<window.navigator.msMaxTouchPoints),a.hasTouch=!1,a._n1=0.2,a._j1="MSPointerDown"+h,a._k1="MSPointerMove"+h,a._l1="MSPointerUp"+h,a._m1="MSPointerCancel"+h):(a._j1="mousedown"+h,a._k1="mousemove"+h,a._l1="mouseup"+h,a._m1="mouseup"+h,"ontouchstart"in
window||"createTouch"in document?(a.hasTouch=!0,a._j1+=" touchstart"+h,a._k1+=" touchmove"+h,a._l1+=" touchend"+h,a._m1+=" touchcancel"+h,a._n1=0.5,a.st.sliderTouch&&(a._f1=!0)):(a.hasTouch=!1,a._n1=0.2));a.st.sliderDrag&&(a._f1=!0,j.msie||j.opera?a._g1=a._h1="move":j.mozilla?(a._g1="-moz-grab",a._h1="-moz-grabbing"):j.webkit&&-1!=navigator.platform.indexOf("Mac")&&(a._g1="-webkit-grab",a._h1="-webkit-grabbing"),a._i1());a.slider.html(d);a._o1=a.st.controlsInside?a._e1:a.slider;a._p1=a._e1.children(".rsContainer");a.msEnabled&&a._p1.css("-ms-touch-action",a._h?"pan-y":"pan-x");a._q1=l('<div class="rsPreloader"></div>');d=a._p1.children(".rsSlide");a._r1=a.slidesJQ[a.currSlideId];a._s1=0;a._e?(a._t1="transition-property",a._u1="transition-duration",a._v1="transition-timing-function",a._w1=a._x1=a._g+"transform",a._f?(j.webkit&&!j.chrome&&a.slider.addClass("rsWebkit3d"),/iphone|ipad|ipod/gi.test(navigator.appVersion),a._y1="translate(",a._z1="px, ",a._a2="px)"):(a._y1="translate(",a._z1="px, ",a._a2="px)"),a._l?a._p1[a._g+a._t1]=a._g+"transform":(h={},h[a._g+a._t1]="opacity",h[a._g+a._u1]=a.st.transitionSpeed+"ms",h[a._g+a._v1]=a.st.css3easeInOut,d.css(h))):(a._x1="left",a._w1="top");var n;l(window).on("resize"+a.ns,function(){n&&clearTimeout(n);n=setTimeout(function(){a.updateSliderSize()},50)});a.ev.trigger("rsAfterPropsSetup");a.updateSliderSize();a.st.keyboardNavEnabled&&a._b2();if(a.st.arrowsNavHideOnTouch&&(a.hasTouch||a.msTouch))a.st.arrowsNav=!1;a.st.arrowsNav&&(d=a._o1,l('<div class="rsArrow rsArrowLeft"><div class="rsArrowIcn"></div></div><div class="rsArrow rsArrowRight"><div class="rsArrowIcn"></div></div>').appendTo(d),a._c2=d.children(".rsArrowLeft").click(function(b){b.preventDefault();a.prev()}),a._d2=d.children(".rsArrowRight").click(function(b){b.preventDefault();a.next()}),a.st.arrowsNavAutoHide&&!a.hasTouch&&(a._c2.addClass("rsHidden"),a._d2.addClass("rsHidden"),d.one("mousemove.arrowshover",function(){a._c2.removeClass("rsHidden");a._d2.removeClass("rsHidden")}),d.hover(function(){a._e2||(a._c2.removeClass("rsHidden"),a._d2.removeClass("rsHidden"))},function(){a._e2||(a._c2.addClass("rsHidden"),a._d2.addClass("rsHidden"))})),a.ev.on("rsOnUpdateNav",function(){a._f2()}),a._f2());if(a._f1)a._p1.on(a._j1,function(b){a._g2(b)});else a.dragSuccess=!1;var m=["rsPlayBtnIcon","rsPlayBtn","rsCloseVideoBtn","rsCloseVideoIcn"];a._p1.click(function(b){if(!a.dragSuccess){var c=l(b.target).attr("class");if(-1!==l.inArray(c,m)&&a.toggleVideo())return!1;if(a.st.navigateByClick&&!a._h2){if(l(b.target).closest(".rsNoDrag",a._r1).length)return!0;a._i2(b)}a.ev.trigger("rsSlideClick")}}).on("click.rs","a",function(){if(a.dragSuccess)return!1;a._h2=!0;setTimeout(function(){a._h2=!1},3)});a.ev.trigger("rsAfterInit")}l.rsModules||(l.rsModules={uid:0});t.prototype={constructor:t,_i2:function(b){b=b[this._h?"pageX":"pageY"]-this._j2;b>=this._q?this.next():0>b&&this.prev()},_t:function(){var b;b=this.st.numImagesToPreload;if(this._z=this.st.loop)2===this.numSlides?(this._z=!1,this.st.loopRewind=!0):2>this.numSlides&&(this.st.loopRewind=this._z=!1);this._z&&0<b&&(4>=this.numSlides?b=1:this.st.numImagesToPreload>(this.numSlides-1)/2&&(b=Math.floor((this.numSlides-
1)/2)));this._y=b},_s:function(b,f){function c(a,b){b?e.images.push(a.attr(b)):e.images.push(a.text());if(j){j=!1;e.caption="src"===b?a.attr("alt"):a.contents();e.image=e.images[0];e.videoURL=a.attr("data-rsVideo");var c=a.attr("data-rsw"),d=a.attr("data-rsh");"undefined"!==typeof c&&!1!==c&&"undefined"!==typeof d&&!1!==d?(e.iW=parseInt(c,10),e.iH=parseInt(d,10)):g.st.imgWidth&&g.st.imgHeight&&(e.iW=g.st.imgWidth,e.iH=g.st.imgHeight)}}var g=this,a,e={},d,j=!0;b=l(b);g._k2=b;g.ev.trigger("rsBeforeParseNode",[b,e]);if(!e.stopParsing)return b=g._k2,e.id=g._r,e.contentAdded=!1,g._r++,e.images=[],e.isBig=!1,e.hasCover||(b.hasClass("rsImg")?(d=b,a=!0):(d=b.find(".rsImg"),d.length&&(a=!0)),a?(e.bigImage=d.eq(0).attr("data-rsBigImg"),d.each(function(){var a=l(this);a.is("a")?c(a,"href"):a.is("img")?c(a,"src"):c(a)})):b.is("img")&&(b.addClass("rsImg rsMainSlideImage"),c(b,"src"))),d=b.find(".rsCaption"),d.length&&(e.caption=d.remove()),e.content=b,g.ev.trigger("rsAfterParseNode",[b,e]),f&&g.slides.push(e),0===e.images.length&&(e.isLoaded=!0,e.isRendered=!1,e.isLoading=!1,e.images=null),e},_b2:function(){var b=this,f,c,g=function(a){37===a?b.prev():39===a&&b.next()};b._b.on("keydown"+b.ns,function(a){if(!b._l2&&(c=a.keyCode,(37===c||39===c)&&!f))g(c),f=setInterval(function(){g(c)},700)}).on("keyup"+b.ns,function(){f&&(clearInterval(f),f=null)})},goTo:function(b,f){b!==this.currSlideId&&this._m2(b,this.st.transitionSpeed,!0,!f)},destroy:function(b){this.ev.trigger("rsBeforeDestroy");this._b.off("keydown"+
this.ns+" keyup"+this.ns+" "+this._k1+" "+this._l1);this._p1.off(this._j1+" click");this.slider.data("royalSlider",null);l.removeData(this.slider,"royalSlider");l(window).off("resize"+this.ns);b&&this.slider.remove();this.ev=this.slider=this.slides=null},_n2:function(b,f){function c(c,e,f){c.isAdded?(g(e,c),a(e,c)):(f||(f=d.slidesJQ[e]),c.holder?f=c.holder:(f=d.slidesJQ[e]=l(f),c.holder=f),c.appendOnLoaded=!1,a(e,c,f),g(e,c),d._p2(c,f,b),c.isAdded=!0)}function g(a,c){c.contentAdded||(d.setItemHtml(c,b),b||(c.contentAdded=!0))}function a(a,b,c){d._l&&(c||(c=d.slidesJQ[a]),c.css(d._i,(a+d._d1+p)*d._w))}function e(a){if(k){if(a>n-1)return e(a-n);if(0>a)return e(n+a)}return a}var d=this,j,h,k=d._z,n=d.numSlides;if(!isNaN(f))return e(f);var m=d.currSlideId,p,q=b?Math.abs(d._o2-d.currSlideId)>=d.numSlides-1?0:1:d._y,r=Math.min(2,q),u=!1,t=!1,s;for(h=m;h<m+1+r;h++)if(s=e(h),(j=d.slides[s])&&(!j.isAdded||!j.positionSet)){u=!0;break}for(h=m-1;h>m-1-r;h--)if(s=e(h),(j=d.slides[s])&&(!j.isAdded||!j.positionSet)){t=!0;break}if(u)for(h=m;h<m+q+1;h++)s=e(h),p=Math.floor((d._u-(m-h))/d.numSlides)*d.numSlides,(j=d.slides[s])&&c(j,s);if(t)for(h=m-1;h>m-1-q;h--)s=e(h),p=Math.floor((d._u-(m-h))/n)*n,(j=d.slides[s])&&c(j,s);if(!b){r=e(m-q);m=e(m+q);q=r>m?0:r;for(h=0;h<n;h++)if(!(r>m&&h>r-1)&&(h<q||h>m))if((j=d.slides[h])&&j.holder)j.holder.detach(),j.isAdded=!1}},setItemHtml:function(b,f){var c=this,g=function(){if(b.images){if(!b.isLoading){var e,f;b.content.hasClass("rsImg")?(e=b.content,f=!0):e=b.content.find(".rsImg:not(img)");e&&!e.is("img")&&e.each(function(){var a=l(this),c='<img class="rsImg" src="'+(a.is("a")?a.attr("href"):a.text())+'" />';f?b.content=l(c):a.replaceWith(c)});e=f?b.content:b.content.find("img.rsImg");h();e.eq(0).addClass("rsMainSlideImage");b.iW&&b.iH&&(b.isLoaded||c._q2(b),d());b.isLoading=!0;if(b.isBig)l("<img />").on("load.rs error.rs",function(){l(this).off("load.rs error.rs");a([this],!0)}).attr("src",b.image);else{b.loaded=[];b.numStartedLoad=0;e=function(){l(this).off("load.rs error.rs");b.loaded.push(this);b.loaded.length===b.numStartedLoad&&a(b.loaded,!1)};for(var g=0;g<b.images.length;g++){var j=l("<img />");b.numStartedLoad++;j.on("load.rs error.rs",e).attr("src",b.images[g])}}}}else b.isRendered=!0,b.isLoaded=!0,b.isLoading=!1,d(!0)},a=function(a,c){if(a.length){var d=a[0];if(c!==b.isBig)(d=b.holder.children())&&1<d.length&&k();else if(b.iW&&b.iH)e();else if(b.iW=d.width,b.iH=d.height,b.iW&&b.iH)e();else{var f=new Image;f.onload=function(){f.width?(b.iW=f.width,b.iH=f.height,e()):setTimeout(function(){f.width&&(b.iW=f.width,b.iH=f.height);e()},1E3)};f.src=d.src}}else e()},e=function(){b.isLoaded=!0;b.isLoading=!1;d();k();j()},d=function(){if(!b.isAppended&&c.ev){var a=c.st.visibleNearby,d=b.id-c._o;if(!f&&!b.appendOnLoaded&&c.st.fadeinLoadedSlide&&(0===d||(a||c._r2||c._l2)&&(-1===d||1===d)))a={visibility:"visible",opacity:0},a[c._g+"transition"]="opacity 400ms ease-in-out",b.content.css(a),setTimeout(function(){b.content.css("opacity",1)},16);b.holder.find(".rsPreloader").length?b.holder.append(b.content):b.holder.html(b.content);b.isAppended=!0;b.isLoaded&&(c._q2(b),j());b.sizeReady||(b.sizeReady=!0,setTimeout(function(){c.ev.trigger("rsMaybeSizeReady",b)},100))}},j=function(){!b.loadedTriggered&&c.ev&&(b.isLoaded=b.loadedTriggered=!0,b.holder.trigger("rsAfterContentSet"),c.ev.trigger("rsAfterContentSet",b))},h=function(){c.st.usePreloader&&b.holder.html(c._q1.clone())},k=function(){if(c.st.usePreloader){var a=b.holder.find(".rsPreloader");a.length&&a.remove()}};b.isLoaded?d():f?!c._l&&b.images&&b.iW&&b.iH?g():(b.holder.isWaiting=!0,h(),b.holder.slideId=-99):g()},_p2:function(b){this._p1.append(b.holder);b.appendOnLoaded=!1},_g2:function(b,f){var c=this,g,a="touchstart"===b.type;c._s2=a;c.ev.trigger("rsDragStart");if(l(b.target).closest(".rsNoDrag",c._r1).length)return c.dragSuccess=!1,!0;!f&&c._r2&&(c._t2=!0,c._u2());c.dragSuccess=!1;if(c._l2)a&&(c._v2=!0);else{a&&(c._v2=!1);c._w2();if(a){var e=b.originalEvent.touches;if(e&&0<e.length)g=e[0],1<e.length&&(c._v2=!0);else return}else b.preventDefault(),g=b,c.msEnabled&&(g=g.originalEvent);c._l2=!0;c._b.on(c._k1,function(a){c._x2(a,f)}).on(c._l1,function(a){c._y2(a,f)});c._z2="";c._a3=!1;c._b3=g.pageX;c._c3=g.pageY;c._d3=c._v=(!f?c._h:c._e3)?g.pageX:g.pageY;c._f3=0;c._g3=0;c._h3=!f?c._p:c._i3;c._j3=(new Date).getTime();if(a)c._e1.on(c._m1,function(a){c._y2(a,f)})}},_k3:function(b,f){if(this._l3){var c=this._m3,g=b.pageX-this._b3,a=b.pageY-this._c3,e=this._h3+g,d=this._h3+a,j=!f?this._h:this._e3,e=j?e:d,d=this._z2;this._a3=!0;this._b3=b.pageX;this._c3=b.pageY;"x"===d&&0!==g?this._f3=0<g?1:-1:"y"===d&&0!==a&&(this._g3=0<a?1:-1);d=j?this._b3:this._c3;g=j?g:a;f?e>this._n3?e=this._h3+g*this._n1:e<this._o3&&(e=this._h3+g*this._n1):this._z||(0>=this.currSlideId&&0<d-this._d3&&(e=this._h3+g*this._n1),this.currSlideId>=this.numSlides-1&&0>d-this._d3&&(e=this._h3+g*this._n1));this._h3=e;200<c-this._j3&&(this._j3=c,this._v=d);f?this._q3(this._h3):this._l&&this._p3(this._h3)}},_x2:function(b,f){var c=this,g,a="touchmove"===b.type;if(!c._s2||a){if(a){if(c._r3)return;var e=b.originalEvent.touches;if(e){if(1<e.length)return;g=e[0]}else return}else g=b,c.msEnabled&&(g=g.originalEvent);c._a3||(c._e&&(!f?c._p1:c._s3).css(c._g+c._u1,"0s"),function j(){c._l2&&(c._t3=requestAnimationFrame(j),c._u3&&c._k3(c._u3,f))}());if(c._l3)b.preventDefault(),c._m3=(new Date).getTime(),c._u3=g;else if(e=!f?c._h:c._e3,g=Math.abs(g.pageX-c._b3)-Math.abs(g.pageY-c._c3)-(e?-7:7),7<g){if(e)b.preventDefault(),c._z2="x";else if(a){c._v3();return}c._l3=!0}else if(-7>g){if(e){if(a){c._v3();return}}else b.preventDefault(),c._z2="y";c._l3=!0}}},_v3:function(){this._r3=!0;this._a3=this._l2=!1;this._y2()},_y2:function(b,f){function c(a){return 100>a?100:500<a?500:a}function g(b,d){if(a._l||f)j=(-a._u-a._d1)*a._w,h=Math.abs(a._p-j),a._c=h/d,b&&(a._c+=250),a._c=c(a._c),a._x3(j,!1)}var a=this,e,d,j,h;d="touchend"===b.type||"touchcancel"===b.type;if(!a._s2||d)if(a._s2=!1,a.ev.trigger("rsDragRelease"),a._u3=null,a._l2=!1,a._r3=!1,a._l3=!1,a._m3=0,cancelAnimationFrame(a._t3),a._a3&&(f?a._q3(a._h3):a._l&&a._p3(a._h3)),a._b.off(a._k1).off(a._l1),d&&a._e1.off(a._m1),a._i1(),!a._a3&&!a._v2&&f&&a._w3){var k=l(b.target).closest(".rsNavItem");k.length&&a.goTo(k.index())}else{e=!f?a._h:a._e3;if(!a._a3||"y"===a._z2&&e||"x"===a._z2&&!e)if(!f&&a._t2){a._t2=!1;if(a.st.navigateByClick){a._i2(a.msEnabled?b.originalEvent:b);a.dragSuccess=!0;return}a.dragSuccess=!0}else{a._t2=!1;a.dragSuccess=!1;return}else a.dragSuccess=!0;a._t2=!1;a._z2="";var n=a.st.minSlideOffset;d=d?b.originalEvent.changedTouches[0]:a.msEnabled?b.originalEvent:b;var m=e?d.pageX:d.pageY,p=a._d3;d=a._v;var q=a.currSlideId,r=a.numSlides,u=e?a._f3:a._g3,t=a._z;Math.abs(m-p);e=m-d;d=(new Date).getTime()-a._j3;d=Math.abs(e)/d;if(0===u||1>=r)g(!0,d);else{if(!t&&!f)if(0>=q){if(0<u){g(!0,d);return}}else if(q>=r-1&&0>u){g(!0,d);return}if(f){j=a._i3;if(j>a._n3)j=a._n3;else if(j<a._o3)j=a._o3;else{n=d*d/0.006;k=-a._i3;m=a._y3-a._z3+a._i3;0<e&&n>k?(k+=a._z3/(15/(0.003*(n/d))),d=d*k/n,n=k):0>e&&n>m&&(m+=a._z3/(15/(0.003*(n/d))),d=d*m/n,n=m);k=Math.max(Math.round(d/0.003),50);j+=n*(0>e?-1:1);if(j>a._n3){a._a4(j,k,!0,a._n3,200);return}if(j<a._o3){a._a4(j,k,!0,a._o3,200);return}}a._a4(j,k,!0)}else p+n<m?0>u?g(!1,d):a._m2("prev",c(Math.abs(a._p-(-a._u-a._d1+1)*a._w)/d),!1,!0,!0):p-n>m?0<u?g(!1,d):a._m2("next",c(Math.abs(a._p-(-a._u-a._d1-1)*a._w)/d),!1,!0,!0):g(!1,d)}}},_p3:function(b){b=this._p=b;this._e?this._p1.css(this._x1,this._y1+(this._h?b+this._z1+0:0+this._z1+b)+this._a2):this._p1.css(this._h?this._x1:this._w1,b)},updateSliderSize:function(b){var f,c;if(this.st.autoScaleSlider){var g=this.st.autoScaleSliderWidth,a=this.st.autoScaleSliderHeight;this.st.autoScaleHeight?(f=this.slider.width(),f!=this.width&&(this.slider.css("height",f*(a/g)),f=this.slider.width()),c=this.slider.height()):(c=this.slider.height(),c!=this.height&&(this.slider.css("width",c*(g/a)),c=this.slider.height()),f=this.slider.width())}else f=this.slider.width(),c=this.slider.height();if(b||f!=this.width||c!=this.height){this.width=f;this.height=c;this._b4=f;this._c4=c;this.ev.trigger("rsBeforeSizeSet");this.ev.trigger("rsAfterSizePropSet");this._e1.css({width:this._b4,height:this._c4});this._w=(this._h?this._b4:this._c4)+this.st.slidesSpacing;this._d4=this.st.imageScalePadding;for(f=0;f<this.slides.length;f++)b=this.slides[f],b.positionSet=!1,b&&(b.images&&b.isLoaded)&&(b.isRendered=!1,this._q2(b));if(this._e4)for(f=0;f<this._e4.length;f++)b=this._e4[f],b.holder.css(this._i,(b.id+this._d1)*this._w);this._n2();this._l&&(this._e&&this._p1.css(this._g+"transition-duration","0s"),this._p3((-this._u-
this._d1)*this._w));this.ev.trigger("rsOnUpdateNav")}this._j2=this._e1.offset();this._j2=this._j2[this._i]},appendSlide:function(b,f){var c=this._s(b);if(isNaN(f)||f>this.numSlides)f=this.numSlides;this.slides.splice(f,0,c);this.slidesJQ.splice(f,0,'<div style="'+(this._l?"position:absolute;":this._n)+'" class="rsSlide"></div>');f<this.currSlideId&&this.currSlideId++;this.ev.trigger("rsOnAppendSlide",[c,f]);this._f4(f);f===this.currSlideId&&this.ev.trigger("rsAfterSlideChange")},removeSlide:function(b){var f=this.slides[b];f&&(f.holder&&f.holder.remove(),b<this.currSlideId&&this.currSlideId--,this.slides.splice(b,1),this.slidesJQ.splice(b,1),this.ev.trigger("rsOnRemoveSlide",[b]),this._f4(b),b===this.currSlideId&&this.ev.trigger("rsAfterSlideChange"))},_f4:function(){var b=this,f=b.numSlides,f=0>=b._u?0:Math.floor(b._u/f);b.numSlides=b.slides.length;0===b.numSlides?(b.currSlideId=b._d1=b._u=0,b.currSlide=b._g4=null):b._u=f*b.numSlides+b.currSlideId;for(f=0;f<b.numSlides;f++)b.slides[f].id=f;b.currSlide=b.slides[b.currSlideId];b._r1=b.slidesJQ[b.currSlideId];b.currSlideId>=b.numSlides?b.goTo(b.numSlides-1):0>b.currSlideId&&b.goTo(0);b._t();b._l&&b._z&&b._p1.css(b._g+b._u1,"0ms");b._h4&&clearTimeout(b._h4);b._h4=setTimeout(function(){b._l&&b._p3((-b._u-b._d1)*b._w);b._n2();b._l||b._r1.css({display:"block",opacity:1})},14);b.ev.trigger("rsOnUpdateNav")},_i1:function(){this._f1&&this._l&&(this._g1?this._e1.css("cursor",this._g1):(this._e1.removeClass("grabbing-cursor"),this._e1.addClass("grab-cursor")))},_w2:function(){this._f1&&this._l&&(this._h1?this._e1.css("cursor",this._h1):(this._e1.removeClass("grab-cursor"),this._e1.addClass("grabbing-cursor")))},next:function(b){this._m2("next",this.st.transitionSpeed,!0,!b)},prev:function(b){this._m2("prev",this.st.transitionSpeed,!0,!b)},_m2:function(b,f,c,g,a){var e=this,d,j,h;e.ev.trigger("rsBeforeMove",[b,g]);h="next"===b?e.currSlideId+1:"prev"===b?e.currSlideId-1:b=parseInt(b,10);if(!e._z){if(0>h){e._i4("left",!g);return}if(h>=e.numSlides){e._i4("right",!g);return}}e._r2&&(e._u2(!0),c=!1);j=h-e.currSlideId;h=e._o2=e.currSlideId;var k=e.currSlideId+j;g=e._u;var l;e._z?(k=e._n2(!1,k),g+=j):g=k;e._o=k;e._g4=e.slidesJQ[e.currSlideId];e._u=g;e.currSlideId=e._o;e.currSlide=e.slides[e.currSlideId];e._r1=e.slidesJQ[e.currSlideId];var k=e.st.slidesDiff,m=Boolean(0<j);j=Math.abs(j);var p=Math.floor(h/e._y),q=Math.floor((h+(m?k:-k))/e._y),p=(m?Math.max(p,q):Math.min(p,q))*e._y+(m?e._y-1:0);p>e.numSlides-1?p=e.numSlides-1:0>p&&(p=0);h=m?p-h:h-p;h>e._y&&(h=e._y);if(j>h+k){e._d1+=(j-(h+k))*(m?-1:1);f*=1.4;for(h=0;h<e.numSlides;h++)e.slides[h].positionSet=!1}e._c=f;e._n2(!0);a||(l=!0);d=(-g-e._d1)*e._w;l?setTimeout(function(){e._j4=!1;e._x3(d,b,!1,c);e.ev.trigger("rsOnUpdateNav")},0):(e._x3(d,b,!1,c),e.ev.trigger("rsOnUpdateNav"))},_f2:function(){this.st.arrowsNav&&(1>=this.numSlides?(this._c2.css("display","none"),this._d2.css("display","none")):(this._c2.css("display","block"),this._d2.css("display","block"),!this._z&&!this.st.loopRewind&&(0===this.currSlideId?this._c2.addClass("rsArrowDisabled"):this._c2.removeClass("rsArrowDisabled"),this.currSlideId===this.numSlides-1?this._d2.addClass("rsArrowDisabled"):this._d2.removeClass("rsArrowDisabled"))))},_x3:function(b,f,c,g,a){function e(){var a;if(j&&(a=j.data("rsTimeout")))j!==h&&j.css({opacity:0,display:"none",zIndex:0}),clearTimeout(a),j.data("rsTimeout","");if(a=h.data("rsTimeout"))clearTimeout(a),h.data("rsTimeout","")}var d=this,j,h,k={};isNaN(d._c)&&(d._c=400);d._p=d._h3=b;d.ev.trigger("rsBeforeAnimStart");d._e?d._l?(d._c=parseInt(d._c,10),c=d._g+d._v1,k[d._g+d._u1]=d._c+"ms",k[c]=g?l.rsCSS3Easing[d.st.easeInOut]:l.rsCSS3Easing[d.st.easeOut],d._p1.css(k),g||!d.hasTouch?setTimeout(function(){d._p3(b)},5):d._p3(b)):(d._c=d.st.transitionSpeed,j=d._g4,h=d._r1,h.data("rsTimeout")&&h.css("opacity",0),e(),j&&j.data("rsTimeout",setTimeout(function(){k[d._g+d._u1]="0ms";k.zIndex=0;k.display="none";j.data("rsTimeout","");j.css(k);setTimeout(function(){j.css("opacity",0)},16)},d._c+60)),k.display="block",k.zIndex=d._m,k.opacity=0,k[d._g+d._u1]="0ms",k[d._g+d._v1]=l.rsCSS3Easing[d.st.easeInOut],h.css(k),h.data("rsTimeout",setTimeout(function(){h.css(d._g+d._u1,d._c+"ms");h.data("rsTimeout",setTimeout(function(){h.css("opacity",1);h.data("rsTimeout","")},20))},20))):d._l?(k[d._h?d._x1:d._w1]=b+"px",d._p1.animate(k,d._c,g?d.st.easeInOut:d.st.easeOut)):(j=d._g4,h=d._r1,h.stop(!0,!0).css({opacity:0,display:"block",zIndex:d._m}),d._c=d.st.transitionSpeed,h.animate({opacity:1},d._c,d.st.easeInOut),e(),j&&j.data("rsTimeout",setTimeout(function(){j.stop(!0,!0).css({opacity:0,display:"none",zIndex:0})},d._c+60)));d._r2=!0;d.loadingTimeout&&clearTimeout(d.loadingTimeout);d.loadingTimeout=a?setTimeout(function(){d.loadingTimeout=null;a.call()},d._c+60):setTimeout(function(){d.loadingTimeout=null;d._k4(f)},d._c+60)},_u2:function(b){this._r2=!1;clearTimeout(this.loadingTimeout);if(this._l)if(this._e){if(!b){b=this._p;var f=this._h3=this._l4();this._p1.css(this._g+this._u1,"0ms");b!==f&&this._p3(f)}}else this._p1.stop(!0),this._p=parseInt(this._p1.css(this._x1),10);else 20<this._m?this._m=10:this._m++},_l4:function(){var b=window.getComputedStyle(this._p1.get(0),null).getPropertyValue(this._g+"transform").replace(/^matrix\(/i,"").split(/, |\)$/g),f=0===b[0].indexOf("matrix3d");return parseInt(b[this._h?f?12:4:f?13:5],10)},_m4:function(b,f){return this._e?this._y1+(f?b+this._z1+0:0+this._z1+b)+this._a2:b},_k4:function(){this._l||(this._r1.css("z-index",0),this._m=10);this._r2=!1;this.staticSlideId=this.currSlideId;this._n2();this._n4=!1;this.ev.trigger("rsAfterSlideChange")},_i4:function(b,f){var c=this,g=(-c._u-c._d1)*c._w;if(!(0===c.numSlides||c._r2))if(c.st.loopRewind)c.goTo("left"===b?c.numSlides-1:0,f);else if(c._l){c._c=200;var a=function(){c._r2=!1};c._x3(g+("left"===b?30:-30),"",!1,!0,function(){c._r2=!1;c._x3(g,"",!1,!0,a)})}},_q2:function(b){if(!b.isRendered){var f=b.content,c="rsMainSlideImage",g,a=this.st.imageAlignCenter,e=this.st.imageScaleMode,d;b.videoURL&&(c="rsVideoContainer","fill"!==e?g=!0:(d=f,d.hasClass(c)||(d=d.find("."+c)),d.css({width:"100%",height:"100%"}),c="rsMainSlideImage"));f.hasClass(c)||(f=f.find("."+c));if(f){var j=b.iW,c=b.iH;b.isRendered=!0;if("none"!==e||a){b="fill"!==e?this._d4:0;d=this._b4-2*b;var h=this._c4-2*b,k,l,m={};if("fit-if-smaller"===e&&(j>d||c>h))e="fit";if("fill"===e||"fit"===e)k=d/j,l=h/c,k="fill"==e?k>l?k:l:"fit"==e?k<l?k:l:1,j=Math.ceil(j*k,10),c=Math.ceil(c*k,10);"none"!==e&&(m.width=j,m.height=c,g&&f.find(".rsImg").css({width:"100%",height:"100%"}));a&&(m.marginLeft=Math.floor((d-j)/2)+b,m.marginTop=Math.floor((h-c)/2)+b);f.css(m)}}}}};l.rsProto=t.prototype;l.fn.royalSlider=function(b){var f=arguments;return this.each(function(){var c=l(this);if("object"===typeof b||!b)c.data("royalSlider")||c.data("royalSlider",new t(c,b));else if((c=c.data("royalSlider"))&&c[b])return c[b].apply(c,Array.prototype.slice.call(f,1))})};l.fn.royalSlider.defaults={slidesSpacing:8,startSlideId:0,loop:!1,loopRewind:!1,numImagesToPreload:4,fadeinLoadedSlide:!0,slidesOrientation:"horizontal",transitionType:"move",transitionSpeed:600,controlNavigation:"bullets",controlsInside:!0,arrowsNav:!0,arrowsNavAutoHide:!0,navigateByClick:!0,randomizeSlides:!1,sliderDrag:!0,sliderTouch:!0,keyboardNavEnabled:!1,fadeInAfterLoaded:!0,allowCSS3:!0,allowCSS3OnWebkit:!0,addActiveClass:!1,autoHeight:!1,easeOut:"easeOutSine",easeInOut:"easeInOutSine",minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:!0,imageScalePadding:4,usePreloader:!0,autoScaleSlider:!1,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:!0,arrowsNavHideOnTouch:!1,globalCaption:!1,slidesDiff:2};l.rsCSS3Easing={easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"};l.extend(jQuery.easing,{easeInOutSine:function(b,f,c,g,a){return-g/2*(Math.cos(Math.PI*f/a)-1)+c},easeOutSine:function(b,f,c,g,a){return g*Math.sin(f/a*(Math.PI/2))+c},easeOutCubic:function(b,f,c,g,a){return g*((f=f/a-1)*f*f+1)+c}})})(jQuery,window);(function(c){c.rsProto._o4=function(){var b,a=this;if(a.st.addActiveClass)a.ev.on("rsOnUpdateNav",function(){b&&clearTimeout(b);b=setTimeout(function(){a._g4&&a._g4.removeClass("rsActiveSlide");a._r1&&a._r1.addClass("rsActiveSlide");b=null},50)})};c.rsModules.activeClass=c.rsProto._o4})(jQuery);(function(j){j.extend(j.rsProto,{_p4:function(){function l(){var g=a.currSlide;if(a.currSlide&&a.currSlide.isLoaded&&a._t4!==g){if(0<a._s4.length){for(b=0;b<a._s4.length;b++)clearTimeout(a._s4[b]);a._s4=[]}if(0<a._r4.length){var f;for(b=0;b<a._r4.length;b++)if(f=a._r4[b])a._e?(f.block.css(a._g+a._u1,"0s"),f.block.css(f.css)):f.block.stop(!0).css(f.css),a._t4=null,g.animBlocksDisplayed=!1;a._r4=[]}g.animBlocks&&(g.animBlocksDisplayed=!0,a._t4=g,a._u4(g.animBlocks))}}var a=this,b;a._q4={fadeEffect:!0,moveEffect:"top",moveOffset:20,speed:400,easing:"easeOutSine",delay:200};a.st.block=j.extend({},a._q4,a.st.block);a._r4=[];a._s4=[];a.ev.on("rsAfterInit",function(){l()});a.ev.on("rsBeforeParseNode",function(a,b,d){b=j(b);d.animBlocks=b.find(".rsABlock").css("display","none");d.animBlocks.length||(d.animBlocks=b.hasClass("rsABlock")?b.css("display","none"):!1)});a.ev.on("rsAfterContentSet",function(b,f){f.id===a.slides[a.currSlideId].id&&setTimeout(function(){l()},a.st.fadeinLoadedSlide?300:0)});a.ev.on("rsAfterSlideChange",function(){l()})},_v4:function(j,a){setTimeout(function(){j.css(a)},6)},_u4:function(l){var a=this,b,g,f,d,h,e,m;a._s4=[];l.each(function(l){b=j(this);g={};f={};d=null;var c=b.attr("data-move-offset"),c=c?parseInt(c,10):a.st.block.moveOffset;if(0<c&&((e=b.data("move-effect"))?(e=e.toLowerCase(),"none"===e?e=!1:"left"!==e&&("top"!==e&&"bottom"!==e&&"right"!==e)&&(e=a.st.block.moveEffect,"none"===e&&(e=!1))):e=a.st.block.moveEffect,e&&"none"!==e)){var n;n="right"===e||"left"===e?!0:!1;var k;m=!1;a._e?(k=0,h=a._x1):(n?isNaN(parseInt(b.css("right"),10))?h="left":(h="right",m=!0):isNaN(parseInt(b.css("bottom"),10))?h="top":(h="bottom",m=!0),h="margin-"+h,m&&(c=-c),a._e?k=parseInt(b.css(h),10):(k=b.data("rs-start-move-prop"),void 0===k&&(k=parseInt(b.css(h),10),b.data("rs-start-move-prop",k))));f[h]=a._m4("top"===e||"left"===e?k-c:k+c,n);g[h]=a._m4(k,n)}if(c=b.attr("data-fade-effect")){if("none"===c.toLowerCase()||"false"===c.toLowerCase())c=!1}else c=a.st.block.fadeEffect;c&&(f.opacity=0,g.opacity=1);if(c||e)d={},d.hasFade=Boolean(c),Boolean(e)&&(d.moveProp=h,d.hasMove=!0),d.speed=b.data("speed"),isNaN(d.speed)&&(d.speed=a.st.block.speed),d.easing=b.data("easing"),d.easing||(d.easing=a.st.block.easing),d.css3Easing=j.rsCSS3Easing[d.easing],d.delay=b.data("delay"),isNaN(d.delay)&&(d.delay=a.st.block.delay*l);c={};a._e&&(c[a._g+a._u1]="0ms");c.moveProp=g.moveProp;c.opacity=g.opacity;c.display="none";a._r4.push({block:b,css:c});a._v4(b,f);a._s4.push(setTimeout(function(b,d,c,e){return function(){b.css("display","block");if(c){var g={};if(a._e){var f="";c.hasMove&&(f+=c.moveProp);c.hasFade&&(c.hasMove&&(f+=", "),f+="opacity");g[a._g+a._t1]=f;g[a._g+a._u1]=c.speed+"ms";g[a._g+a._v1]=c.css3Easing;b.css(g);setTimeout(function(){b.css(d)},24)}else setTimeout(function(){b.animate(d,c.speed,c.easing)},16)}delete a._s4[e]}}(b,g,d,l),6>=d.delay?12:d.delay))})}});j.rsModules.animatedBlocks=j.rsProto._p4})(jQuery);(function(b){b.extend(b.rsProto,{_w4:function(){var a=this;if(a.st.autoHeight){var b,d,e,c=function(c){e=a.slides[a.currSlideId];if(b=e.holder)if((d=b.height())&&void 0!==d)a._c4=d,a._e||!c?a._e1.css("height",d):a._e1.stop(!0,!0).animate({height:d},a.st.transitionSpeed)};a.ev.on("rsMaybeSizeReady.rsAutoHeight",function(a,b){e===b&&c()});a.ev.on("rsAfterContentSet.rsAutoHeight",function(a,b){e===b&&c()});a.slider.addClass("rsAutoHeight");a.ev.one("rsAfterInit",function(){setTimeout(function(){c(!1);setTimeout(function(){a.slider.append('<div style="clear:both; float: none;"></div>');a._e&&a._e1.css(a._g+"transition","height "+a.st.transitionSpeed+"ms ease-in-out")},16)},16)});a.ev.on("rsBeforeAnimStart",function(){c(!0)});a.ev.on("rsBeforeSizeSet",function(){setTimeout(function(){c(!1)},16)})}}});b.rsModules.autoHeight=b.rsProto._w4})(jQuery);(function(b){b.extend(b.rsProto,{_x4:function(){var a=this,d;a._y4={enabled:!1,stopAtAction:!0,pauseOnHover:!0,delay:2E3};!a.st.autoPlay&&a.st.autoplay&&(a.st.autoPlay=a.st.autoplay);a.st.autoPlay=b.extend({},a._y4,a.st.autoPlay);a.st.autoPlay.enabled&&(a.ev.on("rsBeforeParseNode",function(a,c,f){c=b(c);if(d=c.attr("data-rsDelay"))f.customDelay=parseInt(d,10)}),a.ev.one("rsAfterInit",function(){a._z4()}),a.ev.on("rsBeforeDestroy",function(){a.stopAutoPlay();a.slider.off("mouseenter mouseleave");b(window).off("blur"+
a.ns+" focus"+a.ns)}))},_z4:function(){var a=this;a.startAutoPlay();a.ev.on("rsAfterContentSet",function(b,e){!a._l2&&(!a._r2&&a._a5&&e===a.currSlide)&&a._b5()});a.ev.on("rsDragRelease",function(){a._a5&&a._c5&&(a._c5=!1,a._b5())});a.ev.on("rsAfterSlideChange",function(){a._a5&&a._c5&&(a._c5=!1,a.currSlide.isLoaded&&a._b5())});a.ev.on("rsDragStart",function(){a._a5&&(a.st.autoPlay.stopAtAction?a.stopAutoPlay():(a._c5=!0,a._d5()))});a.ev.on("rsBeforeMove",function(b,e,c){a._a5&&(c&&a.st.autoPlay.stopAtAction?a.stopAutoPlay():(a._c5=!0,a._d5()))});a._e5=!1;a.ev.on("rsVideoStop",function(){a._a5&&(a._e5=!1,a._b5())});a.ev.on("rsVideoPlay",function(){a._a5&&(a._c5=!1,a._d5(),a._e5=!0)});b(window).on("blur"+a.ns,function(){a._a5&&(a._c5=!0,a._d5())}).on("focus"+a.ns,function(){a._a5&&a._c5&&(a._c5=!1,a._b5())});a.st.autoPlay.pauseOnHover&&(a._f5=!1,a.slider.hover(function(){a._a5&&(a._c5=!1,a._d5(),a._f5=!0)},function(){a._a5&&(a._f5=!1,a._b5())}))},toggleAutoPlay:function(){this._a5?this.stopAutoPlay():this.startAutoPlay()},startAutoPlay:function(){this._a5=!0;this.currSlide.isLoaded&&this._b5()},stopAutoPlay:function(){this._e5=this._f5=this._c5=this._a5=!1;this._d5()},_b5:function(){var a=this;!a._f5&&!a._e5&&(a._g5=!0,a._h5&&clearTimeout(a._h5),a._h5=setTimeout(function(){var b;!a._z&&!a.st.loopRewind&&(b=!0,a.st.loopRewind=!0);a.next(!0);b&&(a.st.loopRewind=!1)},!a.currSlide.customDelay?a.st.autoPlay.delay:a.currSlide.customDelay))},_d5:function(){!this._f5&&!this._e5&&(this._g5=!1,this._h5&&(clearTimeout(this._h5),this._h5=null))}});b.rsModules.autoplay=b.rsProto._x4})(jQuery);(function(c){c.extend(c.rsProto,{_i5:function(){var a=this;"bullets"===a.st.controlNavigation&&(a.ev.one("rsAfterPropsSetup",function(){a._j5=!0;a.slider.addClass("rsWithBullets");for(var b='<div class="rsNav rsBullets">',e=0;e<a.numSlides;e++)b+='<div class="rsNavItem rsBullet"><span></span></div>';a._k5=b=c(b+"</div>");a._l5=b.appendTo(a.slider).children();a._k5.on("click.rs",".rsNavItem",function(){a._m5||a.goTo(c(this).index())})}),a.ev.on("rsOnAppendSlide",function(b,c,d){d>=a.numSlides?a._k5.append('<div class="rsNavItem rsBullet"><span></span></div>'):a._l5.eq(d).before('<div class="rsNavItem rsBullet"><span></span></div>');a._l5=a._k5.children()}),a.ev.on("rsOnRemoveSlide",function(b,c){var d=a._l5.eq(c);d&&d.length&&(d.remove(),a._l5=a._k5.children())}),a.ev.on("rsOnUpdateNav",function(){var b=a.currSlideId;a._n5&&a._n5.removeClass("rsNavSelected");b=a._l5.eq(b);b.addClass("rsNavSelected");a._n5=b}))}});c.rsModules.bullets=c.rsProto._i5})(jQuery);(function(b){b.extend(b.rsProto,{_o5:function(){var a=this,g,c,e;a._p5={enabled:!1,change:!1,prefix:""};a.st.deeplinking=b.extend({},a._p5,a.st.deeplinking);if(a.st.deeplinking.enabled){var h=a.st.deeplinking.change,d="#"+a.st.deeplinking.prefix,f=function(){var a=window.location.hash;return a&&(a=parseInt(a.substring(d.length),10),0<=a)?a-1:-1},j=f();-1!==j&&(a.st.startSlideId=j);h&&(b(window).on("hashchange"+a.ns,function(){if(!g){var b=f();0>b||(b>a.numSlides-1&&(b=a.numSlides-1),a.goTo(b))}}),a.ev.on("rsBeforeAnimStart",function(){c&&clearTimeout(c);e&&clearTimeout(e)}),a.ev.on("rsAfterSlideChange",function(){c&&clearTimeout(c);e&&clearTimeout(e);e=setTimeout(function(){g=!0;window.location.replace((""+window.location).split("#")[0]+d+(a.currSlideId+1));c=setTimeout(function(){g=!1;c=null},60)},400)}));a.ev.on("rsBeforeDestroy",function(){c=e=null;h&&b(window).off("hashchange"+a.ns)})}}});b.rsModules.deeplinking=b.rsProto._o5})(jQuery);(function(b,a,g){function c(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var e=document,h,d=b.event.special,f=e.documentMode,j="onhashchange"in a&&(f===g||7<f);b.fn.hashchange=function(a){return a?this.bind("hashchange",a):this.trigger("hashchange")};b.fn.hashchange.delay=50;d.hashchange=b.extend(d.hashchange,{setup:function(){if(j)return!1;b(h.start)},teardown:function(){if(j)return!1;b(h.stop)}});var p=function(){var e=c(),d=r(n);e!==n?(q(n=e,d),b(a).trigger("hashchange")):d!==n&&(location.href=location.href.replace(/#.*/,"")+d);l=setTimeout(p,b.fn.hashchange.delay)},d={},l,n=c(),q=f=function(a){return a},r=f;d.start=function(){l||p()};d.stop=function(){l&&clearTimeout(l);l=g};if(a.attachEvent&&!a.addEventListener&&!j){var k,m;d.start=function(){k||(m=(m=b.fn.hashchange.src)&&m+c(),k=b('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){m||q(c());p()}).attr("src",m||"javascript:0").insertAfter("body")[0].contentWindow,e.onpropertychange=function(){try{"title"===event.propertyName&&(k.document.title=e.title)}catch(a){}})};d.stop=f;r=function(){return c(k.location.href)};q=function(a,d){var c=k.document,f=b.fn.hashchange.domain;a!==d&&(c.title=e.title,c.open(),f&&c.write('<script>document.domain="'+f+'"\x3c/script>'),c.close(),k.location.hash=a)}}h=d})(jQuery,this);(function(c){c.extend(c.rsProto,{_q5:function(){var a=this;a._r5={enabled:!1,keyboardNav:!0,buttonFS:!0,nativeFS:!1,doubleTap:!0};a.st.fullscreen=c.extend({},a._r5,a.st.fullscreen);if(a.st.fullscreen.enabled)a.ev.one("rsBeforeSizeSet",function(){a._s5()})},_s5:function(){var a=this;a._t5=!a.st.keyboardNavEnabled&&a.st.fullscreen.keyboardNav;if(a.st.fullscreen.nativeFS){a._u5={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""};var b=["webkit","moz","o","ms","khtml"];if(!a.isAndroid)if("undefined"!=typeof document.cancelFullScreen)a._u5.supportsFullScreen=!0;else for(var d=0;d<b.length;d++)if(a._u5.prefix=b[d],"undefined"!=typeof document[a._u5.prefix+"CancelFullScreen"]){a._u5.supportsFullScreen=!0;break}a._u5.supportsFullScreen?(a.nativeFS=!0,a._u5.fullScreenEventName=a._u5.prefix+"fullscreenchange"+a.ns,a._u5.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},a._u5.requestFullScreen=function(a){return""===this.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},a._u5.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}):a._u5=!1}a.st.fullscreen.buttonFS&&(a._v5=c('<div class="rsFullscreenBtn"><div class="rsFullscreenIcn"></div></div>').appendTo(a._o1).on("click.rs",function(){a.isFullscreen?a.exitFullscreen():a.enterFullscreen()}))},enterFullscreen:function(a){var b=this;if(b._u5)if(a)b._u5.requestFullScreen(c("html")[0]);else{b._b.on(b._u5.fullScreenEventName,function(){b._u5.isFullScreen()?b.enterFullscreen(!0):b.exitFullscreen(!0)});b._u5.requestFullScreen(c("html")[0]);return}if(!b._w5){b._w5=!0;b._b.on("keyup"+b.ns+"fullscreen",function(a){27===a.keyCode&&b.exitFullscreen()});b._t5&&b._b2();a=c(window);b._x5=a.scrollTop();b._y5=a.scrollLeft();b._z5=c("html").attr("style");b._a6=c("body").attr("style");b._b6=b.slider.attr("style");c("body, html").css({overflow:"hidden",height:"100%",width:"100%",margin:"0",padding:"0"});b.slider.addClass("rsFullscreen");var d;for(d=0;d<b.numSlides;d++)a=b.slides[d],a.isRendered=!1,a.bigImage&&(a.isBig=!0,a.isMedLoaded=a.isLoaded,a.isMedLoading=a.isLoading,a.medImage=a.image,a.medIW=a.iW,a.medIH=a.iH,a.slideId=-99,a.bigImage!==a.medImage&&(a.sizeType="big"),a.isLoaded=a.isBigLoaded,a.isLoading=!1,a.image=a.bigImage,a.images[0]=a.bigImage,a.iW=a.bigIW,a.iH=a.bigIH,a.isAppended=a.contentAdded=!1,b._c6(a));b.isFullscreen=!0;b._w5=!1;b.updateSliderSize();b.ev.trigger("rsEnterFullscreen")}},exitFullscreen:function(a){var b=this;if(b._u5){if(!a){b._u5.cancelFullScreen(c("html")[0]);return}b._b.off(b._u5.fullScreenEventName)}if(!b._w5){b._w5=!0;b._b.off("keyup"+b.ns+"fullscreen");b._t5&&b._b.off("keydown"+b.ns);c("html").attr("style",b._z5||"");c("body").attr("style",b._a6||"");var d;for(d=0;d<b.numSlides;d++)a=b.slides[d],a.isRendered=!1,a.bigImage&&(a.isBig=!1,a.slideId=-99,a.isBigLoaded=a.isLoaded,a.isBigLoading=a.isLoading,a.bigImage=a.image,a.bigIW=a.iW,a.bigIH=a.iH,a.isLoaded=a.isMedLoaded,a.isLoading=!1,a.image=a.medImage,a.images[0]=a.medImage,a.iW=a.medIW,a.iH=a.medIH,a.isAppended=a.contentAdded=!1,b._c6(a,!0),a.bigImage!==a.medImage&&(a.sizeType="med"));b.isFullscreen=!1;a=c(window);a.scrollTop(b._x5);a.scrollLeft(b._y5);b._w5=!1;b.slider.removeClass("rsFullscreen");b.updateSliderSize();setTimeout(function(){b.updateSliderSize()},1);b.ev.trigger("rsExitFullscreen")}},_c6:function(a){var b=!a.isLoaded&&!a.isLoading?'<a class="rsImg rsMainSlideImage" href="'+a.image+'"></a>':'<img class="rsImg rsMainSlideImage" src="'+a.image+'"/>';a.content.hasClass("rsImg")?a.content=c(b):a.content.find(".rsImg").eq(0).replaceWith(b);!a.isLoaded&&(!a.isLoading&&a.holder)&&a.holder.html(a.content)}});c.rsModules.fullscreen=c.rsProto._q5})(jQuery);(function(b){b.extend(b.rsProto,{_d6:function(){var a=this;a.st.globalCaption&&(a.ev.on("rsAfterInit",function(){a.globalCaption=b('<div class="rsGCaption"></div>').appendTo(!a.st.globalCaptionInside?a.slider:a._e1);a.globalCaption.html(a.currSlide.caption)}),a.ev.on("rsBeforeAnimStart",function(){a.globalCaption.html(a.currSlide.caption)}))}});b.rsModules.globalCaption=b.rsProto._d6})(jQuery);(function(b){b.extend(b.rsProto,{_e6:function(){var a=this;if(a.st.navAutoHide&&!a.hasTouch)a.ev.one("rsAfterInit",function(){if(a._k5){a._k5.addClass("rsHidden");var b=a.slider;b.one("mousemove.controlnav",function(){a._k5.removeClass("rsHidden")});b.hover(function(){a._k5.removeClass("rsHidden")},function(){a._k5.addClass("rsHidden")})}})}});b.rsModules.autoHideNav=b.rsProto._e6})(jQuery);(function(e){e.extend(e.rsProto,{_f6:function(){var a=this;"tabs"===a.st.controlNavigation&&(a.ev.on("rsBeforeParseNode",function(a,d,b){d=e(d);b.thumbnail=d.find(".rsTmb").remove();b.thumbnail.length?b.thumbnail=e(document.createElement("div")).append(b.thumbnail).html():(b.thumbnail=d.attr("data-rsTmb"),b.thumbnail||(b.thumbnail=d.find(".rsImg").attr("data-rsTmb")),b.thumbnail=b.thumbnail?'<img src="'+b.thumbnail+'"/>':"")}),a.ev.one("rsAfterPropsSetup",function(){a._g6()}),a.ev.on("rsOnAppendSlide",function(c,d,b){b>=a.numSlides?a._k5.append('<div class="rsNavItem rsTab">'+d.thumbnail+"</div>"):a._l5.eq(b).before('<div class="rsNavItem rsTab">'+item.thumbnail+"</div>");a._l5=a._k5.children()}),a.ev.on("rsOnRemoveSlide",function(c,d){var b=a._l5.eq(d);b&&(b.remove(),a._l5=a._k5.children())}),a.ev.on("rsOnUpdateNav",function(){var c=a.currSlideId;a._n5&&a._n5.removeClass("rsNavSelected");c=a._l5.eq(c);c.addClass("rsNavSelected");a._n5=c}))},_g6:function(){var a=this,c;a._j5=!0;c='<div class="rsNav rsTabs">';for(var d=0;d<a.numSlides;d++)c+='<div class="rsNavItem rsTab">'+a.slides[d].thumbnail+"</div>";c=e(c+"</div>");a._k5=c;a._l5=c.children(".rsNavItem");a.slider.append(c);a._k5.click(function(b){b=e(b.target).closest(".rsNavItem");b.length&&a.goTo(b.index())})}});e.rsModules.tabs=e.rsProto._f6})(jQuery);(function(f){f.extend(f.rsProto,{_h6:function(){var a=this;"thumbnails"===a.st.controlNavigation&&(a._i6={drag:!0,touch:!0,orientation:"horizontal",navigation:!0,arrows:!0,arrowLeft:null,arrowRight:null,spacing:4,arrowsAutoHide:!1,appendSpan:!1,transitionSpeed:600,autoCenter:!0,fitInViewport:!0,firstMargin:!0,paddingTop:0,paddingBottom:0},a.st.thumbs=f.extend({},a._i6,a.st.thumbs),a._j6=!0,!1===a.st.thumbs.firstMargin?a.st.thumbs.firstMargin=0:!0===a.st.thumbs.firstMargin&&(a.st.thumbs.firstMargin=a.st.thumbs.spacing),a.ev.on("rsBeforeParseNode",function(a,c,b){c=f(c);b.thumbnail=c.find(".rsTmb").remove();b.thumbnail.length?b.thumbnail=f(document.createElement("div")).append(b.thumbnail).html():(b.thumbnail=c.attr("data-rsTmb"),b.thumbnail||(b.thumbnail=c.find(".rsImg").attr("data-rsTmb")),b.thumbnail=b.thumbnail?'<img src="'+b.thumbnail+'"/>':"")}),a.ev.one("rsAfterPropsSetup",function(){a._k6()}),a._n5=null,a.ev.on("rsOnUpdateNav",function(){var e=f(a._l5[a.currSlideId]);e!==a._n5&&(a._n5&&(a._n5.removeClass("rsNavSelected"),a._n5=null),a._l6&&a._m6(a.currSlideId),a._n5=e.addClass("rsNavSelected"))}),a.ev.on("rsOnAppendSlide",function(e,c,b){e="<div"+a._n6+' class="rsNavItem rsThumb">'+a._o6+c.thumbnail+"</div>";b>=a.numSlides?a._s3.append(e):a._l5.eq(b).before(e);a._l5=a._s3.children();a.updateThumbsSize()}),a.ev.on("rsOnRemoveSlide",function(e,c){var b=a._l5.eq(c);b&&(b.remove(),a._l5=a._s3.children(),a.updateThumbsSize())}))},_k6:function(){var a=this,e="rsThumbs",c=a.st.thumbs,b="",g,d,h=c.spacing;a._j5=!0;a._e3="vertical"===c.orientation?!1:!0;a._n6=g=h?' style="margin-'+(a._e3?"right":"bottom")+":"+h+'px;"':"";a._i3=0;a._p6=!1;a._m5=!1;a._l6=!1;a._q6=c.arrows&&c.navigation;d=a._e3?"Hor":"Ver";a.slider.addClass("rsWithThumbs rsWithThumbs"+d);b+='<div class="rsNav rsThumbs rsThumbs'+d+'"><div class="'+e+'Container">';a._o6=c.appendSpan?'<span class="thumbIco"></span>':"";for(var j=0;j<a.numSlides;j++)d=a.slides[j],b+="<div"+g+' class="rsNavItem rsThumb">'+d.thumbnail+a._o6+"</div>";b=f(b+"</div></div>");g={};c.paddingTop&&(g[a._e3?"paddingTop":"paddingLeft"]=c.paddingTop);c.paddingBottom&&(g[a._e3?"paddingBottom":"paddingRight"]=c.paddingBottom);b.css(g);a._s3=f(b).find("."+e+"Container");a._q6&&(e+="Arrow",c.arrowLeft?a._r6=c.arrowLeft:(a._r6=f('<div class="'+e+" "+e+'Left"><div class="'+e+'Icn"></div></div>'),b.append(a._r6)),c.arrowRight?a._s6=c.arrowRight:(a._s6=f('<div class="'+e+" "+e+'Right"><div class="'+e+'Icn"></div></div>'),b.append(a._s6)),a._r6.click(function(){var b=(Math.floor(a._i3/a._t6)+a._u6)*a._t6;a._a4(b>a._n3?a._n3:b)}),a._s6.click(function(){var b=(Math.floor(a._i3/a._t6)-a._u6)*a._t6;a._a4(b<a._o3?a._o3:b)}),c.arrowsAutoHide&&!a.hasTouch&&(a._r6.css("opacity",0),a._s6.css("opacity",0),b.one("mousemove.rsarrowshover",function(){a._l6&&(a._r6.css("opacity",1),a._s6.css("opacity",1))}),b.hover(function(){a._l6&&(a._r6.css("opacity",1),a._s6.css("opacity",1))},function(){a._l6&&(a._r6.css("opacity",0),a._s6.css("opacity",0))})));a._k5=b;a._l5=a._s3.children();a.msEnabled&&a.st.thumbs.navigation&&a._s3.css("-ms-touch-action",a._e3?"pan-y":"pan-x");a.slider.append(b);a._w3=!0;a._v6=h;c.navigation&&a._e&&a._s3.css(a._g+"transition-property",a._g+"transform");a._k5.on("click.rs",".rsNavItem",function(){a._m5||a.goTo(f(this).index())});a.ev.off("rsBeforeSizeSet.thumbs").on("rsBeforeSizeSet.thumbs",function(){a._w6=a._e3?a._c4:a._b4;a.updateThumbsSize(!0)})},updateThumbsSize:function(){var a=this,e=a._l5.first(),c={},b=a._l5.length;a._t6=(a._e3?e.outerWidth():e.outerHeight())+a._v6;a._y3=b*a._t6-a._v6;c[a._e3?"width":"height"]=a._y3+a._v6;a._z3=a._e3?a._k5.width():a._k5.height();a._o3=-(a._y3-a._z3)-a.st.thumbs.firstMargin;a._n3=a.st.thumbs.firstMargin;a._u6=Math.floor(a._z3/a._t6);if(a._y3<a._z3)a.st.thumbs.autoCenter&&a._q3((a._z3-a._y3)/2),a.st.thumbs.arrows&&a._r6&&(a._r6.addClass("rsThumbsArrowDisabled"),a._s6.addClass("rsThumbsArrowDisabled")),a._l6=!1,a._m5=!1,a._k5.off(a._j1);else if(a.st.thumbs.navigation&&!a._l6&&(a._l6=!0,!a.hasTouch&&a.st.thumbs.drag||a.hasTouch&&a.st.thumbs.touch))a._m5=!0,a._k5.on(a._j1,function(b){a._g2(b,!0)});a._e&&(c[a._g+"transition-duration"]="0ms");a._s3.css(c);if(a._w3&&(a.isFullscreen||a.st.thumbs.fitInViewport))a._e3?a._c4=a._w6-a._k5.outerHeight():a._b4=a._w6-a._k5.outerWidth()},setThumbsOrientation:function(a,e){this._w3&&(this.st.thumbs.orientation=a,this._k5.remove(),this.slider.removeClass("rsWithThumbsHor rsWithThumbsVer"),this._k6(),this._k5.off(this._j1),e||this.updateSliderSize(!0))},_q3:function(a){this._i3=a;this._e?this._s3.css(this._x1,this._y1+(this._e3?a+this._z1+0:0+this._z1+a)+this._a2):this._s3.css(this._e3?this._x1:this._w1,a)},_a4:function(a,e,c,b,g){var d=this;if(d._l6){e||(e=d.st.thumbs.transitionSpeed);d._i3=a;d._x6&&clearTimeout(d._x6);d._p6&&(d._e||d._s3.stop(),c=!0);var h={};d._p6=!0;d._e?(h[d._g+"transition-duration"]=e+"ms",h[d._g+"transition-timing-function"]=c?f.rsCSS3Easing[d.st.easeOut]:f.rsCSS3Easing[d.st.easeInOut],d._s3.css(h),d._q3(a)):(h[d._e3?d._x1:d._w1]=a+"px",d._s3.animate(h,e,c?"easeOutCubic":d.st.easeInOut));b&&(d._i3=b);d._y6();d._x6=setTimeout(function(){d._p6=!1;g&&(d._a4(b,g,!0),g=null)},e)}},_y6:function(){this._q6&&(this._i3===this._n3?this._r6.addClass("rsThumbsArrowDisabled"):this._r6.removeClass("rsThumbsArrowDisabled"),this._i3===this._o3?this._s6.addClass("rsThumbsArrowDisabled"):this._s6.removeClass("rsThumbsArrowDisabled"))},_m6:function(a,e){var c=0,b,f=a*this._t6+2*this._t6-this._v6+this._n3,d=Math.floor(this._i3/this._t6);this._l6&&(this._j6&&(e=!0,this._j6=!1),f+this._i3>this._z3?(a===this.numSlides-1&&(c=1),d=-a+this._u6-2+c,b=d*this._t6+this._z3%this._t6+this._v6-this._n3):0!==a?(a-1)*this._t6<=-this._i3+this._n3&&a-1<=this.numSlides-this._u6&&(b=(-a+1)*this._t6+this._n3):b=this._n3,b!==this._i3&&(c=void 0===b?this._i3:b,c>this._n3?this._q3(this._n3):c<this._o3?this._q3(this._o3):void 0!==b&&(e?this._q3(b):this._a4(b))),this._y6())}});f.rsModules.thumbnails=f.rsProto._h6})(jQuery);(function(f){f.extend(f.rsProto,{_z6:function(){var a=this;a._a7={autoHideArrows:!0,autoHideControlNav:!1,autoHideBlocks:!1,autoHideCaption:!1,disableCSS3inFF:!0,youTubeCode:'<iframe src="http://www.youtube.com/embed/%id%?rel=1&autoplay=1&showinfo=0&autoplay=1&wmode=transparent" frameborder="no"></iframe>',vimeoCode:'<iframe src="http://player.vimeo.com/video/%id%?byline=0&amp;portrait=0&amp;autoplay=1" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'};a.st.video=f.extend({},a._a7,a.st.video);a.ev.on("rsBeforeSizeSet",function(){a._b7&&setTimeout(function(){var b=a._r1,b=b.hasClass("rsVideoContainer")?b:b.find(".rsVideoContainer");a._c7&&a._c7.css({width:b.width(),height:b.height()})},32)});var c=a._a.mozilla;a.ev.on("rsAfterParseNode",function(b,e,d){b=f(e);if(d.videoURL){a.st.video.disableCSS3inFF&&c&&(a._e=a._f=!1);e=f('<div class="rsVideoContainer"></div>');var g=f('<div class="rsBtnCenterer"><div class="rsPlayBtn"><div class="rsPlayBtnIcon"></div></div></div>');b.hasClass("rsImg")?d.content=e.append(b).append(g):d.content.find(".rsImg").wrap(e).after(g)}});a.ev.on("rsAfterSlideChange",function(){a.stopVideo()})},toggleVideo:function(){return this._b7?this.stopVideo():this.playVideo()},playVideo:function(){var a=this;if(!a._b7){var c=a.currSlide;if(!c.videoURL)return!1;var b=a._d7=c.content,c=c.videoURL,e,d;c.match(/youtu\.be/i)||c.match(/youtube\.com/i)?(d=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,(d=c.match(d))&&11==d[7].length&&(e=d[7]),void 0!==e&&(a._c7=a.st.video.youTubeCode.replace("%id%",e))):c.match(/vimeo\.com/i)&&(d=/(www\.)?vimeo.com\/(\d+)($|\/)/,(d=c.match(d))&&(e=d[2]),void 0!==e&&(a._c7=a.st.video.vimeoCode.replace("%id%",e)));a.videoObj=f(a._c7);a.ev.trigger("rsOnCreateVideoElement",[c]);a.videoObj.length&&(a._c7=f('<div class="rsVideoFrameHolder"><div class="rsPreloader"></div><div class="rsCloseVideoBtn"><div class="rsCloseVideoIcn"></div></div></div>'),a._c7.find(".rsPreloader").after(a.videoObj),b=b.hasClass("rsVideoContainer")?b:b.find(".rsVideoContainer"),a._c7.css({width:b.width(),height:b.height()}).find(".rsCloseVideoBtn").off("click.rsv").on("click.rsv",function(b){a.stopVideo();b.preventDefault();b.stopPropagation();return!1}),b.append(a._c7),a.isIPAD&&b.addClass("rsIOSVideo"),a._e7(!1),setTimeout(function(){a._c7.addClass("rsVideoActive")},10),a.ev.trigger("rsVideoPlay"),a._b7=!0);return!0}return!1},stopVideo:function(){var a=this;return a._b7?(a.isIPAD&&a.slider.find(".rsCloseVideoBtn").remove(),a._e7(!0),setTimeout(function(){a.ev.trigger("rsOnDestroyVideoElement",[a.videoObj]);var c=a._c7.find("iframe");if(c.length)try{c.attr("src","")}catch(b){}a._c7.remove();a._c7=null},16),a.ev.trigger("rsVideoStop"),a._b7=!1,!0):!1},_e7:function(a){var c=[],b=this.st.video;b.autoHideArrows&&(this._c2&&(c.push(this._c2,this._d2),this._e2=!a),this._v5&&c.push(this._v5));b.autoHideControlNav&&this._k5&&c.push(this._k5);b.autoHideBlocks&&this.currSlide.animBlocks&&c.push(this.currSlide.animBlocks);b.autoHideCaption&&this.globalCaption&&c.push(this.globalCaption);if(c.length)for(b=0;b<c.length;b++)a?c[b].removeClass("rsHidden"):c[b].addClass("rsHidden")}});f.rsModules.video=f.rsProto._z6})(jQuery);(function(d){d.rsProto._f7=function(){var a=this;a.st.visibleNearby&&a.st.visibleNearby.enabled&&(a._g7={enabled:!0,centerArea:0.6,center:!0,breakpoint:0,breakpointCenterArea:0.8,hiddenOverflow:!0,navigateByCenterClick:!1},a.st.visibleNearby=d.extend({},a._g7,a.st.visibleNearby),a.ev.one("rsAfterPropsSetup",function(){a._h7=a._e1.css("overflow","visible").wrap('<div class="rsVisibleNearbyWrap"></div>').parent();a.st.visibleNearby.hiddenOverflow||a._h7.css("overflow","visible");a._o1=a.st.controlsInside?a._h7:a.slider}),a.ev.on("rsAfterSizePropSet",function(){var b,c=a.st.visibleNearby;b=c.breakpoint&&a.width<c.breakpoint?c.breakpointCenterArea:c.centerArea;a._h?(a._b4*=b,a._h7.css({height:a._c4,width:a._b4/b}),a._d=a._b4*(1-b)/2/b):(a._c4*=b,a._h7.css({height:a._c4/b,width:a._b4}),a._d=a._c4*(1-b)/2/b);c.navigateByCenterClick||(a._q=a._h?a._b4:a._c4);c.center&&a._e1.css("margin-"+(a._h?"left":"top"),a._d)}))};d.rsModules.visibleNearby=d.rsProto._f7})(jQuery);;
var killerDealContainer=$(document.getElementById('killerDealContainer'));var killerDealOptions={arrowsNav:true,loop:true,keyboardNavEnabled:true,controlsInside:false,imageScaleMode:'fill',arrowsNavAutoHide:false,autoScaleSlider:true,autoScaleSliderWidth:980,autoScaleSliderHeight:476,transitionType:'fade',controlNavigation:'bullets',fitInViewport:false,autoPlay:{enabled:true,pauseOnHover:true,stopAtAction:false,delay:3500},imgWidth:980,imgHeight:476}
frontvpg.initKillerDealPlugin=function(){slider=killerDealContainer.royalSlider(killerDealOptions).data('royalSlider');slider.stopAutoPlay();slider.ev.on('rsAfterContentSet',function(){if(killerDealContainer.find('.killerDealContent').length>1){killerDealContainer.find('.rsArrow.rsArrowLeft').html('<i class="rsArrowIcn icon-arrow-left-t1"></i>');killerDealContainer.find('.rsArrow.rsArrowRight').html('<i class="rsArrowIcn icon-arrow-right-t1"></i>');}else{killerDealContainer.find('.rsBullets').remove();}
displayKillerDealContainer();addKillerDealEvent();});slider.ev.on('rsBeforeMove',function(){displayKillerDealContainer();});}
function displayKillerDealContainer(){$('.rsImg, .rsArrow, .rsNav').fadeIn(function(){$('.rsOverflow, .killerDealContent').fadeIn('slow');});frontvpg.updateKillerDearPictures();}
function addKillerDealEvent(){killerDealContainer.find('.killerDealContent').on('click',function(){slider.stopAutoPlay();});}
var trailerOptions={arrowsNav:true,addActiveClass:true,loop:true,blockLoop:true,keyboardNavEnabled:true,controlsInside:false,imageScaleMode:'fill',arrowsNavAutoHide:false,controlNavigationSpacing:0,fadeinLoadedSlide:false,numImagesToPreload:6,transitionType:'move',controlNavigation:'none',fitInViewport:false,usePreloader:true,autoPlay:{enabled:true,delay:3500,pauseOnHover:false}}
frontvpg.initTrailer=function(saleId){frontvpg.showReminder=false;sliderTrailer=$(document.getElementById('trailerContainer')).royalSlider(trailerOptions).data('royalSlider');sliderTrailer.ev.on('rsAfterContentSet',function(){var trailerContainer=$(document.getElementById('trailerContainer'));trailerContainer.find('.rsArrow.rsArrowLeft').html('<i class="icon-arrow-left-t1"></i>');trailerContainer.find('.rsArrow.rsArrowRight').html('<i class="icon-arrow-right-t1"></i>');trailerContentContainer=$(document.getElementById('titleBarContainer'));checkSubscribe(saleId);trailerContentContainer.find('.slideCount').html((sliderTrailer.currSlideId+1)+'/'+sliderTrailer.numSlides);trailerContentContainer.find('.slideLegend').html(sliderTrailer.currSlide.caption);$('.vpRoyalSlider_loading').fadeOut(function(){$(document.getElementById('modal-trailer')).fadeIn('slow');sliderTrailer.updateSliderSize(true);});});sliderTrailer.ev.on('rsBeforeMove',function(event,type,userAction){sliderTrailer.updateSliderSize(true);});sliderTrailer.ev.on('rsAfterSlideChange',function(){trailerContentContainer.find('.slideCount').html((sliderTrailer.currSlideId+1)+'/'+sliderTrailer.numSlides);trailerContentContainer.find('.slideLegend').html(sliderTrailer.currSlide.caption);});$(document.getElementById('titleBarContainer')).on('click','.modal-trailer-link',function(event){frontvpg.clickSubscribe(saleId,this,true,function(){frontvpg.showReminder=true;checkSubscribe(saleId);});});}
function checkSubscribe(sid)
{if((frontvpg.salesCookie!=null&&frontvpg.salesCookie[sid])){if(frontvpg.showReminder){trailerContentContainer.find('.slideCount').hide();trailerContentContainer.find('.reminder').show();}
else
{trailerContentContainer.find('.slideCount').show();trailerContentContainer.find('.reminder').hide();}
trailerContentContainer.find('.subscribeButton').hide();}
else
{trailerContentContainer.find('.subscribeButton').show();trailerContentContainer.find('.slideCount').hide();trailerContentContainer.find('.reminder').hide();}}
var saleSliderOptions={addActiveClass:true,arrowsNav:true,controlNavigation:'bullets',arrowsNavAutoHide:false,sliderDrag:true,imageScaleMode:'none',imageAlignCenter:false,autoScaleSlider:true,autoScaleSliderWidth:956,autoScaleSliderHeight:491,autoHeight:true,navigateByClick:false,imageScalePadding:0,slidesSpacing:2,loop:true,allowCSS3:false,fadeinLoadedSlide:false,visibleNearby:{enabled:true,centerArea:0.6,center:false,breakpoint:979,breakpointCenterArea:1,navigateByCenterClick:true},transitionSpeed:800,globalCaption:true,globalCaptionInside:false,keyboardNavEnabled:true,imgWidth:956,imgHeight:491}
sliderSale=$(document.getElementById('full-width-slider')).royalSlider(saleSliderOptions).data('royalSlider');if(sliderSale){carouselContainer=$(document.getElementById('carousel-sale'));sliderSale.ev.on('rsBeforeMove',function(){$(document.getElementById('carousel-sale')).find('.rsSlide div.rsABlock').fadeOut(180);});sliderSale.ev.on('rsAfterSlideChange',function(event){$(document.getElementById('carousel-sale')).find('.rsSlide.rsActiveSlide div.rsABlock').fadeIn(180);});sliderSale.ev.on('rsAfterContentSet',function(){carouselContainer.find('.buttons-container').appendTo(carouselContainer.find('.rsVisibleNearbyWrap'));var trackingLeft='ga-tracker="Product Page" ga-action="Photo Nav Clicked" ga-label="Arrow Left" ea-productaction="Product Page - Slideshow - Arrow Left"';var trackingRight='ga-tracker="Product Page" ga-action="Photo Nav Clicked" ga-label="Arrow Right" ea-productaction="Product Page - Slideshow - Arrow Right"';carouselContainer.find('.rsArrow.rsArrowLeft').html('<i class="rsArrowIcn icon-arrow-left-t2 vpTrackClick" '+trackingLeft+'></i>').prependTo('.buttons-container .centeredBtn');carouselContainer.find('.rsArrow.rsArrowRight').html('<i class="rsArrowIcn icon-arrow-right-t2 vpTrackClick" '+trackingRight+'></i>').prependTo('.buttons-container .centeredBtn');carouselContainer.find('.rsFullscreenBtn').show();carouselContainer.find('.rsContent div.rsABlock .legendContainer .legendWrapper').css('visibility','visible');carouselContainer.find('.rsOverflow, .rsContent').fadeIn('slow');});};
frontvpg.updateKillerDearPictures=function(){$(document.getElementById('killerDealContainer')).find('.rsImg').each(function(){var element=$(this);var desktopPath=$(this).attr('data-rsBigImg');var mobilePath=$(this).attr('data-rsTmb');if(mobilePath){if(frontvpg.targets.mobile){element.attr('src',mobilePath);}else{element.attr('src',desktopPath);}}});}
Handlebars.registerHelper('ifIsSaleSubscribe',function(options){return(this.isNext&&!frontvpg.salesCookie[this.sale_id])?options.inverse(this):options.fn(this);});Handlebars.registerHelper('subscribeKillerDealUrl',function()
{if(this.sale_id!=undefined)
{return'frontvpg.clickSubscribe('+this.sale_id+', this)';}
return'';});frontvpg.manageKillerDeal=function(){if(typeof killerDealData!="undefined"&&killerDealData.length>0){killerDealData.isSubscribeTrans=frontvpg.isSubscribe;killerDealData.headerSignTrans=frontvpg.headerSignTrans;var renderKillerDeal=Handlebars.templates['killerDealBlocks']({'killerDealBlocks':killerDealData});$(document.getElementById('killerDealContainer')).html(renderKillerDeal);frontvpg.initKillerDealPlugin();}};
(function($){$.fn.unveil=function(threshold,callback){var $w=$(window),th=threshold||0,retina=window.devicePixelRatio>1,attrib=retina?"data-src-retina":"data-src",images=this,loaded;this.one("unveil",function(){var source=this.getAttribute(attrib);source=source||this.getAttribute("data-src");if(source){this.setAttribute("src",source);if(typeof callback==="function")callback.call(this);}});function unveil(){var inview=images.filter(function(){var $e=$(this),wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height();return eb>=wt-th&&et<=wb+th;});loaded=inview.trigger("unveil");images=images.not(loaded);}$w.scroll(unveil);$w.resize(unveil);unveil();return this;};})(window.jQuery||window.Zepto);;